/**@license
 *   __ __                          __
 *  / / \ \       _    _  ___  ___  \ \
 * | |   \ \     | |  | || . \/ __>  | |
 * | |    > \    | |_ | ||  _/\__ \  | |
 * | |   / ^ \   |___||_||_|  <___/  | |
 *  \_\ /_/ \_\                     /_/ v. DEV
 *
 * LIPS is Pretty Simple - Scheme based Powerful LISP in JavaScript
 *
 * Copyright (c) 2018-2024 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * unfetch by Jason Miller (@developit) MIT License
 *
 * contentloaded.js
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 *
 * dist file generated by Babel includes code
 * Copyright (c) 2014-present, Facebook, Inc.
 * released under MIT license
 *
 * build: Tue, 10 Jun 2025 11:53:26 +0000
 */
(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(exports):typeof define==="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,t(e.lips={}))})(this,function(e){"use strict";var f=typeof document!=="undefined"?document.currentScript:null;function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(u=function e(){return!!t})()}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function C(e,t,r){if(u())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var i=new(e.bind.apply(e,n));return r&&k(i,r.prototype),i}function r(e){if(Array.isArray(e))return e}function t(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function P(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(e){return r(e)||t(e)||i(e)||P()}function h(e){"@babel/helpers - typeof";return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function R(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}function z(e){var n="function"==typeof Map?new Map:void 0;return z=function e(t){if(null===t||!R(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return C(t,arguments,L(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),k(r,t)},z(e)}function $(e,t,r,n,i,a,u){try{var o=e[a](u),s=o.value}catch(e){return void r(e)}o.done?t(s):Promise.resolve(s).then(n,i)}function V(o){return function(){var e=this,u=arguments;return new Promise(function(t,r){var n=o.apply(e,u);function i(e){$(n,t,r,i,a,"next",e)}function a(e){$(n,t,r,i,a,"throw",e)}i(void 0)})}}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function K(e){var t=J(e,"string");return"symbol"==h(t)?t:t+""}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K(n.key),n)}}function H(e,t,r){return t&&W(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function G(e,t,r){return(t=K(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function Z(e,t){if(null==e)return{};var r,n,i=Q(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function X(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,u,o=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(c)throw i}}return o}}function w(e,t){return r(e)||X(e,t)||i(e,t)||P()}function ce(e){if(Array.isArray(e))return n(e)}function fe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ee(e){return ce(e)||t(e)||i(e)||fe()}function le(e,t){this.v=e,this.k=t}function _e(e){return new le(e,0)}function he(e){return function(){return new pe(e.apply(this,arguments))}}function pe(u){var a,o;function s(r,e){try{var n=u[r](e),i=n.value,a=i instanceof le;Promise.resolve(a?i.v:i).then(function(e){if(a){var t="return"===r?"return":"next";if(!i.k||e.done)return s(t,e);e=u[t](e).value}c(n.done?"return":"normal",e)},function(e){s("throw",e)})}catch(e){c("throw",e)}}function c(e,t){switch(e){case"return":a.resolve({value:t,done:!0});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:!1})}(a=a.next)?s(a.key,a.arg):o=null}this._invoke=function(n,i){return new Promise(function(e,t){var r={key:n,arg:i,resolve:e,reject:t,next:null};o?o=o.next=r:(a=o=r,s(n,i))})},"function"!=typeof u["return"]&&(this["return"]=void 0)}pe.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},pe.prototype.next=function(e){return this._invoke("next",e)},pe.prototype["throw"]=function(e){return this._invoke("throw",e)},pe.prototype["return"]=function(e){return this._invoke("return",e)};function de(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var ve={exports:{}};var me={exports:{}};var ye;function ge(){if(ye)return me.exports;ye=1;(function(t){function r(e){"@babel/helpers - typeof";return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=true,t.exports["default"]=t.exports,r(e)}t.exports=r,t.exports.__esModule=true,t.exports["default"]=t.exports})(me);return me.exports}var be;function we(){if(be)return ve.exports;be=1;(function(B){var I=ge()["default"];function P(){B.exports=P=function e(){return u},B.exports.__esModule=true,B.exports["default"]=B.exports;var c,u={},e=Object.prototype,f=e.hasOwnProperty,l=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(c){a=function e(t,r,n){return t[r]=n}}function o(e,t,r,n){var i=t&&t.prototype instanceof s?t:s,a=Object.create(i.prototype),u=new S(n||[]);return l(a,"_invoke",{value:A(e,r,u)}),a}function _(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}u.wrap=o;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",m={};function s(){}function y(){}function g(){}var b={};a(b,i,function(){return this});var w=Object.getPrototypeOf,D=w&&w(w(j([])));D&&D!==e&&f.call(D,i)&&(b=D);var x=g.prototype=s.prototype=Object.create(b);function E(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function F(o,s){function c(e,t,r,n){var i=_(o[e],o,t);if("throw"!==i.type){var a=i.arg,u=a.value;return u&&"object"==I(u)&&f.call(u,"__await")?s.resolve(u.__await).then(function(e){c("next",e,r,n)},function(e){c("throw",e,r,n)}):s.resolve(u).then(function(e){a.value=e,r(a)},function(e){return c("throw",e,r,n)})}n(i.arg)}var i;l(this,"_invoke",{value:function e(r,n){function t(){return new s(function(e,t){c(r,n,e,t)})}return i=i?i.then(t,t):t()}})}function A(a,u,o){var s=h;return function(e,t){if(s===d)throw Error("Generator is already running");if(s===v){if("throw"===e)throw t;return{value:c,done:!0}}for(o.method=e,o.arg=t;;){var r=o.delegate;if(r){var n=k(r,o);if(n){if(n===m)continue;return n}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===h)throw s=v,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=d;var i=_(a,u,o);if("normal"===i.type){if(s=o.done?v:p,i.arg===m)continue;return{value:i.arg,done:o.done}}"throw"===i.type&&(s=v,o.method="throw",o.arg=i.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(n===c)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=c,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=_(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=c),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(t){if(t||""===t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(f.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=c,e.done=!0,e};return n.next=n}}throw new TypeError(I(t)+" is not iterable")}return y.prototype=g,l(x,"constructor",{value:g,configurable:!0}),l(g,"constructor",{value:y,configurable:!0}),y.displayName=a(g,n,"GeneratorFunction"),u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,a(e,n,"GeneratorFunction")),e.prototype=Object.create(x),e},u.awrap=function(e){return{__await:e}},E(F.prototype),a(F.prototype,r,function(){return this}),u.AsyncIterator=F,u.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var a=new F(o(e,t,r,n),i);return u.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},E(x),a(x,n,"Generator"),a(x,i,function(){return this}),a(x,"toString",function(){return"[object Generator]"}),u.keys=function(e){var r=Object(e),n=[];for(var t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},u.values=j,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&f.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=c)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var n=this;function t(e,t){return u.type="throw",u.arg=r,n.next=e,t&&(n.method="next",n.arg=c),!!t}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var o=f.call(a,"catchLoc"),s=f.call(a,"finallyLoc");if(o&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&f.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=t,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(u)},complete:function e(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;O(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function e(t,r,n){return this.delegate={iterator:j(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=c),m}},u}B.exports=P,B.exports.__esModule=true,B.exports["default"]=B.exports})(ve);return ve.exports}var De;var xe;function Ee(){if(xe)return De;xe=1;var t=we()();De=t;try{regeneratorRuntime=t}catch(e){if(typeof globalThis==="object"){globalThis.regeneratorRuntime=t}else{Function("r","regeneratorRuntime = r")(t)}}return De}var Fe=Ee();var O=de(Fe);let Ae;try{Ae=new TextDecoder}catch(e){}let v;let ke;let m=0;const Ce=105;const Oe=57342;const Se=57343;const je=57337;const Be=6;const Ie={};let Pe=11281e4;let Ne=1681e4;let p={};let Te;let Le;let Me=0;let Re=0;let qe;let Ue;let ze=[];let $e=[];let Ve;let Ye;let Je;let Ke={useRecords:false,mapsAsObjects:true};let We=false;let He=2;try{new Function("")}catch(e){He=Infinity}class Ge{constructor(r){if(r){if((r.keyMap||r._keyMap)&&!r.useRecords){r.useRecords=false;r.mapsAsObjects=true}if(r.useRecords===false&&r.mapsAsObjects===undefined)r.mapsAsObjects=true;if(r.getStructures)r.getShared=r.getStructures;if(r.getShared&&!r.structures)(r.structures=[]).uninitialized=true;if(r.keyMap){this.mapKey=new Map;for(let[e,t]of Object.entries(r.keyMap))this.mapKey.set(t,e)}}Object.assign(this,r)}decodeKey(e){return this.keyMap?this.mapKey.get(e)||e:e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(r){if(!this._keyMap)return r;let n=new Map;for(let[e,t]of Object.entries(r))n.set(this._keyMap.hasOwnProperty(e)?this._keyMap[e]:e,t);return n}decodeKeys(e){if(!this._keyMap||e.constructor.name!="Map")return e;if(!this._mapKey){this._mapKey=new Map;for(let[e,t]of Object.entries(this._keyMap))this._mapKey.set(t,e)}let r={};e.forEach((e,t)=>r[et(this._mapKey.has(t)?this._mapKey.get(t):t)]=e);return r}mapDecode(e,t){let r=this.decode(e);if(this._keyMap){switch(r.constructor.name){case"Array":return r.map(e=>this.decodeKeys(e))}}return r}decode(t,e){if(v){return Et(()=>{Ft();return this?this.decode(t,e):Ge.prototype.decode.call(Ke,t,e)})}ke=e>-1?e:t.length;m=0;Re=0;Le=null;qe=null;v=t;try{Ye=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(e){v=null;if(t instanceof Uint8Array)throw e;throw new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof Ge){p=this;Ve=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues);if(this.structures){Te=this.structures;return Qe()}else if(!Te||Te.length>0){Te=[]}}else{p=Ke;if(!Te||Te.length>0)Te=[];Ve=null}return Qe()}decodeMultiple(r,n){let i,a=0;try{let e=r.length;We=true;let t=this?this.decode(r,e):Ct.decode(r,e);if(n){if(n(t)===false){return}while(m<e){a=m;if(n(Qe())===false){return}}}else{i=[t];while(m<e){a=m;i.push(Qe())}return i}}catch(e){e.lastPosition=a;e.values=i;throw e}finally{We=false;Ft()}}}function Qe(){try{let e=a();if(qe){if(m>=qe.postBundlePosition){let e=new Error("Unexpected bundle position");e.incomplete=true;throw e}m=qe.postBundlePosition;qe=null}if(m==ke){Te=null;v=null;if(Ue)Ue=null}else if(m>ke){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}else if(!We){throw new Error("Data read, but end of buffer not reached")}return e}catch(e){Ft();if(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")){e.incomplete=true}throw e}}function a(){let n=v[m++];let i=n>>5;n=n&31;if(n>23){switch(n){case 24:n=v[m++];break;case 25:if(i==7){return ct()}n=Ye.getUint16(m);m+=2;break;case 26:if(i==7){let t=Ye.getFloat32(m);if(p.useFloat32>2){let e=kt[(v[m]&127)<<1|v[m+1]>>7];m+=4;return(e*t+(t>0?.5:-.5)>>0)/e}m+=4;return t}n=Ye.getUint32(m);m+=4;break;case 27:if(i==7){let e=Ye.getFloat64(m);m+=8;return e}if(i>1){if(Ye.getUint32(m)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");n=Ye.getUint32(m+4)}else if(p.int64AsNumber){n=Ye.getUint32(m)*4294967296;n+=Ye.getUint32(m+4)}else n=Ye.getBigUint64(m);m+=8;break;case 31:switch(i){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e=[];let t,r=0;while((t=a())!=Ie){if(r>=Pe)throw new Error(`Array length exceeds ${Pe}`);e[r++]=t}return i==4?e:i==3?e.join(""):Buffer.concat(e);case 5:let n;if(p.mapsAsObjects){let e={};let t=0;if(p.keyMap){while((n=a())!=Ie){if(t++>=Ne)throw new Error(`Property count exceeds ${Ne}`);e[et(p.decodeKey(n))]=a()}}else{while((n=a())!=Ie){if(t++>=Ne)throw new Error(`Property count exceeds ${Ne}`);e[et(n)]=a()}}return e}else{if(Je){p.mapsAsObjects=true;Je=false}let t=new Map;if(p.keyMap){let e=0;while((n=a())!=Ie){if(e++>=Ne){throw new Error(`Map size exceeds ${Ne}`)}t.set(p.decodeKey(n),a())}}else{let e=0;while((n=a())!=Ie){if(e++>=Ne){throw new Error(`Map size exceeds ${Ne}`)}t.set(n,a())}}return t}case 7:return Ie;default:throw new Error("Invalid major type for indefinite length "+i)}default:throw new Error("Unknown token "+n)}}switch(i){case 0:return n;case 1:return~n;case 2:return ut(n);case 3:if(Re>=m){return Le.slice(m-Me,(m+=n)-Me)}if(Re==0&&ke<140&&n<32){let e=n<16?at(n):it(n);if(e!=null)return e}return tt(n);case 4:if(n>=Pe)throw new Error(`Array length exceeds ${Pe}`);let t=new Array(n);for(let e=0;e<n;e++)t[e]=a();return t;case 5:if(n>=Ne)throw new Error(`Map size exceeds ${Pe}`);if(p.mapsAsObjects){let t={};if(p.keyMap)for(let e=0;e<n;e++)t[et(p.decodeKey(a()))]=a();else for(let e=0;e<n;e++)t[et(a())]=a();return t}else{if(Je){p.mapsAsObjects=true;Je=false}let t=new Map;if(p.keyMap)for(let e=0;e<n;e++)t.set(p.decodeKey(a()),a());else for(let e=0;e<n;e++)t.set(a(),a());return t}case 6:if(n>=je){let e=Te[n&8191];if(e){if(!e.read)e.read=Xe(e);return e.read()}if(n<65536){if(n==Se){let e=Dt();let t=a();let r=a();lt(t,r);let n={};if(p.keyMap)for(let t=2;t<e;t++){let e=p.decodeKey(r[t-2]);n[et(e)]=a()}else for(let t=2;t<e;t++){let e=r[t-2];n[et(e)]=a()}return n}else if(n==Oe){let t=Dt();let r=a();for(let e=2;e<t;e++){lt(r++,a())}return a()}else if(n==je){return wt()}if(p.getShared){xt();e=Te[n&8191];if(e){if(!e.read)e.read=Xe(e);return e.read()}}}}let e=ze[n];if(e){if(e.handlesRead)return e(a);else return e(a())}else{let r=a();for(let t=0;t<$e.length;t++){let e=$e[t](n,r);if(e!==undefined)return e}return new ft(r,n)}case 7:switch(n){case 20:return false;case 21:return true;case 22:return null;case 23:return;case 31:default:let e=(Ve||dt())[n];if(e!==undefined)return e;throw new Error("Unknown token "+n)}default:if(isNaN(n)){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}throw new Error("Unknown CBOR token "+n)}}const Ze=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Xe(e){if(!e)throw new Error("Structure is required in record definition");function t(){let t=v[m++];t=t&31;if(t>23){switch(t){case 24:t=v[m++];break;case 25:t=Ye.getUint16(m);m+=2;break;case 26:t=Ye.getUint32(m);m+=4;break;default:throw new Error("Expected array header, but got "+v[m-1])}}let r=this.compiledReader;while(r){if(r.propertyCount===t)return r(a);r=r.next}if(this.slowReads++>=He){let e=this.length==t?this:this.slice(0,t);r=p.keyMap?new Function("r","return {"+e.map(e=>p.decodeKey(e)).map(e=>Ze.test(e)?et(e)+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}"):new Function("r","return {"+e.map(e=>Ze.test(e)?et(e)+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}");if(this.compiledReader)r.next=this.compiledReader;r.propertyCount=t;this.compiledReader=r;return r(a)}let n={};if(p.keyMap)for(let e=0;e<t;e++)n[et(p.decodeKey(this[e]))]=a();else for(let e=0;e<t;e++){n[et(this[e])]=a()}return n}e.slowReads=0;return t}function et(e){if(typeof e==="string")return e==="__proto__"?"__proto_":e;if(typeof e==="number"||typeof e==="boolean"||typeof e==="bigint")return e.toString();if(e==null)return e+"";throw new Error("Invalid property name type "+typeof e)}let tt=rt;function rt(e){let t;if(e<16){if(t=at(e))return t}if(e>64&&Ae)return Ae.decode(v.subarray(m,m+=e));const r=m+e;const n=[];t="";while(m<r){const i=v[m++];if((i&128)===0){n.push(i)}else if((i&224)===192){const a=v[m++]&63;n.push((i&31)<<6|a)}else if((i&240)===224){const a=v[m++]&63;const u=v[m++]&63;n.push((i&31)<<12|a<<6|u)}else if((i&248)===240){const a=v[m++]&63;const u=v[m++]&63;const o=v[m++]&63;let e=(i&7)<<18|a<<12|u<<6|o;if(e>65535){e-=65536;n.push(e>>>10&1023|55296);e=56320|e&1023}n.push(e)}else{n.push(i)}if(n.length>=4096){t+=nt.apply(String,n);n.length=0}}if(n.length>0){t+=nt.apply(String,n)}return t}let nt=String.fromCharCode;function it(t){let r=m;let n=new Array(t);for(let e=0;e<t;e++){const i=v[m++];if((i&128)>0){m=r;return}n[e]=i}return nt.apply(String,n)}function at(d){if(d<4){if(d<2){if(d===0)return"";else{let e=v[m++];if((e&128)>1){m-=1;return}return nt(e)}}else{let e=v[m++];let t=v[m++];if((e&128)>0||(t&128)>0){m-=2;return}if(d<3)return nt(e,t);let r=v[m++];if((r&128)>0){m-=3;return}return nt(e,t,r)}}else{let l=v[m++];let _=v[m++];let h=v[m++];let p=v[m++];if((l&128)>0||(_&128)>0||(h&128)>0||(p&128)>0){m-=4;return}if(d<6){if(d===4)return nt(l,_,h,p);else{let e=v[m++];if((e&128)>0){m-=5;return}return nt(l,_,h,p,e)}}else if(d<8){let e=v[m++];let t=v[m++];if((e&128)>0||(t&128)>0){m-=6;return}if(d<7)return nt(l,_,h,p,e,t);let r=v[m++];if((r&128)>0){m-=7;return}return nt(l,_,h,p,e,t,r)}else{let o=v[m++];let s=v[m++];let c=v[m++];let f=v[m++];if((o&128)>0||(s&128)>0||(c&128)>0||(f&128)>0){m-=8;return}if(d<10){if(d===8)return nt(l,_,h,p,o,s,c,f);else{let e=v[m++];if((e&128)>0){m-=9;return}return nt(l,_,h,p,o,s,c,f,e)}}else if(d<12){let e=v[m++];let t=v[m++];if((e&128)>0||(t&128)>0){m-=10;return}if(d<11)return nt(l,_,h,p,o,s,c,f,e,t);let r=v[m++];if((r&128)>0){m-=11;return}return nt(l,_,h,p,o,s,c,f,e,t,r)}else{let n=v[m++];let i=v[m++];let a=v[m++];let u=v[m++];if((n&128)>0||(i&128)>0||(a&128)>0||(u&128)>0){m-=12;return}if(d<14){if(d===12)return nt(l,_,h,p,o,s,c,f,n,i,a,u);else{let e=v[m++];if((e&128)>0){m-=13;return}return nt(l,_,h,p,o,s,c,f,n,i,a,u,e)}}else{let e=v[m++];let t=v[m++];if((e&128)>0||(t&128)>0){m-=14;return}if(d<15)return nt(l,_,h,p,o,s,c,f,n,i,a,u,e,t);let r=v[m++];if((r&128)>0){m-=15;return}return nt(l,_,h,p,o,s,c,f,n,i,a,u,e,t,r)}}}}}function ut(e){return p.copyBuffers?Uint8Array.prototype.slice.call(v,m,m+=e):v.subarray(m,m+=e)}let ot=new Float32Array(1);let st=new Uint8Array(ot.buffer,0,4);function ct(){let t=v[m++];let r=v[m++];let e=(t&127)>>2;if(e===31){if(r||t&3)return NaN;return t&128?-Infinity:Infinity}if(e===0){let e=((t&3)<<8|r)/(1<<24);return t&128?-e:e}st[3]=t&128|(e>>1)+56;st[2]=(t&7)<<5|r>>3;st[1]=r<<5;st[0]=0;return ot[0]}new Array(4096);class ft{constructor(e,t){this.value=e;this.tag=t}}ze[0]=e=>{return new Date(e)};ze[1]=e=>{return new Date(Math.round(e*1e3))};ze[2]=r=>{let n=BigInt(0);for(let e=0,t=r.byteLength;e<t;e++){n=BigInt(r[e])+(n<<BigInt(8))}return n};ze[3]=e=>{return BigInt(-1)-ze[2](e)};ze[4]=e=>{return+(e[1]+"e"+e[0])};ze[5]=e=>{return e[1]*Math.exp(e[0]*Math.log(2))};const lt=(e,t)=>{e=e-57344;let r=Te[e];if(r&&r.isShared){(Te.restoreStructures||(Te.restoreStructures=[]))[e]=r}Te[e]=t;t.read=Xe(t)};ze[Ce]=r=>{let e=r.length;let n=r[1];lt(r[0],n);let i={};for(let t=2;t<e;t++){let e=n[t-2];i[et(e)]=r[t]}return i};ze[14]=e=>{if(qe)return qe[0].slice(qe.position0,qe.position0+=e);return new ft(e,14)};ze[15]=e=>{if(qe)return qe[1].slice(qe.position1,qe.position1+=e);return new ft(e,15)};let _t={Error:Error,RegExp:RegExp};ze[27]=e=>{return(_t[e[0]]||Error)(e[1],e[2])};const ht=e=>{if(v[m++]!=132){let e=new Error("Packed values structure must be followed by a 4 element array");if(v.length<m)e.incomplete=true;throw e}let t=e();if(!t||!t.length){let e=new Error("Packed values structure must be followed by a 4 element array");e.incomplete=true;throw e}Ve=Ve?t.concat(Ve.slice(t.length)):t;Ve.prefixes=e();Ve.suffixes=e();return e()};ht.handlesRead=true;ze[51]=ht;ze[Be]=e=>{if(!Ve){if(p.getShared)xt();else return new ft(e,Be)}if(typeof e=="number")return Ve[16+(e>=0?2*e:-2*e-1)];let t=new Error("No support for non-integer packed references yet");if(e===undefined)t.incomplete=true;throw t};ze[28]=e=>{if(!Ue){Ue=new Map;Ue.id=0}let t=Ue.id++;let r=m;let n=v[m];let i;if(n>>5==4)i=[];else i={};let a={target:i};Ue.set(t,a);let u=e();if(a.used){if(Object.getPrototypeOf(i)!==Object.getPrototypeOf(u)){m=r;i=u;Ue.set(t,{target:i});u=e()}return Object.assign(i,u)}a.target=u;return u};ze[28].handlesRead=true;ze[29]=e=>{let t=Ue.get(e);t.used=true;return t.target};ze[258]=e=>new Set(e);(ze[259]=e=>{if(p.mapsAsObjects){p.mapsAsObjects=false;Je=true}return e()}).handlesRead=true;function pt(e,t){if(typeof e==="string")return e+t;if(e instanceof Array)return e.concat(t);return Object.assign({},e,t)}function dt(){if(!Ve){if(p.getShared)xt();else throw new Error("No packed values available")}return Ve}const vt=1399353956;$e.push((e,t)=>{if(e>=225&&e<=255)return pt(dt().prefixes[e-224],t);if(e>=28704&&e<=32767)return pt(dt().prefixes[e-28672],t);if(e>=1879052288&&e<=2147483647)return pt(dt().prefixes[e-1879048192],t);if(e>=216&&e<=223)return pt(t,dt().suffixes[e-216]);if(e>=27647&&e<=28671)return pt(t,dt().suffixes[e-27639]);if(e>=1811940352&&e<=1879048191)return pt(t,dt().suffixes[e-1811939328]);if(e==vt){return{packedValues:Ve,structures:Te.slice(0),version:t}}if(e==55799)return t});const mt=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;const yt=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array=="undefined"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array=="undefined"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array];const gt=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<yt.length;e++){bt(yt[e],gt[e])}function bt(o,s){let c="get"+o.name.slice(0,-5);let t;if(typeof o==="function")t=o.BYTES_PER_ELEMENT;else o=null;for(let u=0;u<2;u++){if(!u&&t==1)continue;let a=t==2?1:t==4?2:t==8?3:0;ze[u?s:s-4]=t==1||u==mt?e=>{if(!o)throw new Error("Could not find typed array for code "+s);if(!p.copyBuffers){if(t===1||t===2&&!(e.byteOffset&1)||t===4&&!(e.byteOffset&3)||t===8&&!(e.byteOffset&7))return new o(e.buffer,e.byteOffset,e.byteLength>>a)}return new o(Uint8Array.prototype.slice.call(e,0).buffer)}:e=>{if(!o)throw new Error("Could not find typed array for code "+s);let t=new DataView(e.buffer,e.byteOffset,e.byteLength);let r=e.length>>a;let n=new o(r);let i=t[c];for(let e=0;e<r;e++){n[e]=i.call(t,e<<a,u)}return n}}}function wt(){let t=Dt();let e=m+a();for(let e=2;e<t;e++){let e=Dt();m+=e}let r=m;m=e;qe=[rt(Dt()),rt(Dt())];qe.position0=0;qe.position1=0;qe.postBundlePosition=m;m=r;return a()}function Dt(){let e=v[m++]&31;if(e>23){switch(e){case 24:e=v[m++];break;case 25:e=Ye.getUint16(m);m+=2;break;case 26:e=Ye.getUint32(m);m+=4;break}}return e}function xt(){if(p.getShared){let e=Et(()=>{v=null;return p.getShared()})||{};let t=e.structures||[];p.sharedVersion=e.version;Ve=p.sharedValues=e.packedValues;if(Te===true)p.structures=Te=t;else Te.splice.apply(Te,[0,t.length].concat(t))}}function Et(e){let t=ke;let r=m;let n=Me;let i=Re;let a=Le;let u=Ue;let o=qe;let s=new Uint8Array(v.slice(0,ke));let c=Te;let f=p;let l=We;let _=e();ke=t;m=r;Me=n;Re=i;Le=a;Ue=u;qe=o;v=s;We=l;Te=c;p=f;Ye=new DataView(v.buffer,v.byteOffset,v.byteLength);return _}function Ft(){v=null;Ue=null;Te=null}function At(e){ze[e.tag]=e.decode}const kt=new Array(147);for(let e=0;e<256;e++){kt[e]=+("1e"+Math.floor(45.15-e*.30103))}let Ct=new Ge({useRecords:false});Ct.decode;Ct.decodeMultiple;let Ot;try{Ot=new TextEncoder}catch(e){}let St,jt;const Bt=typeof globalThis==="object"&&globalThis.Buffer;const It=typeof Bt!=="undefined";const Pt=It?Bt.allocUnsafeSlow:Uint8Array;const Nt=It?Bt:Uint8Array;const Tt=256;const Lt=It?4294967296:2144337920;let Mt;let S;let j;let B=0;let Rt;let qt=null;const Ut=61440;const zt=/[\u0080-\uFFFF]/;const $t=Symbol("record-id");class Vt extends Ge{constructor(r){super(r);this.offset=0;let s;let u;let c;let f;let n;r=r||{};let l=Nt.prototype.utf8Write?function(e,t,r){return S.utf8Write(e,t,r)}:Ot&&Ot.encodeInto?function(e,t){return Ot.encodeInto(e,S.subarray(t)).written}:false;let a=this;let e=r.structures||r.saveStructures;let _=r.maxSharedStructures;if(_==null)_=e?128:0;if(_>8190)throw new Error("Maximum maxSharedStructure is 8190");let i=r.sequential;if(i){_=0}if(!this.structures)this.structures=[];if(this.saveStructures)this.saveShared=this.saveStructures;let h,p,o=r.sharedValues;let d;if(o){d=Object.create(null);for(let e=0,t=o.length;e<t;e++){d[o[e]]=e}}let v=[];let m=0;let y=0;this.mapEncode=function(e,t){if(this._keyMap&&!this._mapped){switch(e.constructor.name){case"Array":e=e.map(e=>this.encodeKeys(e));break}}return this.encode(e,t)};this.encode=function(t,e){if(!S){S=new Pt(8192);j=new DataView(S.buffer,0,8192);B=0}Rt=S.length-10;if(Rt-B<2048){S=new Pt(S.length);j=new DataView(S.buffer,0,S.length);Rt=S.length-10;B=0}else if(e===ir)B=B+7&2147483640;s=B;if(a.useSelfDescribedHeader){j.setUint32(B,3654940416);B+=3}n=a.structuredClone?new Map:null;if(a.bundleStrings&&typeof t!=="string"){qt=[];qt.size=Infinity}else qt=null;u=a.structures;if(u){if(u.uninitialized){let e=a.getShared()||{};a.structures=u=e.structures||[];a.sharedVersion=e.version;let r=a.sharedValues=e.packedValues;if(r){d={};for(let e=0,t=r.length;e<t;e++)d[r[e]]=e}}let e=u.length;if(e>_&&!i)e=_;if(!u.transitions){u.transitions=Object.create(null);for(let a=0;a<e;a++){let r=u[a];if(!r)continue;let n,i=u.transitions;for(let t=0,e=r.length;t<e;t++){if(i[$t]===undefined)i[$t]=a;let e=r[t];n=i[e];if(!n){n=i[e]=Object.create(null)}i=n}i[$t]=a|1048576}}if(!i)u.nextId=e}if(c)c=false;f=u||[];p=d;if(r.pack){let e=new Map;e.values=[];e.encoder=a;e.maxValues=r.maxPrivatePackedValues||(d?16:Infinity);e.objectMap=d||false;e.samplingPackedValues=h;Gt(t,e);if(e.values.length>0){S[B++]=216;S[B++]=51;Kt(4);let r=e.values;g(r);Kt(0);Kt(0);p=Object.create(d||null);for(let e=0,t=r.length;e<t;e++){p[r[e]]=e}}}Mt=e&ur;try{if(Mt)return;g(t);if(qt){tr(s,g)}a.offset=B;if(n&&n.idsToInsert){B+=n.idsToInsert.length*2;if(B>Rt)w(B);a.offset=B;let e=er(S.subarray(s,B),n.idsToInsert);n=null;return e}if(e&ir){S.start=s;S.end=B;return S}return S.subarray(s,B)}finally{if(u){if(y<10)y++;if(u.length>_)u.length=_;if(m>1e4){u.transitions=null;y=0;m=0;if(v.length>0)v=[]}else if(v.length>0&&!i){for(let e=0,t=v.length;e<t;e++){v[e][$t]=undefined}v=[]}}if(c&&a.saveShared){if(a.structures.length>_){a.structures=a.structures.slice(0,_)}let e=S.subarray(s,B);if(a.updateSharedData()===false)return a.encode(t);return e}if(e&ar)B=s}};this.findCommonStringsToPack=()=>{h=new Map;if(!d)d=Object.create(null);return e=>{let r=e&&e.threshold||4;let n=this.pack?e.maxPrivatePackedValues||16:0;if(!o)o=this.sharedValues=[];for(let[e,t]of h){if(t.count>r){d[e]=n++;o.push(e);c=true}}while(this.saveShared&&this.updateSharedData()===false){}h=null}};const g=u=>{if(B>Rt)S=w(B);var e=typeof u;var o;if(e==="string"){if(p){let e=p[u];if(e>=0){if(e<16)S[B++]=e+224;else{S[B++]=198;if(e&1)g(15-e>>1);else g(e-16>>1)}return}else if(h&&!r.pack){let e=h.get(u);if(e)e.count++;else h.set(u,{count:1})}}let i=u.length;if(qt&&i>=4&&i<1024){if((qt.size+=i)>Ut){let e;let t=(qt[0]?qt[0].length*3+qt[1].length:0)+10;if(B+t>Rt)S=w(B+t);S[B++]=217;S[B++]=223;S[B++]=249;S[B++]=qt.position?132:130;S[B++]=26;e=B-s;B+=4;if(qt.position){tr(s,g)}qt=["",""];qt.size=0;qt.position=e}let e=zt.test(u);qt[e?0:1]+=u;S[B++]=e?206:207;g(i);return}let a;if(i<32){a=1}else if(i<256){a=2}else if(i<65536){a=3}else{a=5}let e=i*3;if(B+e>Rt)S=w(B+e);if(i<64||!l){let e,t,r,n=B+a;for(e=0;e<i;e++){t=u.charCodeAt(e);if(t<128){S[n++]=t}else if(t<2048){S[n++]=t>>6|192;S[n++]=t&63|128}else if((t&64512)===55296&&((r=u.charCodeAt(e+1))&64512)===56320){t=65536+((t&1023)<<10)+(r&1023);e++;S[n++]=t>>18|240;S[n++]=t>>12&63|128;S[n++]=t>>6&63|128;S[n++]=t&63|128}else{S[n++]=t>>12|224;S[n++]=t>>6&63|128;S[n++]=t&63|128}}o=n-B-a}else{o=l(u,B+a,e)}if(o<24){S[B++]=96|o}else if(o<256){if(a<2){S.copyWithin(B+2,B+1,B+1+o)}S[B++]=120;S[B++]=o}else if(o<65536){if(a<3){S.copyWithin(B+3,B+2,B+2+o)}S[B++]=121;S[B++]=o>>8;S[B++]=o&255}else{if(a<5){S.copyWithin(B+5,B+3,B+3+o)}S[B++]=122;j.setUint32(B,o);B+=4}B+=o}else if(e==="number"){if(!this.alwaysUseFloat&&u>>>0===u){if(u<24){S[B++]=u}else if(u<256){S[B++]=24;S[B++]=u}else if(u<65536){S[B++]=25;S[B++]=u>>8;S[B++]=u&255}else{S[B++]=26;j.setUint32(B,u);B+=4}}else if(!this.alwaysUseFloat&&u>>0===u){if(u>=-24){S[B++]=31-u}else if(u>=-256){S[B++]=56;S[B++]=~u}else if(u>=-65536){S[B++]=57;j.setUint16(B,~u);B+=2}else{S[B++]=58;j.setUint32(B,~u);B+=4}}else{let t;if((t=this.useFloat32)>0&&u<4294967296&&u>=-2147483648){S[B++]=250;j.setFloat32(B,u);let e;if(t<4||(e=u*kt[(S[B]&127)<<1|S[B+1]>>7])>>0===e){B+=4;return}else B--}S[B++]=251;j.setFloat64(B,u);B+=8}}else if(e==="object"){if(!u)S[B++]=246;else{if(n){let t=n.get(u);if(t){S[B++]=216;S[B++]=29;S[B++]=25;if(!t.references){let e=n.idsToInsert||(n.idsToInsert=[]);t.references=[];e.push(t)}t.references.push(B-s);B+=2;return}else n.set(u,{offset:B-s})}let e=u.constructor;if(e===Object){b(u)}else if(e===Array){o=u.length;if(o<24){S[B++]=128|o}else{Kt(o)}for(let e=0;e<o;e++){g(u[e])}}else if(e===Map){if(this.mapsAsObjects?this.useTag259ForMaps!==false:this.useTag259ForMaps){S[B++]=217;S[B++]=1;S[B++]=3}o=u.size;if(o<24){S[B++]=160|o}else if(o<256){S[B++]=184;S[B++]=o}else if(o<65536){S[B++]=185;S[B++]=o>>8;S[B++]=o&255}else{S[B++]=186;j.setUint32(B,o);B+=4}if(a.keyMap){for(let[e,t]of u){g(a.encodeKey(e));g(t)}}else{for(let[e,t]of u){g(e);g(t)}}}else{for(let r=0,e=St.length;r<e;r++){let e=jt[r];if(u instanceof e){let e=St[r];let t=e.tag;if(t==undefined)t=e.getTag&&e.getTag.call(this,u);if(t<24){S[B++]=192|t}else if(t<256){S[B++]=216;S[B++]=t}else if(t<65536){S[B++]=217;S[B++]=t>>8;S[B++]=t&255}else if(t>-1){S[B++]=218;j.setUint32(B,t);B+=4}e.encode.call(this,u,g,w);return}}if(u[Symbol.iterator]){if(Mt){let e=new Error("Iterable should be serialized as iterator");e.iteratorNotHandled=true;throw e}S[B++]=159;for(let e of u){g(e)}S[B++]=255;return}if(u[Symbol.asyncIterator]||Ht(u)){let e=new Error("Iterable/blob should be serialized as iterator");e.iteratorNotHandled=true;throw e}if(this.useToJSON&&u.toJSON){const t=u.toJSON();if(t!==u)return g(t)}b(u)}}}else if(e==="boolean"){S[B++]=u?245:244}else if(e==="bigint"){if(u<BigInt(1)<<BigInt(64)&&u>=0){S[B++]=27;j.setBigUint64(B,u)}else if(u>-(BigInt(1)<<BigInt(64))&&u<0){S[B++]=59;j.setBigUint64(B,-u-BigInt(1))}else{if(this.largeBigIntToFloat){S[B++]=251;j.setFloat64(B,Number(u))}else{if(u>=BigInt(0))S[B++]=194;else{S[B++]=195;u=BigInt(-1)-u}let e=[];while(u){e.push(Number(u&BigInt(255)));u>>=BigInt(8)}Xt(new Uint8Array(e.reverse()),w);return}}B+=8}else if(e==="undefined"){S[B++]=247}else{throw new Error("Unknown type: "+e)}};const b=this.useRecords===false?this.variableMapSize?e=>{let t=Object.keys(e);let r=Object.values(e);let n=t.length;if(n<24){S[B++]=160|n}else if(n<256){S[B++]=184;S[B++]=n}else if(n<65536){S[B++]=185;S[B++]=n>>8;S[B++]=n&255}else{S[B++]=186;j.setUint32(B,n);B+=4}if(a.keyMap){for(let e=0;e<n;e++){g(a.encodeKey(t[e]));g(r[e])}}else{for(let e=0;e<n;e++){g(t[e]);g(r[e])}}}:t=>{S[B++]=185;let e=B-s;B+=2;let r=0;if(a.keyMap){for(let e in t)if(typeof t.hasOwnProperty!=="function"||t.hasOwnProperty(e)){g(a.encodeKey(e));g(t[e]);r++}}else{for(let e in t)if(typeof t.hasOwnProperty!=="function"||t.hasOwnProperty(e)){g(e);g(t[e]);r++}}S[e+++s]=r>>8;S[e+s]=r&255}:(t,e)=>{let r,n=f.transitions||(f.transitions=Object.create(null));let i=0;let a=0;let u;let o;if(this.keyMap){o=Object.keys(t).map(e=>this.encodeKey(e));a=o.length;for(let t=0;t<a;t++){let e=o[t];r=n[e];if(!r){r=n[e]=Object.create(null);i++}n=r}}else{for(let e in t)if(typeof t.hasOwnProperty!=="function"||t.hasOwnProperty(e)){r=n[e];if(!r){if(n[$t]&1048576){u=n[$t]&65535}r=n[e]=Object.create(null);i++}n=r;a++}}let s=n[$t];if(s!==undefined){s&=65535;S[B++]=217;S[B++]=s>>8|224;S[B++]=s&255}else{if(!o)o=n.__keys__||(n.__keys__=Object.keys(t));if(u===undefined){s=f.nextId++;if(!s){s=0;f.nextId=1}if(s>=Tt){f.nextId=(s=_)+1}}else{s=u}f[s]=o;if(s<_){S[B++]=217;S[B++]=s>>8|224;S[B++]=s&255;n=f.transitions;for(let e=0;e<a;e++){if(n[$t]===undefined||n[$t]&1048576)n[$t]=s;n=n[o[e]]}n[$t]=s|1048576;c=true}else{n[$t]=s;j.setUint32(B,3655335680);B+=3;if(i)m+=y*i;if(v.length>=Tt-_)v.shift()[$t]=undefined;v.push(n);Kt(a+2);g(57344+s);g(o);if(e)return;for(let e in t)if(typeof t.hasOwnProperty!=="function"||t.hasOwnProperty(e))g(t[e]);return}}if(a<24){S[B++]=128|a}else{Kt(a)}if(e)return;for(let e in t)if(typeof t.hasOwnProperty!=="function"||t.hasOwnProperty(e))g(t[e])};const w=e=>{let t;if(e>16777216){if(e-s>Lt)throw new Error("Encoded buffer would be larger than maximum buffer size");t=Math.min(Lt,Math.round(Math.max((e-s)*(e>67108864?1.25:2),4194304)/4096)*4096)}else t=(Math.max(e-s<<2,S.length-1)>>12)+1<<12;let r=new Pt(t);j=new DataView(r.buffer,0,t);if(S.copy)S.copy(r,0,s,e);else r.set(S.slice(s,e));B-=s;s=0;Rt=r.length-10;return S=r};let D=100;let x=1e3;this.encodeAsIterable=function(e,t){return k(e,t,E)};this.encodeAsAsyncIterable=function(e,t){return k(e,t,C)};function*E(n,i,e){let t=n.constructor;if(t===Object){let r=a.useRecords!==false;if(r)b(n,true);else Yt(Object.keys(n).length,160);for(let t in n){let e=n[t];if(!r)g(t);if(e&&typeof e==="object"){if(i[t])yield*E(e,i[t]);else yield*F(e,i,t)}else g(e)}}else if(t===Array){let e=n.length;Kt(e);for(let t=0;t<e;t++){let e=n[t];if(e&&(typeof e==="object"||B-s>D)){if(i.element)yield*E(e,i.element);else yield*F(e,i,"element")}else g(e)}}else if(n[Symbol.iterator]&&!n.buffer){S[B++]=159;for(let e of n){if(e&&(typeof e==="object"||B-s>D)){if(i.element)yield*E(e,i.element);else yield*F(e,i,"element")}else g(e)}S[B++]=255}else if(Ht(n)){Yt(n.size,64);yield S.subarray(s,B);yield n;A()}else if(n[Symbol.asyncIterator]){S[B++]=159;yield S.subarray(s,B);yield n;A();S[B++]=255}else{g(n)}if(e&&B>s)yield S.subarray(s,B);else if(B-s>D){yield S.subarray(s,B);A()}}function*F(t,r,n){let i=B-s;try{g(t);if(B-s>D){yield S.subarray(s,B);A()}}catch(e){if(e.iteratorNotHandled){r[n]={};B=s+i;yield*E.call(this,t,r[n])}else throw e}}function A(){D=x;a.encode(null,ur)}function k(e,t,r){if(t&&t.chunkThreshold)D=x=t.chunkThreshold;else D=100;if(e&&typeof e==="object"){a.encode(null,ur);return r(e,a.iterateProperties||(a.iterateProperties={}),true)}return[a.encode(e)]}async function*C(e,t){for(let r of E(e,t,true)){let e=r.constructor;if(e===Nt||e===Uint8Array)yield r;else if(Ht(r)){let e=r.stream().getReader();let t;while(!(t=await e.read()).done){yield t.value}}else if(r[Symbol.asyncIterator]){for await(let e of r){A();if(e)yield*C(e,t.async||(t.async={}));else yield a.encode(e)}}else{yield r}}}}useBuffer(e){S=e;j=new DataView(S.buffer,S.byteOffset,S.byteLength);B=0}clearSharedData(){if(this.structures)this.structures=[];if(this.sharedValues)this.sharedValues=undefined}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let e=this.structures.slice(0);let r=new Jt(e,this.sharedValues,this.sharedVersion);let n=this.saveShared(r,e=>(e&&e.version||0)==t);if(n===false){r=this.getShared()||{};this.structures=r.structures||[];this.sharedValues=r.packedValues;this.sharedVersion=r.version;this.structures.nextId=this.structures.length}else{e.forEach((e,t)=>this.structures[t]=e)}return n}}function Yt(e,t){if(e<24)S[B++]=t|e;else if(e<256){S[B++]=t|24;S[B++]=e}else if(e<65536){S[B++]=t|25;S[B++]=e>>8;S[B++]=e&255}else{S[B++]=t|26;j.setUint32(B,e);B+=4}}class Jt{constructor(e,t,r){this.structures=e;this.packedValues=t;this.version=r}}function Kt(e){if(e<24)S[B++]=128|e;else if(e<256){S[B++]=152;S[B++]=e}else if(e<65536){S[B++]=153;S[B++]=e>>8;S[B++]=e&255}else{S[B++]=154;j.setUint32(B,e);B+=4}}const Wt=typeof Blob==="undefined"?function(){}:Blob;function Ht(e){if(e instanceof Wt)return true;let t=e[Symbol.toStringTag];return t==="Blob"||t==="File"}function Gt(r,n){switch(typeof r){case"string":if(r.length>3){if(n.objectMap[r]>-1||n.values.length>=n.maxValues)return;let e=n.get(r);if(e){if(++e.count==2){n.values.push(r)}}else{n.set(r,{count:1});if(n.samplingPackedValues){let e=n.samplingPackedValues.get(r);if(e)e.count++;else n.samplingPackedValues.set(r,{count:1})}}}break;case"object":if(r){if(r instanceof Array){for(let e=0,t=r.length;e<t;e++){Gt(r[e],n)}}else{let e=!n.encoder.useRecords;for(var t in r){if(r.hasOwnProperty(t)){if(e)Gt(t,n);Gt(r[t],n)}}}}break;case"function":console.log(r)}}const Qt=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;jt=[Date,Set,Error,RegExp,ft,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array=="undefined"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array=="undefined"?function(){}:BigInt64Array,Float32Array,Float64Array,Jt];St=[{tag:1,encode(e,t){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){S[B++]=26;j.setUint32(B,r);B+=4}else{S[B++]=251;j.setFloat64(B,r);B+=8}}},{tag:258,encode(e,t){let r=Array.from(e);t(r)}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag(e){return e.tag},encode(e,t){t(e.value)}},{encode(e,t,r){Xt(e,r)}},{getTag(e){if(e.constructor===Uint8Array){if(this.tagUint8Array||It&&this.tagUint8Array!==false)return 64}},encode(e,t,r){Xt(e,r)}},Zt(68,1),Zt(69,2),Zt(70,4),Zt(71,8),Zt(72,1),Zt(77,2),Zt(78,4),Zt(79,8),Zt(85,4),Zt(86,8),{encode(t,n){let e=t.packedValues||[];let r=t.structures||[];if(e.values.length>0){S[B++]=216;S[B++]=51;Kt(4);let r=e.values;n(r);Kt(0);Kt(0);packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let e=0,t=r.length;e<t;e++){packedObjectMap[r[e]]=e}}if(r){j.setUint32(B,3655335424);B+=3;let e=r.slice(0);e.unshift(57344);e.push(new ft(t.version,1399353956));n(e)}else n(new ft(t.version,1399353956))}}];function Zt(e,t){if(!Qt&&t>1)e-=4;return{tag:e,encode:function e(t,r){let n=t.byteLength;let i=t.byteOffset||0;let a=t.buffer||t;r(It?Bt.from(a,i,n):new Uint8Array(a,i,n))}}}function Xt(e,t){let r=e.byteLength;if(r<24){S[B++]=64+r}else if(r<256){S[B++]=88;S[B++]=r}else if(r<65536){S[B++]=89;S[B++]=r>>8;S[B++]=r&255}else{S[B++]=90;j.setUint32(B,r);B+=4}if(B+r>=S.length){t(B+r)}S.set(e.buffer?e:new Uint8Array(e),B);B+=r}function er(n,e){let r;let i=e.length*2;let a=n.length-i;e.sort((e,t)=>e.offset>t.offset?1:-1);for(let r=0;r<e.length;r++){let t=e[r];t.id=r;for(let e of t.references){n[e++]=r>>8;n[e]=r&255}}while(r=e.pop()){let e=r.offset;n.copyWithin(e+i,e,a);i-=2;let t=e+i;n[t++]=216;n[t++]=28;a=e}return n}function tr(e,t){j.setUint32(qt.position+e,B-qt.position-e+1);let r=qt;qt=null;t(r[0]);t(r[1])}function rr(e){if(e.Class){if(!e.encode)throw new Error("Extension has no encode function");jt.unshift(e.Class);St.unshift(e)}At(e)}let nr=new Vt({useRecords:false});nr.encode;nr.encodeAsIterable;nr.encodeAsAsyncIterable;const ir=512;const ar=1024;const ur=2048;var or={};
/**@license
   *
   * No Dependency fast and small LZJB Compression for Browser and Node
   *
   * Copyright (c) 2021 Jakub T. Jankiewicz https://jcubic.pl/me
   * Released under BSD-3-Clause License
   *
   * build: Wed, 27 Oct 2021 10:43:10 GMT
   */var sr;function cr(){if(sr)return or;sr=1;Object.defineProperty(or,"__esModule",{value:true});const h=8,p=6,d=3,v=(1<<p)+(d-1),m=(1<<16-p)-1,y=256;function u(e,t){var r=0,n=0,i=0,a=0,u=0,o=1<<h-1,s=0,c=0,f=0,l=new Int32Array(y),_=0;for(_=0;_<y;_++){l[_]=-858993460}r=e.length;while(n<r){if((o<<=1)==1<<h){o=1;u=i;t[i++]=0}if(n>r-v){t[i++]=e[n++];continue}f=(e[n]+13^e[n+1]-13^e[n+2])&y-1;c=n-l[f]&m;l[f]=n;a=n-c;if(a>=0&&a!=n&&e[n]==e[a]&&e[n+1]==e[a+1]&&e[n+2]==e[a+2]){t[u]|=o;for(s=d;s<v;s++)if(e[n+s]!=e[a+s])break;t[i++]=s-d<<h-p|c>>h;t[i++]=c;n+=s}else{t[i++]=e[n++]}}console.assert(e.length>=n);return i}function c(e,t,r){t=t|0;var n=0,i=0,a=0,u=0,o=1<<(h-1|0),s=0,c=0;while(n<t){if((o<<=1)===1<<h){o=1;u=e[n];n=n+1|0}if(u&o){s=(e[n]>>(h-p|0))+d|0;c=(e[n]<<h|e[n+1|0])&m;n=n+2|0;a=i-c|0;{while(s>4){r[i]=r[a];i=i+1|0;a=a+1|0;r[i]=r[a];i=i+1|0;a=a+1|0;r[i]=r[a];i=i+1|0;a=a+1|0;r[i]=r[a];i=i+1|0;a=a+1|0;s=s-4|0}while(s>0){r[i]=r[a];i=i+1|0;a=a+1|0;s=s-1|0}}}else{r[i]=e[n];i=i+1|0;n=n+1|0}}return i}function e(){const e=new TextEncoder("utf-8");return e.encode(f)}const f="@lzjb";const l=e();function o(...e){if(e.length>1){const r=e.reduce((e,t)=>e+t.length,0);const n=new Uint8Array(r);let t=0;e.forEach(e=>{n.set(e,t);t+=e.length});return n}else if(e.length){return e[0]}}function s(t){const e=Math.ceil(Math.log2(t)/8);const r=new Uint8Array(e);for(let e=0;e<r.length;e++){const n=t&255;r[e]=n;t=(t-n)/256}return r}function _(t){let r=0;for(let e=t.length-1;e>=0;e--){r=r*256+t[e]}return r}function t(e,{magic:t=true}={}){const r=new Uint8Array(Math.max(e.length*1.5|0,16*1024));const n=u(e,r);const i=s(e.length);const a=[Uint8Array.of(i.length),i,r.slice(0,n)];if(t){a.unshift(l)}return o(...a)}function r(t,{magic:e=true}={}){if(e){const e=new TextDecoder("utf-8");const s=e.decode(t.slice(0,l.length));if(s!==f){throw new Error("Invalid magic value")}}const r=e?l.length:0;const n=t[r];const i=r+1;const a=r+n+1;const u=_(t.slice(i,a));t=t.slice(a);const o=new Uint8Array(u);c(t,t.length,o);return o}or.pack=t;or.unpack=r;return or}var fr=cr();function lr(o,s){return s=s||{},new Promise(function(e,t){var r=new XMLHttpRequest,n=[],i={},a=function e(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:e,headers:{keys:function(){return n},entries:function(){return n.map(function(e){return[e,r.getResponseHeader(e)]})},get:function(e){return r.getResponseHeader(e)},has:function(e){return null!=r.getResponseHeader(e)}}}};for(var u in r.open(s.method||"get",o,!0),r.onload=function(){r.getAllResponseHeaders().toLowerCase().replace(/^(.+?):/gm,function(e,t){i[t]||n.push(i[t]=t)}),e(a())},r.onerror=t,r.withCredentials="include"==s.credentials,s.headers)r.setRequestHeader(u,s.headers[u]);r.send(s.body||null)})}var _r=["token"],hr=["env"],pr=["stderr","stdin","stdout","command_line"],dr=["use_dynamic"],vr=["use_dynamic"],mr=["env","dynamic_env","use_dynamic","error"];function yr(e,t,r){gr(e,t),t.set(e,r)}function gr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function br(e,t){return e.get(Dr(e,t))}function wr(e,t,r){return e.set(Dr(e,t),r),r}function Dr(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function xr(e,t,r){return t=L(t),T(e,Er()?Reflect.construct(t,r||[],L(e).constructor):t.apply(e,r))}function Er(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Er=function e(){return!!t})()}function Fr(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Ar(t))||e){r&&(t=r);var n=0,i=function e(){};return{s:i,n:function e(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,o=!1;return{s:function e(){r=r.call(t)},n:function e(){var t=r.next();return u=t.done,t},e:function e(t){o=!0,a=t},f:function e(){try{u||null==r["return"]||r["return"]()}finally{if(o)throw a}}}}function Ar(e,t){if(e){if("string"==typeof e)return kr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kr(e,t):void 0}}function kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Cr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function te(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Cr(Object(r),!0).forEach(function(e){G(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Or(e){var t,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Sr(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Sr(e){function n(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Sr=function e(t){this.s=t,this.n=t.next},Sr.prototype={s:null,n:null,next:function e(){return n(this.n.apply(this.s,arguments))},return:function e(t){var r=this.s["return"];return void 0===r?Promise.resolve({value:t,done:!0}):n(r.apply(this.s,arguments))},throw:function e(t){var r=this.s["return"];return void 0===r?Promise.reject(t):n(r.apply(this.s,arguments))}},new Sr(e)}var jr=typeof global!=="undefined"?global:self;if(!jr.fetch){jr.fetch=lr}var Br={pair:ae,symbol:ne,number:I,array:Array,nil:Ui,character:_,values:_o,"input-port":Ju,"output-port":Ku,regex:RegExp,syntax:ga,eof:oo,macro:q,string:x,"native-symbol":Symbol};var Ir=new Map([[NaN,"NaN"],[null,"null"]]);var Pr,Nr,Tr;var Lr=jr.BN;function Mr(r,n){var i=false,e=true,a=r.document,t=a.documentElement,u=a.addEventListener,o=u?"addEventListener":"attachEvent",s=u?"removeEventListener":"detachEvent",c=u?"":"on",f=function e(t){if(t.type=="readystatechange"&&a.readyState!="complete")return;(t.type=="load"?r:a)[s](c+t.type,f,false);if(!i&&(i=true))n.call(r,t.type||t)},l=function e(){try{t.doScroll("left")}catch(e){setTimeout(l,50);return}f("poll")};if(a.readyState=="complete")n.call(r,"lazy");else{if(!u&&t.doScroll){try{e=!r.frameElement}catch(e){}if(e)l()}a[o](c+"DOMContentLoaded",f,false);a[o](c+"readystatechange",f,false);r[o](c+"load",f,false)}}function re(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}if(Vi(e)&&Rr(r[0])){console.log(Wa(e,function(e){return na(e,true)}))}else if(Rr()){var i;(i=console).log.apply(i,[na(e,true)].concat(ee(r.map(function(e){return na(e,true)}))))}}function Rr(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=xo&&xo.get("DEBUG",{throwError:false});if(e===null){return t===true}return(t===null||t===void 0?void 0:t.valueOf())===e.valueOf()}function qr(e){return e?"(?:#".concat(e,"(?:#[ie])?|#[ie]#").concat(e,")"):"(?:#[ie])?"}function Ur(e,t){return"".concat(qr(e),"[+-]?").concat(t,"+/").concat(t,"+")}function zr(e,t){return"".concat(qr(e),"(?:[+-]?(?:").concat(t,"+/").concat(t,"+|nan.0|inf.0|").concat(t,"+))?(?:[+-]i|[+-]?(?:").concat(t,"+/").concat(t,"+|").concat(t,"+|nan.0|inf.0)i)(?=[()[\\]\\s]|$)")}function $r(e,t){return"".concat(qr(e),"[+-]?").concat(t,"+")}var Vr=/^#\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimyus]*)$/;var Yr="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)";var Jr="(?:#[ie])?(?:[+-]?(?:[0-9][0-9_]*/[0-9][0-9_]*|nan.0|inf.0|".concat(Yr,"|[+-]?[0-9]+))?(?:").concat(Yr,"|[+-](?:[0-9]+/[0-9]+|[0-9]+|nan.0|inf.0))i");var Kr=new RegExp("^(#[ie])?".concat(Yr,"$"),"i");function Wr(e,t){var r=e==="x"?"(?!\\+|".concat(t,")"):"(?!\\.|".concat(t,")");var n="";if(e===""){n="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+(?![0-9]))(?:[eE][-+]?[0-9]+)?))"}return new RegExp("^((?:(?:".concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+(?!").concat(t,")|[+-]?").concat(t,"+)").concat(r,")?)(").concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+|[+-]?").concat(t,"+|[+-])i$"),"i")}var Hr=function(){var a={};[[10,"","[0-9]"],[16,"x","[0-9a-fA-F]"],[8,"o","[0-7]"],[2,"b","[01]"]].forEach(function(e){var t=w(e,3),r=t[0],n=t[1],i=t[2];a[r]=Wr(n,i)});return a}();var Gr={alarm:"",backspace:"\b",delete:"",escape:"",newline:"\n",null:"\0",return:"\r",space:" ",tab:"\t",dle:"",soh:"",dc1:"",stx:"",dc2:"",etx:"",dc3:"",eot:"",dc4:"",enq:"",nak:"",ack:"",syn:"",bel:"",etb:"",bs:"\b",can:"",ht:"\t",em:"",lf:"\n",sub:"",vt:"\v",esc:"",ff:"\f",fs:"",cr:"\r",gs:"",so:"",rs:"",si:"",us:"",del:""};function Qr(e){var t=[];var r=0;var n=e.length;while(r<n){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var a=e.charCodeAt(r++);if((a&64512)===56320){t.push(((i&1023)<<10)+(a&1023)+65536)}else{t.push(i);r--}}else{t.push(i)}}return t}var Zr=Object.keys(Gr).join("|");var Xr="#\\\\(?:x[0-9a-f]+|".concat(Zr,"|[\\s\\S])");var en=new RegExp("^".concat(Xr,"$"),"i");function tn(i){var e=[["o","[0-7]"],["x","[0-9a-fA-F]"],["b","[01]"],["d","[0-9]"],["","[0-9]"]];var t=e.map(function(e){var t=w(e,2),r=t[0],n=t[1];return i(r,n)}).join("|");if(i===zr){t=Jr+"|"+t}return t}function rn(e){return new RegExp("^(?:"+tn(e)+")$","i")}var nn=rn(zr);var an=rn(Ur);var un=rn($r);var on=new RegExp("^(?:"+$r("","[0-9a-f]")+")$","i");var sn=new RegExp("^(?:"+Ur("","[0-9a-f]")+")$","i");var cn=new RegExp("^(?:"+zr("","[0-9a-f]")+")$","i");var ln=Wr("","[0-9a-fA-F]");var _n=/((?:#[xodbie]){0,2})(.*)/i;function hn(e){var t=e.match(_n);var r={};if(t[1]){var n=t[1].replace(/#/g,"").toLowerCase().split("");if(n.includes("x")){r.radix=16}else if(n.includes("o")){r.radix=8}else if(n.includes("b")){r.radix=2}else if(n.includes("d")){r.radix=10}if(n.includes("i")){r.inexact=true}if(n.includes("e")){r.exact=true}}r.number=t[2];return r}function pn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=hn(e);var n=r.number.split("/");var i=b({num:I([n[0],r.radix||t]),denom:I([n[1],r.radix||t])});if(r.inexact){return i.valueOf()}else{return i}}function dn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=hn(e);if(r.inexact){return g(parseInt(r.number,r.radix||t))}return I([r.number,r.radix||t])}function vn(e){var t=e.match(/#\\x([0-9a-f]+)$/i);var r;if(t){var n=parseInt(t[1],16);r=String.fromCodePoint(n)}else{t=e.match(/#\\([\s\S]+)$/);if(t){r=t[1]}}if(r){return _(r)}throw new Error("Parse: invalid character")}function mn(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;function t(e){var t;if(e==="+"){t=I(1)}else if(e==="-"){t=I(-1)}else if(e.match(on)){t=I([e,i])}else if(e.match(sn)){var r=e.split("/");t=b({num:I([r[0],i]),denom:I([r[1],i])})}else if(e.match(Kr)){var n=wn(e);if(a.exact){return n.toRational()}return n}else if(e.match(/nan.0$/)){return I(NaN)}else if(e.match(/inf.0$/)){if(e[0]==="-"){return I(Number.NEGATIVE_INFINITY)}return I(Number.POSITIVE_INFINITY)}else{throw new Error("Internal Parser Error")}if(a.inexact){return g(t.valueOf())}return t}var a=hn(e);i=a.radix||i;var r;var n=a.number.match(ln);if(i!==10&&n){r=n}else{r=a.number.match(Hr[i])}var u,o;o=t(r[2]);if(r[1]){u=t(r[1])}else if(o instanceof g){u=g(0)}else{u=I(0)}if(o.cmp(0)===0&&o.__type__==="bigint"){return u}return y({im:o,re:u})}function yn(e){return parseInt(e.toString(),10)===e}function gn(e){var t=e.match(/^(([-+]?[0-9]*)(?:\.([0-9]+))?)e([-+]?[0-9]+)/i);if(t){var r=parseInt(t[4],10);var n;var i=t[1].replace(/[-+]?([0-9]*)\..+$/,"$1").length;var a=t[3]&&t[3].length;if(i<Math.abs(r)){n=I([t[1].replace(/\./,""),10]);if(a){r-=a}}}return{exponent:r,mantisa:n}}function bn(e){if(e.match(/e/i)){var t=e.split("e"),r=w(t,2),n=r[0],i=r[1];var a=Math.abs(parseInt(i));if(a<7&&i<0){var u="0".repeat(a-1);var o=n[0]==="-"?"-":"+";var s=n.replace(/(^[-+])|\./g,"");var c="".concat(o,"0.").concat(u).concat(s);return parseFloat(c)}}return parseFloat(e)}function wn(e){var t=hn(e);var r=bn(t.number);var n=(t.number.match(/\.0$/)||!t.number.match(/\./))&&!t.number.match(/e/i);if(!t.inexact){if(t.exact&&n){return I(r)}if(yn(r)&&Number.isSafeInteger(r)&&t.number.match(/e\+?[0-9]/i)){return I(r)}var i=gn(t.number),a=i.mantisa,u=i.exponent;if(a!==undefined&&u!==undefined){var o=I(10).pow(I(Math.abs(u)));if(t.exact&&u<0){return b({num:a,denom:o})}else if(u>0&&(t.exact||!t.number.match(/\./))){return I(a).mul(o)}}}r=g(r);if(t.exact){return r.toRational()}return r}function Dn(e){e=e.replace(/\\x([0-9a-f]+);/gi,function(e,t){return"\\u"+t.padStart(4,"0")}).replace(/\n/g,"\\n");var t=e.match(/(\\*)(\\x[0-9A-F])/i);if(t&&t[1].length%2===0){throw new Error("Invalid string literal, unclosed ".concat(t[2]))}try{var r=x(JSON.parse(e));r.freeze();return r}catch(e){var n=e.message.replace(/in JSON /,"").replace(/.*Error: /,"");throw new Error("Invalid string literal: ".concat(n))}}function xn(e){e.match(/^name/);var t=/(^|.)\|/g;if(e.match(t)){e=e.split("|").filter(Boolean).reduce(function(e,t){var r="";if(t.match(/^\\+$/)){if(t.length>1){var n=Math.floor(t.length/2);r="\\".repeat(n)}if(t.length%2!==0){r+="|"}}else{r=t}return e+r});var r={t:"\t",r:"\r",n:"\n"};e=e.replace(/\\(x[^;]+);/g,function(e,t){return String.fromCharCode(parseInt("0"+t,16))}).replace(/\\([trn])/g,function(e,t){return r[t]})}return new ne(e)}function En(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var r=e.token;if(Do.hasOwnProperty(r)){return Do[r]}var n;if(r.match(/^"[\s\S]*"$/)){n=Dn(r)}else if(r[0]==="#"){var i=r.match(Vr);if(i){n=new RegExp(i[1],i[2])}else if(r.match(en)){n=vn(r)}var a=r.match(/#\\(.+)/);if(a&&Qr(a[1]).length===1){n=vn(r)}}if(r.match(/[0-9a-f]|[+-]i/i)){if(r.match(un)){n=dn(r)}else if(r.match(Kr)){n=wn(r)}else if(r.match(an)){n=pn(r)}else if(r.match(nn)){n=mn(r)}}if(!n&&r.match(/^#[iexobd]/)){throw new Error("Invalid numeric constant: "+e)}if(!n){n=xn(r)}if(t){var u=e.col,o=e.offset,s=e.line;c(n,"__col__",u);c(n,"__offset__",o);c(n,"__line__",s)}return n}function Fn(e){return!(["(",")","[","]"].includes(e)||Jn.names().includes(e))}function An(e){return Fn(e)&&!(e.match(Vr)||e.match(/^"[\s\S]*"$/)||e.match(un)||e.match(Kr)||e.match(nn)||e.match(an)||e.match(en)||["#t","#f","nil"].includes(e))}var kn=/"(?:\\[\S\s]|[^"])*"?/g;function Cn(e){if(typeof e==="string"){var t=/([-\\^$[\]()+{}?*.|])/g;return e.replace(t,"\\$1")}return e}function On(){this.data=[]}On.prototype.push=function(e){this.data.push(e)};On.prototype.top=function(){return this.data[this.data.length-1]};On.prototype.pop=function(){return this.data.pop()};On.prototype.is_empty=function(){return!this.data.length};function Sn(e){if(e instanceof x){e=e.valueOf()}var t=new o(e,{whitespace:true});var r=[];while(true){var n=t.peek(true);if(n===uo){break}r.push(n);t.skip()}return r}function jn(e){var t=e.token,r=Z(e,_r);if(t.match(/^"[\s\S]*"$/)&&t.match(/\n/)){var n=new RegExp("^ {1,"+(e.col+1)+"}","mg");t=t.replace(n,"")}return te({token:t},r)}function Bn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};this.fn=e;this.cont=t}Bn.prototype.toString=function(){return"#<Thunk>"};function In(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return Pn(n.apply(this,t))}}function Pn(e){while(e instanceof Bn){var t=e;e=e.fn();if(!(e instanceof Bn)){t.cont()}}return e}function Nn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof x){e=e.toString()}if(t){return Sn(e)}else{var r=Sn(e).map(function(e){if(e.token==="#\\ "||e.token=="#\\\n"){return e.token}return e.token.trim()}).filter(function(e){return e&&!e.match(/^;/)&&!e.match(/^#\|[\s\S]*\|#$/)});return Tn(r)}}function Tn(e){var t=0;var r=null;var n=[];for(var i=0;i<e.length;++i){var a=e[i];if(a==="#;"){if(["(","["].includes(e[i+1])){t=1;r=i}else{n.push([i,i+2])}i+=1;continue}if(r!==null){if([")","]"].includes(a)){t--}else if(["(","["].includes(a)){t++}if(t===0){n.push([r,i+1]);r=null}}}e=e.slice();n.reverse();for(var u=0,o=n;u<o.length;u++){var s=w(o[u],2),c=s[0],f=s[1];e.splice(c,f-c)}return e}function Ln(e){return h(e)==="symbol"||h(e)==="object"&&Object.prototype.toString.call(e)==="[object Symbol]"}function ne(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(e instanceof x){e=e.valueOf()}if(t&&ne.list[e]instanceof ne){return ne.list[e]}if(typeof this!=="undefined"&&this.constructor!==ne||typeof this==="undefined"){return new ne(e,t)}this.__name__=e;if(t&&typeof e==="string"){ne.list[e]=this}}ne.list={};ne.literal=Symbol["for"]("__literal__");ne.object=Symbol["for"]("__object__");ne.prototype.is_interned=function(){return ne.list[this.__name__]==this};ne.is=function(e,t){return e instanceof ne&&(t instanceof ne&&e.__name__===t.__name__||typeof t==="string"&&e.__name__===t||t instanceof RegExp&&t.test(e.__name__))};ne.prototype.toString=function(e){if(Ln(this.__name__)){return Mn(this.__name__)}var t=this.valueOf();if(e&&t.match(/(^;|[\s()[\]'])/)){return"|".concat(t,"|")}return t};ne.prototype.literal=function(){if(this.is_gensym()){return this[ne.literal]}return this.valueOf()};ne.prototype.serialize=function(){if(x.isString(this.__name__)){return this.__name__}return[Mn(this.__name__)]};ne.prototype.valueOf=function(){return this.__name__.valueOf()};ne.prototype.is_gensym=function(){return Rn(this.__name__)};function Mn(e){return e.toString().replace(/^Symbol\(([^)]+)\)/,"$1")}function Rn(e){if(h(e)==="symbol"){return!!e.toString().match(/^Symbol\(#:/)}return false}var qn=function(){var t=0;function r(e,t){var r=new ne(t,false);vu(r,"__literal__",e);return r}return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e instanceof ne){if(e.is_gensym()){return e}e=e.valueOf()}if(Rn(e)){return ne(e,false)}if(e!==null){return r(e,Symbol("#:".concat(e)))}t++;return r(t,Symbol("#:g".concat(t)))}}();function Un(e,t){var r=se.get("begin");var n=qn("begin");e.forEach(function(e){e.set(n,r)});return new ae(n,t)}function zn(e){var r=this;var n={pending:true,rejected:false,fulfilled:false,reason:undefined,type:undefined};e=e.then(function(e){n.type=Uo(e);n.fulfilled=true;n.pending=false;return e});c(this,"_promise",e,{hidden:true});if(d(e["catch"])){e=e["catch"](function(e){n.rejected=true;n.pending=false;n.reason=e})}Object.keys(n).forEach(function(t){Object.defineProperty(r,"__".concat(t,"__"),{enumerable:true,get:function e(){return n[t]}})});c(this,"__promise__",e);this.then=false}zn.prototype.then=function(e){return new zn(this.valueOf().then(e))};zn.prototype["catch"]=function(e){return new zn(this.valueOf()["catch"](e))};zn.prototype.valueOf=function(){if(!this._promise){throw new Error("QuotedPromise: invalid promise created")}return this._promise};zn.prototype.toString=function(){if(this.__pending__){return zn.pending_str}if(this.__rejected__){return zn.rejected_str}return"#<js-promise resolved (".concat(this.__type__,")>")};zn.pending_str="#<js-promise (pending)>";zn.rejected_str="#<js-promise (rejected)>";function $n(e){if(Array.isArray(e)){return Promise.all(Vn(e)).then(Yn)}return e}function Vn(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof zn){t[r]=new lo(n)}else{t[r]=n}}return t}function Yn(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof lo){t[r]=n.valueOf()}else{t[r]=n}}return t}var Jn={LITERAL:Symbol["for"]("literal"),SPLICE:Symbol["for"]("splice"),SYMBOL:Symbol["for"]("symbol"),names:function e(){return Object.keys(this.__list__)},type:function e(t){try{return this.get(t).type}catch(e){console.log({name:t});console.log(e);return null}},get:function e(t){return this.__list__[t]},off:function e(t){var r=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(Array.isArray(t)){t.forEach(function(e){return r.off(e,n)})}else if(n===null){delete this.__events__[t]}else{this.__events__=this.__events__.filter(function(e){return e!==n})}},on:function e(t,r){var n=this;if(Array.isArray(t)){t.forEach(function(e){return n.on(e,r)})}else if(!this.__events__[t]){this.__events__[t]=[r]}else{this.__events__[t].push(r)}},trigger:function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}if(this.__events__[t]){this.__events__[t].forEach(function(e){return e.apply(void 0,n)})}},remove:function e(t){delete this.__list__[t];this.trigger("remove")},append:function e(t,r,n){this.__list__[t]={seq:t,symbol:r,type:n};this.trigger("append")},__events__:{},__list__:{}};function Kn(e){return Jn.names().includes(e)}function Wn(e){return Jn.__builtins__.includes(e)}function Hn(e){return Jn.type(e)===Jn.LITERAL}function Gn(e){return Jn.type(e)===Jn.SYMBOL}var Qn=[["'",new ne("quote"),Jn.LITERAL],["`",new ne("quasiquote"),Jn.LITERAL],[",@",new ne("unquote-splicing"),Jn.LITERAL],[",",new ne("unquote"),Jn.LITERAL],["'>",new ne("quote-promise"),Jn.LITERAL]];var Zn=Qn.map(function(e){return e[0]});Object.freeze(Zn);Object.defineProperty(Jn,"__builtins__",{writable:false,enumerable:true,value:Zn});Qn.forEach(function(e){var t=w(e,3),r=t[0],n=t[1],i=t[2];Jn.append(r,n,i)});var o=function(){function y(e){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.whitespace,i=n===void 0?false:n;Y(this,y);c(this,"__input__",e);var a={};["_i","_whitespace","_col","_newline","_line","_state","_next","_token","_prev_char"].forEach(function(r){Object.defineProperty(t,r,{configurable:false,enumerable:false,get:function e(){return a[r]},set:function e(t){a[r]=t}})});this._whitespace=i;this._i=this._line=this._col=this._newline=0;this._state=this._next=this._token=null;this._prev_char=""}return H(y,[{key:"get",value:function e(t){return this.__internal[t]}},{key:"set",value:function e(t,r){this.__internal[t]=r}},{key:"token",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(t){var r=this._line;if(this._whitespace&&this._token==="\n"){--r}return{token:this._token,col:this._col,offset:this._i,line:r}}return this._token}},{key:"peek",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this._i>=this.__input__.length){return uo}if(this._token){c(this,"__token__",this.token(true));return this.token(t)}var r=this.next_token();if(r){this._token=this.__input__.substring(this._i,this._next);if(!this.__token__){c(this,"__token__",this.token(true))}return this.token(t)}return uo}},{key:"skip",value:function e(){if(this._next!==null){this._token=null;this._i=this._next}}},{key:"read_line",value:function e(){var t=this.__input__.length;if(this._i>=t){return uo}for(var r=this._i;r<t;++r){var n=this.__input__[r];if(n==="\n"){var i=this.__input__.substring(this._i,r);this._i=r+1;++this._line;return i}}return this.read_rest()}},{key:"read_rest",value:function e(){var t=this._i;this._i=this.__input__.length;return this.__input__.substring(t)}},{key:"read_string",value:function e(t){var r=this.__input__.length;if(this._i>=r){return uo}if(t+this._i>=r){return this.read_rest()}var n=this._i+t;var i=this.__input__.substring(this._i,n);var a=i.match(/\n/g);if(a){this._line+=a.length}this._i=n;return i}},{key:"peek_char",value:function e(){if(this._i>=this.__input__.length){return uo}return _(this.__input__[this._i])}},{key:"read_char",value:function e(){var t=this.peek_char();this.skip_char();return t}},{key:"skip_char",value:function e(){if(this._i<this.__input__.length){++this._i;this._token=null}}},{key:"match_rule",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.prev_char,i=r["char"],a=r.next_char;var u=w(t,4),o=u[0],s=u[1],c=u[2],f=u[3];if(t.length!==5){throw new Error("Lexer: Invalid rule of length ".concat(t.length))}if(ka(o)){if(o!==i){return false}}else if(!i.match(o)){return false}if(!ri(s,n)){return false}if(!ri(c,a)){return false}if(f!==this._state){return false}return true}},{key:"next_token",value:function e(){if(this._i>=this.__input__.length){return false}var t=true;e:for(var r=this._i,n=this.__input__.length;r<n;++r){var i=this.__input__[r];var a=this.__input__[r-1]||"";var u=this.__input__[r+1]||"";if(i==="\n"){++this._line;var o=this._newline;if(this._state===null){this._newline=r+1}if(this._whitespace&&this._state===null){this._next=r+1;this._col=this._i-o;return true}}if(t&&this._state===null&&i.match(/\s/)){if(this._whitespace){if(!u.match(/\s/)){this._next=r+1;this._col=this._i-this._newline;return true}else{continue}}else{this._i=r+1;continue}}t=false;var s=Fr(y.rules),c;try{for(s.s();!(c=s.n()).done;){var f=c.value;if(this.match_rule(f,{prev_char:a,char:i,next_char:u})){var l=f[f.length-1];this._state=l;if(this._state===null){this._next=r+1;this._col=this._i-this._newline;return true}continue e}}}catch(e){s.e(e)}finally{s.f()}if(this._state!==null){continue e}var _=this.__input__.split("\n")[this._line];throw new Error("Invalid Syntax at line ".concat(this._line+1,"\n").concat(_))}if(![null,y.comment].includes(this._state)){var h,p;var d=(h=(p=this.__input__.substring(0,this._newline).match(/\n/g))===null||p===void 0?void 0:p.length)!==null&&h!==void 0?h:0;var v=this.__input__.substring(this._newline);if(this.__input__[this._i]==="#"){var m=this.__input__.substring(this._i).replace(/^([^\s()\[\]]+).*/,"$1");throw new Error("Invalid Syntax at line ".concat(d+1,": invalid token ").concat(m))}throw new ii("Invalid Syntax at line ".concat(d+1,": Unterminated expression ").concat(v))}}}])}();o.literal_rule=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(t.length===0){throw new Error("Lexer: invalid literal rule")}if(t.length===1){return[[t,n,i,null,null]]}var a=[];for(var u=0,o=t.length;u<o;++u){var s=[];s.push(t[u]);s.push(t[u-1]||n);s.push(t[u+1]||i);if(u===0){s.push(null);s.push(r)}else if(u===o-1){s.push(r);s.push(null)}else{s.push(r);s.push(r)}a.push(s)}return a};o.string=Symbol["for"]("string");o.string_escape=Symbol["for"]("string_escape");o.symbol=Symbol["for"]("symbol");o.comment=Symbol["for"]("comment");o.regex=Symbol["for"]("regex");o.regex_init=Symbol["for"]("regex_init");o.regex_class=Symbol["for"]("regex_class");o.character=Symbol["for"]("character");o.bracket=Symbol["for"]("bracket");o.b_symbol=Symbol["for"]("b_symbol");o.b_symbol_ex=Symbol["for"]("b_symbol_ex");o.b_comment=Symbol["for"]("b_comment");o.i_comment=Symbol["for"]("i_comment");o.l_datum=Symbol["for"]("l_datum");o.dot=Symbol["for"]("dot");o.boundary=/^$|[\s()[\]']/;o._rules=[[/"/,null,null,o.string,null],[/"/,null,null,null,o.string],[/"/,null,null,o.string_escape,o.string],[/\\/,null,null,o.string,o.string_escape],[/./,/\\/,null,o.string_escape,o.string],[/#/,null,/[bdxoei]/i,null,o.symbol],[/#/,null,/\\/,null,o.character],[/\\/,/#/,/\s/,o.character,o.character],[/\\/,/#/,/[()[\]]/,o.character,o.character],[/\s/,/\\/,null,o.character,null],[/\S/,null,o.boundary,o.character,null],[/#/,o.boundary,/\//,null,o.regex_init],[/./,/\//,null,o.regex_init,o.regex],[/[ \t]/,null,null,o.regex,o.regex],[/\[/,/[^\\]/,null,o.regex,o.regex_class],[/\]/,/[^\\]/,null,o.regex_class,o.regex],[/[()[\]]/,null,null,o.regex,o.regex],[/\//,/\\/,null,o.regex,o.regex],[/\//,null,o.boundary,o.regex,null],[/[gimyus]/,/\//,o.boundary,o.regex,null],[/[gimyus]/,/\//,/[gimyus]/,o.regex,o.regex],[/[gimyus]/,/[gimyus]/,o.boundary,o.regex,null],[/;/,/^$|[^#]/,null,null,o.comment],[/\n/,";",null,o.comment,null],[/[\s\S]/,null,/\n/,o.comment,null],[/\s/,null,null,o.comment,o.comment],[/#/,null,/\|/,null,o.b_comment],[/\s/,null,null,o.b_comment,o.b_comment],[/#/,/\|/,null,o.b_comment,null],[/#/,null,/;/,null,o.i_comment],[/;/,/#/,null,o.i_comment,null],[/#/,null,/[0-9]/,null,o.l_datum],[/=/,/[0-9]/,null,o.l_datum,null],[/#/,/[0-9]/,null,o.l_datum,null],[/\./,o.boundary,/,/,null,null],[/\|/,null,null,null,o.b_symbol],[/\s/,null,null,o.b_symbol,o.b_symbol],[/\|/,null,o.boundary,o.b_symbol,null],[/\|/,null,/\S/,o.b_symbol,o.b_symbol_ex],[/\S/,null,o.boundary,o.b_symbol_ex,null]];o._brackets=[[/[()[\]]/,null,null,null,null]];o._symbol_rules=[[/\S/,o.boundary,o.boundary,null,null],[/\S/,o.boundary,null,null,o.symbol],[/\S/,null,o.boundary,null,null],[/\S/,null,null,null,o.symbol],[/\S/,null,o.boundary,o.symbol,null]];o._cache={valid:false,rules:null};Jn.on(["remove","append"],function(){o._cache.valid=false;o._cache.rules=null});var Xn={"#null":null,"#void":undefined};var ei=["#!fold-case","#!no-fold-case"];var ti=["#t","#f"];Object.defineProperty(o,"rules",{get:function e(){if(o._cache.valid){return o._cache.rules}var t=Object.keys(Xn).concat(ei,ti);var r=Jn.names().concat(t).sort(function(e,t){return t.length-e.length||e.localeCompare(t)});var n=r.reduce(function(e,t){var r;var n=null;if(t[0]==="#"){if(t.length===1){r=Symbol["for"](t)}else{if(ti.includes(t)){n=o.boundary}r=Symbol["for"](t[1])}}else{r=Symbol["for"](t)}var i=o.literal_rule(t,r,null,n);return e.concat(i)},[]);o._cache.rules=o._rules.concat(o._brackets,n,o._symbol_rules);o._cache.valid=true;return o._cache.rules}});function ri(e,t){if(ka(e)){return e===t}return e===null||t.match(e)}var ni=function(){function u(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.env,r=e.meta,n=r===void 0?false:r,i=e.formatter,a=i===void 0?jn:i;Y(this,u);c(this,"_formatter",a,{hidden:true});c(this,"__env__",t);c(this,"_meta",n,{hidden:true});c(this,"_refs",[],{hidden:true});c(this,"_state",{parentheses:0,line:0,fold_case:false},{hidden:true})}return H(u,[{key:"prepare",value:function e(t){if(t instanceof x){t=t.toString()}this._reset_state();c(this,"__lexer__",new o(t))}},{key:"_with_syntax_scope",value:function e(t){var r=mo(this.__env__);var n=r.get("stdin");se.set("lips",te(te({},Ls),{},{__parser__:this}));r.set("stdin",new Zu(this,this.__env__));var i=function e(){se.set("lips",Ls);r.set("stdin",n)};return D(t(),function(e){i();return e},i)}},{key:"_reset_state",value:function e(){Object.assign(this._state,{parentheses:0,line:0})}},{key:"_resolve",value:function e(t){return this.__env__&&this.__env__.get(t,{throwError:false})}},{key:"_peek",value:function(){var e=V(O.mark(function e(){var r;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=this.__lexer__.peek(true);if(!(r===uo)){t.next=4;break}return t.abrupt("return",uo);case 4:if(!this._is_comment(r.token)){t.next=7;break}this.skip();return t.abrupt("continue",0);case 7:if(!Fa(r.token)){t.next=11;break}this.skip();if(r.token==="#!fold-case"){this._state.fold_case=true}else if(r.token==="#!no-fold-case"){this._state.fold_case=false}return t.abrupt("continue",0);case 11:if(!(r.token==="#;")){t.next=18;break}this.skip();if(!(this.__lexer__.peek()===uo)){t.next=15;break}throw new Error("Lexer: syntax error eof found after comment");case 15:t.next=17;return this._read_object();case 17:return t.abrupt("continue",0);case 18:return t.abrupt("break",21);case 21:r=this._formatter(r);if(this._state.fold_case){r.token=Mi(r.token)}return t.abrupt("return",r);case 24:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"peek",value:function(){var e=V(O.mark(function e(){var r;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=this._peek();if(!this._meta){t.next=3;break}return t.abrupt("return",r);case 3:return t.abrupt("return",r.token);case 4:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"_reset",value:function e(){this._refs.length=0}},{key:"skip",value:function e(){this.__lexer__.skip()}},{key:"_read",value:function(){var e=V(O.mark(function e(){var r;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return this._peek();case 2:r=t.sent;this.skip();return t.abrupt("return",r);case 5:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"read",value:function(){var e=V(O.mark(function e(){var r;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;this.skip();return t.abrupt("return",r);case 5:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"_match_datum_label",value:function e(t){var r=t.token.match(/^#([0-9]+)=$/);return r&&r[1]}},{key:"_match_datum_ref",value:function e(t){var r=t.token.match(/^#([0-9]+)#$/);return r&&r[1]}},{key:"_is_open",value:function e(t){return["(","["].includes(t.token)}},{key:"_is_close",value:function e(t){return[")","]"].includes(t.token)}},{key:"_read_list",value:function(){var e=V(O.mark(function e(){var r,n,i,a,u,o;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=ie,n=r;case 1:t.next=4;return this._peek();case 4:a=t.sent;if(!(a===uo)){t.next=7;break}return t.abrupt("break",31);case 7:if(!this._is_close(a)){t.next=11;break}--this._state.parentheses;this.skip();return t.abrupt("break",31);case 11:if(!(a.token==="."&&!ue(r))){t.next=19;break}this.skip();t.next=15;return this._read_object();case 15:n.cdr=t.sent;i=true;t.next=29;break;case 19:if(!i){t.next=23;break}throw new Error("Parser: syntax error more than one element after dot");case 23:t.next=25;return this._read_object();case 25:u=t.sent;o=new ae(u,ie);if(ue(r)){r=o}else{n.cdr=o}n=o;case 29:t.next=1;break;case 31:return t.abrupt("return",r);case 32:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"_read_value",value:function(){var e=V(O.mark(function e(){var r;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return this._read();case 2:r=t.sent;if(!(r===uo||r.token===uo)){t.next=5;break}throw new Error("Parser: Expected token eof found");case 5:return t.abrupt("return",En(r,this._meta));case 6:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"_is_comment",value:function e(t){return t.match(/^;/)||t.match(/^#\|/)&&t.match(/\|#$/)}},{key:"evaluate",value:function e(t){return A(t,{env:this.__env__,error:function e(t){throw t}})}},{key:"read_object",value:function(){var e=V(O.mark(function e(){var r;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:this._reset();t.next=3;return this._read_object();case 3:r=t.sent;if(r instanceof ai){r=r.valueOf()}if(!this._refs.length){t.next=7;break}return t.abrupt("return",D(this._resolve_object(r),function(e){if(oe(e)){e.mark_cycles()}return e}));case 7:return t.abrupt("return",r);case 8:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"balanced",value:function e(){return this._state.parentheses===0}},{key:"_ballancing_error",value:function e(t,r){var n=this._state.parentheses;var i;if(n<0){i=new Error("Parser: unexpected parenthesis");if(r){i.__code__=[r.toString()+")"]}else{i.__code__=[")"]}}else{i=new Error("Parser: expected parenthesis but eof found");var a=new RegExp("\\){".concat(n,"}$"));i.__code__=[t.toString().replace(a,"")]}this._agument_exception(i);throw i}},{key:"_agument_exception",value:function e(t){var r=this.__lexer__.__token__;if("col"in r){var n=r.col,i=r.offset,a=r.line;t.message+=" at line ".concat(a+1," and column ").concat(n+1);c(t,"__col__",n);c(t,"__offset__",i);c(t,"__line__",a)}}},{key:"_resolve_object",value:function(){var t=V(O.mark(function e(r){var n=this;var i;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!Array.isArray(r)){t.next=2;break}return t.abrupt("return",r.map(function(e){return n._resolve_object(e)}));case 2:if(!Vi(r)){t.next=6;break}i={};Object.keys(r).forEach(function(e){i[e]=n._resolve_object(r[e])});return t.abrupt("return",i);case 6:if(!oe(r)){t.next=8;break}return t.abrupt("return",this._resolve_pair(r));case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_resolve_pair",value:function(){var t=V(O.mark(function e(r){return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!oe(r)){t.next=15;break}if(!(r.car instanceof ai)){t.next=7;break}t.next=4;return r.car.valueOf();case 4:r.car=t.sent;t.next=8;break;case 7:this._resolve_pair(r.car);case 8:if(!(r.cdr instanceof ai)){t.next=14;break}t.next=11;return r.cdr.valueOf();case 11:r.cdr=t.sent;t.next=15;break;case 14:this._resolve_pair(r.cdr);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"get_line",value:function e(){return this._state.line}},{key:"_read_object",value:function(){var e=V(O.mark(function e(){var r=this;var n,i,a,u,o,s,c,f,l,_,h,p,d,v,m,y;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return this._peek();case 2:n=t.sent;if(!(n===uo)){t.next=5;break}return t.abrupt("return",n);case 5:this._state.line=this.__lexer__.__token__.line;if(!Kn(n.token)){t.next=58;break}i=Jn.get(n.token);a=Wn(n.token);this.skip();s=Gn(n.token);t.t0=this;t.next=14;return this._peek();case 14:t.t1=t.sent;c=t.t0._is_close.call(t.t0,t.t1);if(!s){t.next=20;break}t.t2=undefined;t.next=23;break;case 20:t.next=22;return this._read_object();case 22:t.t2=t.sent;case 23:f=t.t2;if(!(f===uo)){t.next=26;break}throw new ii("Expecting expression eof found");case 26:if(a){t.next=35;break}o=this.__env__.get(i.symbol);if(!(typeof o==="function")){t.next=35;break}if(Hn(n.token)){l=[f]}else if(ue(f)){l=[]}else if(oe(f)){l=f.to_array(false)}if(!(l||s)){t.next=32;break}return t.abrupt("return",this._with_syntax_scope(function(){return Ko(o,s?[]:l,{env:r.__env__,dynamic_env:r.__env__,use_dynamic:false})}));case 32:_=new Error("Parse Error: Invalid parser extension "+"invocation ".concat(i.symbol));this._agument_exception(_);throw _;case 35:if(!Hn(n.token)){t.next=43;break}if(!c){t.next=40;break}h=new Error("Parse Error: expecting datum");this._agument_exception(h);throw h;case 40:u=new ae(i.symbol,new ae(f,ie));t.next=44;break;case 43:u=new ae(i.symbol,f);case 44:if(!a){t.next=46;break}return t.abrupt("return",u);case 46:if(!(o instanceof q)){t.next=55;break}t.next=49;return this._with_syntax_scope(function(){return r.evaluate(u)});case 49:p=t.sent;if(!(oe(p)||p instanceof ne)){t.next=52;break}return t.abrupt("return",ae.fromArray([ne("quote"),p]));case 52:return t.abrupt("return",p);case 55:d=new Error("Parse Error: invalid parser extension: "+i.symbol);this._agument_exception(d);throw d;case 58:v=this._match_datum_ref(n);if(!(v!==null)){t.next=66;break}this.skip();if(!this._refs[v]){t.next=63;break}return t.abrupt("return",new ai(v,this._refs[v]));case 63:m=new Error("Parse Error: invalid datum label #".concat(v,"#"));this._agument_exception(m);throw m;case 66:y=this._match_datum_label(n);if(!(y!==null)){t.next=73;break}this.skip();this._refs[y]=this._read_object();return t.abrupt("return",this._refs[y]);case 73:if(!this._is_close(n)){t.next=78;break}--this._state.parentheses;this.skip();t.next=85;break;case 78:if(!this._is_open(n)){t.next=84;break}++this._state.parentheses;this.skip();return t.abrupt("return",this._read_list());case 84:return t.abrupt("return",this._read_value());case 85:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}])}();var ii=function(e){function t(){Y(this,t);return xr(this,t,arguments)}M(t,e);return H(t)}(z(Error));ni.Unterminated=ii;var ai=function(){function r(e,t){Y(this,r);this.name=e;this.data=t}return H(r,[{key:"valueOf",value:function e(){return this.data}}])}();function ui(e,t){return oi.apply(this,arguments)}function oi(){oi=he(O.mark(function e(r,n){var i,a,u;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!n){if(se){n=se.get("**interaction-environment**",{throwError:false})}else{n=xo}}if(r instanceof ni){i=r}else{i=new ni({env:n});i.prepare(r)}case 2:t.next=5;return _e(i.read_object());case 5:u=t.sent;if(!i.balanced()){i._ballancing_error(u,a)}if(!(u===uo)){t.next=9;break}return t.abrupt("break",14);case 9:a=u;t.next=12;return u;case 12:t.next=2;break;case 14:case"end":return t.stop()}},e)}));return oi.apply(this,arguments)}function D(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(e){return e};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(Ra(e)){var n=e.then(t);if(r===null){return n}else{return n["catch"](r)}}if(e instanceof Array){return si(e,t,r)}if(Vi(e)){return ci(e,t,r)}return t(e)}function si(t,r,e){if(t.find(Ra)){return D($n(t),function(e){if(Object.isFrozen(t)){Object.freeze(e)}return r(e)},e)}return r(t)}function ci(t,e,r){var i=Object.keys(t);var n=[],a=[];var u=i.length;while(u--){var o=i[u];var s=t[o];n[u]=s;if(Ra(s)){a.push(s)}}if(a.length){return D($n(n),function(e){var n={};e.forEach(function(e,t){var r=i[t];n[r]=e});if(Object.isFrozen(t)){Object.freeze(n)}return n},r)}return e(t)}function c(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},i=n.hidden,a=i===void 0?false:i;Object.defineProperty(e,t,{value:r,writable:false,configurable:true,enumerable:!a})}function fi(e){return li.apply(this,arguments)}function li(){li=V(O.mark(function e(r){var n,i,a,u,o,s,c;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=[];i=false;a=false;t.prev=3;o=Or(r);case 5:t.next=7;return o.next();case 7:if(!(i=!(s=t.sent).done)){t.next=13;break}c=s.value;n.push(c);case 10:i=false;t.next=5;break;case 13:t.next=19;break;case 15:t.prev=15;t.t0=t["catch"](3);a=true;u=t.t0;case 19:t.prev=19;t.prev=20;if(!(i&&o["return"]!=null)){t.next=24;break}t.next=24;return o["return"]();case 24:t.prev=24;if(!a){t.next=27;break}throw u;case 27:return t.finish(24);case 28:return t.finish(19);case 29:return t.abrupt("return",n);case 30:case"end":return t.stop()}},e,null,[[3,15,19,29],[20,,24,28]])}));return li.apply(this,arguments)}function _i(e,t){if(t instanceof RegExp){return function(e){return String(e).match(t)}}else if(d(t)){return t}else if(t instanceof I){return function(e){return I(e).cmp(t)===0}}else if(t instanceof x){var r=t.__string__;return function(e){return x.is(e,r)}}else if(t instanceof ne){var n=t.__name__;return function(e){return ne.is(e,n)}}else if(t instanceof _){var i=t.__char__;return function(e){return _.is(e,i)}}return function(e){return t===e}}function l(e,t,r,n){if(typeof e!=="string"){t=arguments[0];r=arguments[1];n=arguments[2];e=null}if(r){if(n){t.__doc__=r}else{t.__doc__=hi(r)}}if(e){t.__name__=e}else if(t.name&&!Ca(t)){t.__name__=t.name}return t}function hi(e){return e.split("\n").map(function(e){return e.trim()}).join("\n")}function pi(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=e.length;if(t<=0){throw Error("previousSexp: Invalid argument sexp = ".concat(t))}e:while(t--&&r>=0){var n=1;while(n>0){var i=e[--r];if(!i){break e}if(i==="("||i.token==="("){n--}else if(i===")"||i.token===")"){n++}}r--}return e.slice(r+1)}function di(e){if(!e||!e.length){return 0}var t=e.length;if(e[t-1].token==="\n"){return 0}while(--t){if(e[t].token==="\n"){var r=(e[t+1]||{}).token;if(r){return r.length}}}return 0}function vi(e,t){return f(e,t)===t.length;function f(r,n){function e(e,t){var r=Fr(e),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;var a=f(i,t);if(a!==-1){return a}}}catch(e){r.e(e)}finally{r.f()}return-1}function t(){return r[a]===Symbol["for"]("symbol")&&!An(n[o])}function i(){var e=r[a+1];var t=n[o+1];if(e!==undefined&&t!==undefined){return f([e],[t])}}var a=0;var u={};for(var o=0;o<n.length;++o){if(typeof r[a]==="undefined"){return o}if(r[a]instanceof gi){var s;if(["+","*"].includes(r[a].flag)){while(o<n.length){s=e(r[a].patterns,n.slice(o));if(s===-1){break}o+=s}o-=1;a++;continue}else if(r[a].flag==="?"){s=e(r[a].patterns,n.slice(o));if(s===-1){o-=2}else{a++}continue}}else if(r[a]instanceof RegExp){if(!n[o].match(r[a])){return-1}}else if(Ls.LString.isString(r[a])){if(r[a].valueOf()!==n[o]){return-1}}else if(h(r[a])==="symbol"){if(r[a]===Symbol["for"]("*")){u[a]=u[a]||0;if(["(","["].includes(n[o])){u[a]++}else if([")","]"].includes(n[o])){u[a]--}if(typeof r[a+1]!=="undefined"&&u[a]===0&&i()===-1||u[a]>0){continue}}else if(t()){return-1}}else if(r[a]instanceof Array){var c=f(r[a],n.slice(o));if(c===-1||c+o>n.length){return-1}o+=c-1;a++;continue}else{return-1}a++}if(r.length!==a){return-1}return n.length}}function mi(e){this.__code__=e.replace(/\r/g,"")}mi.defaults={offset:0,indent:2,exceptions:{specials:[/^(?:#:)?(?:define(?:-values|-syntax|-macro|-class|-record-type)?|(?:call-with-(?:input-file|output-file|port))|lambda|let-env|try|catch|when|unless|while|syntax-rules|(let|letrec)(-syntax|\*?-values|\*)?)$/],shift:{1:["&","#"]}}};mi.match=vi;mi.prototype._options=function e(t){var r=mi.defaults;if(typeof t==="undefined"){return Object.assign({},r)}var n=t&&t.exceptions||{};var i=n.specials||[];var a=n.shift||{1:[]};return te(te(te({},r),t),{},{exceptions:{specials:[].concat(ee(r.exceptions.specials),ee(i)),shift:te(te({},a),{},{1:[].concat(ee(r.exceptions.shift[1]),ee(a[1]))})}})};mi.prototype.indent=function e(t){var r=Nn(this.__code__,true);return this._indent(r,t)};mi.exception_shift=function(a,e){function t(e){if(!e.length){return false}if(e.indexOf(a)!==-1){return true}else{var t=e.filter(function(e){return e instanceof RegExp});if(!t.length){return false}var r=Fr(t),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;if(a.match(i)){return true}}}catch(e){r.e(e)}finally{r.f()}}return false}if(t(e.exceptions.specials)){return e.indent}var r=e.exceptions.shift;for(var n=0,i=Object.entries(r);n<i.length;n++){var u=w(i[n],2),o=u[0],s=u[1];if(t(s)){return+o}}return-1};mi.prototype._indent=function e(t,r){var n=this._options(r);var i=di(t);var a=pi(t);var u=t[t.length-a.length-1];var o=t[t.length-1];if(o.token.match(/^"[\S\s]+[^"]$/)){return i+n.indent}if(a&&a.length){if(a[0].line>0){n.offset=0}if(a.toString()===t.toString()&&is(a)){return n.offset+a[0].col}else if(a.length===1){return n.offset+a[0].col+1}else{var s=-1;if(u){var c=mi.exception_shift(u.token,n);if(c!==-1){s=c}}if(s===-1){s=mi.exception_shift(a[1].token,n)}if(s!==-1){return n.offset+a[0].col+s}else if(a[0].line<a[1].line){return n.offset+a[0].col+1}else if(a.length>3&&a[1].line===a[3].line){if(a[1].token==="("||a[1].token==="["){return n.offset+a[1].col}return n.offset+a[3].col}else if(a[0].line===a[1].line){return n.offset+n.indent+a[0].col}else{var f=a.slice(2);for(var l=0;l<f.length;++l){var _=f[l];if(_.token.trim()){return _.col}}}}}else{return 0}return i+n.indent};function yi(e){this.pattern=e}yi.prototype.toString=function(){return"#<pattern(".concat(this.pattern,")>")};yi.prototype.match=function(e){return e.match(this.pattern)};function gi(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=t.pop();this.patterns=t;this.flag=n}gi.prototype.toString=function(){var e=this.patterns.map(function(e){return na(e)}).join("|");return"#<pattern(".concat(e," ").concat(this.flag,")>")};mi.Pattern=gi;mi.Ahead=yi;var bi=/^[[(]$/;var wi=/^[\])]$/;var Di=/[^()[\]]/;var xi=new yi(/[^)\]]/);var Ei=Symbol["for"]("*");var Fi=new gi([bi,Ei,wi],[Di],"+");var Ai=new gi([bi,Ei,wi],"+");var ki=new gi([Symbol["for"]("symbol")],"?");var Ci=new gi([Symbol["for"]("symbol")],"*");var Oi=[bi,Ci,wi];var Si=new gi([bi,Symbol["for"]("symbol"),Ei,wi],"+");var ji=Ti("syntax-rules");var Bi=Ti("define","lambda","define-macro","syntax-rules");var Ii=/^(?!.*\b(?:[()[\]]|define(?:-macro)?|let(?:\*|rec|-env|-syntax|)?|lambda|syntax-rules)\b).*$/;var Pi=/^(?:#:)?(let(?:\*|rec|-env|-syntax)?)$/;var Ni=/^;.*/;function Ti(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return new RegExp("^(?:#:)?(?:".concat(t.join("|"),")$"))}mi.rules=[[[Ai],0,xi],[[bi,Ti("begin","cond-expand")],1,xi],[[bi,Pi,ki,bi,Si,wi],1,xi],[[bi,Pi,ki,Fi],1,xi],[[bi,Pi,bi,Si],1,xi],[[bi,Ti("define-syntax"),/.+/],1],[[bi,ji,Di,Oi],1],[[bi,ji,Di,Oi,Ai],1,xi],[[bi,ji,Oi],1],[Ni,-1],[[bi,ji,Oi,Ai],1,xi],[[bi,Ii,new gi([/[^()[\]]/],"+"),Ai],1,xi],[[bi,Ai],1,xi],[[bi,Di,Ai],1,xi],[[bi,Ti("lambda","if"),Di],1,xi],[[bi,Ti("while"),Di,Ai],1,xi],[[bi,Ti("if"),Di,Ei],1,xi],[[bi,Bi,Oi],0,xi],[[bi,Bi,Oi,kn],0,xi],[[bi,Bi,Oi,kn,Ai],0,xi],[[bi,Bi,Oi,Ai],0,xi]];mi.prototype["break"]=function(){var e=this.__code__.replace(/\n[ \t]*/g,"\n ").trim();var t=function e(t){if(t.token.match(kn)||t.token.match(Vr)){return t.token}else{return t.token.replace(/\s+/," ")}};var r=function e(t){for(var r=t.length;r--;){var n=t[r];if(n.trim()&&!Kn(n)){return t.length-r-1}}};var n=Nn(e,true).map(t).filter(function(e){return e!=="\n"});var i=mi.rules;e:for(var a=1;a<n.length;++a){if(!n[a].trim()){continue}var u=n.slice(0,a);var o={};i.map(function(e){return e[1]}).forEach(function(e){e=e.valueOf();if(e>0&&!o[e]){o[e]=pi(u,e)}});var s=Fr(i),c;try{for(s.s();!(c=s.n()).done;){var f=w(c.value,3),l=f[0],_=f[1],h=f[2];var p=l===Ni;_=_.valueOf();var d=_>0?o[_]:u;var v=d.filter(function(e){return e.trim()&&!Kn(e)});if(!v.length){continue}if(_===-1){l=[l];v=v.slice(-1)}var m=r(d);var y=vi(l,v);var g=n.slice(a).find(function(e){return e.trim()&&!Kn(e)});if(y&&(h instanceof yi&&h.match(g)||!h)){var b=a-m;if(n[b]!=="\n"){if(!n[b].trim()){n[b]="\n"}else{n.splice(b,0,"\n");a++}}a+=m;continue e}}}catch(e){s.e(e)}finally{s.f()}}this.__code__=n.join("");return this};mi.prototype._spaces=function(e){return" ".repeat(e)};mi.prototype.format=function e(t){var r=this.__code__.trim().replace(/[ \t]*\n[ \t]*/g,"\n ");var n=Nn(r,true);var i=this._options(t);var a=0;var u=0;for(var o=0;o<n.length;++o){var s=n[o];if(s.token==="\n"){a=this._indent(n.slice(0,o),i);u+=a;if(n[o+1]){n[o+1].token=this._spaces(a);a--;u--;for(var c=o+2;c<n.length;++c){n[c].offset+=u;n[c].col+=a;if(n[c].token==="\n"){o=c-1;break}}}}}return n.map(function(e){if(e.token.match(kn)){if(e.token.match(/\n/)){var t=" ".repeat(e.col);var r=e.token.split("\n");e.token=[r[0]].concat(r.slice(1).map(function(e){return t+e})).join("\n")}}return e.token}).join("")};var Li={65:97,66:98,67:99,68:100,69:101,70:102,71:103,72:104,73:105,74:106,75:107,76:108,77:109,78:110,79:111,80:112,81:113,82:114,83:115,84:116,85:117,86:118,87:119,88:120,89:121,90:122,181:956,192:224,193:225,194:226,195:227,196:228,197:229,198:230,199:231,200:232,201:233,202:234,203:235,204:236,205:237,206:238,207:239,208:240,209:241,210:242,211:243,212:244,213:245,214:246,216:248,217:249,218:250,219:251,220:252,221:253,222:254,256:257,258:259,260:261,262:263,264:265,266:267,268:269,270:271,272:273,274:275,276:277,278:279,280:281,282:283,284:285,286:287,288:289,290:291,292:293,294:295,296:297,298:299,300:301,302:303,306:307,308:309,310:311,313:314,315:316,317:318,319:320,321:322,323:324,325:326,327:328,330:331,332:333,334:335,336:337,338:339,340:341,342:343,344:345,346:347,348:349,350:351,352:353,354:355,356:357,358:359,360:361,362:363,364:365,366:367,368:369,370:371,372:373,374:375,376:255,377:378,379:380,381:382,383:115,385:595,386:387,388:389,390:596,391:392,393:598,394:599,395:396,398:477,399:601,400:603,401:402,403:608,404:611,406:617,407:616,408:409,412:623,413:626,415:629,416:417,418:419,420:421,422:640,423:424,425:643,428:429,430:648,431:432,433:650,434:651,435:436,437:438,439:658,440:441,444:445,452:454,453:454,455:457,456:457,458:460,459:460,461:462,463:464,465:466,467:468,469:470,471:472,473:474,475:476,478:479,480:481,482:483,484:485,486:487,488:489,490:491,492:493,494:495,497:499,498:499,500:501,502:405,503:447,504:505,506:507,508:509,510:511,512:513,514:515,516:517,518:519,520:521,522:523,524:525,526:527,528:529,530:531,532:533,534:535,536:537,538:539,540:541,542:543,544:414,546:547,548:549,550:551,552:553,554:555,556:557,558:559,560:561,562:563,570:11365,571:572,573:410,574:11366,577:578,579:384,580:649,581:652,582:583,584:585,586:587,588:589,590:591,837:953,880:881,882:883,886:887,895:1011,902:940,904:941,905:942,906:943,908:972,910:973,911:974,913:945,914:946,915:947,916:948,917:949,918:950,919:951,920:952,921:953,922:954,923:955,924:956,925:957,926:958,927:959,928:960,929:961,931:963,932:964,933:965,934:966,935:967,936:968,937:969,938:970,939:971,962:963,975:983,976:946,977:952,981:966,982:960,984:985,986:987,988:989,990:991,992:993,994:995,996:997,998:999,1e3:1001,1002:1003,1004:1005,1006:1007,1008:954,1009:961,1012:952,1013:949,1015:1016,1017:1010,1018:1019,1021:891,1022:892,1023:893,1024:1104,1025:1105,1026:1106,1027:1107,1028:1108,1029:1109,1030:1110,1031:1111,1032:1112,1033:1113,1034:1114,1035:1115,1036:1116,1037:1117,1038:1118,1039:1119,1040:1072,1041:1073,1042:1074,1043:1075,1044:1076,1045:1077,1046:1078,1047:1079,1048:1080,1049:1081,1050:1082,1051:1083,1052:1084,1053:1085,1054:1086,1055:1087,1056:1088,1057:1089,1058:1090,1059:1091,1060:1092,1061:1093,1062:1094,1063:1095,1064:1096,1065:1097,1066:1098,1067:1099,1068:1100,1069:1101,1070:1102,1071:1103,1120:1121,1122:1123,1124:1125,1126:1127,1128:1129,1130:1131,1132:1133,1134:1135,1136:1137,1138:1139,1140:1141,1142:1143,1144:1145,1146:1147,1148:1149,1150:1151,1152:1153,1162:1163,1164:1165,1166:1167,1168:1169,1170:1171,1172:1173,1174:1175,1176:1177,1178:1179,1180:1181,1182:1183,1184:1185,1186:1187,1188:1189,1190:1191,1192:1193,1194:1195,1196:1197,1198:1199,1200:1201,1202:1203,1204:1205,1206:1207,1208:1209,1210:1211,1212:1213,1214:1215,1216:1231,1217:1218,1219:1220,1221:1222,1223:1224,1225:1226,1227:1228,1229:1230,1232:1233,1234:1235,1236:1237,1238:1239,1240:1241,1242:1243,1244:1245,1246:1247,1248:1249,1250:1251,1252:1253,1254:1255,1256:1257,1258:1259,1260:1261,1262:1263,1264:1265,1266:1267,1268:1269,1270:1271,1272:1273,1274:1275,1276:1277,1278:1279,1280:1281,1282:1283,1284:1285,1286:1287,1288:1289,1290:1291,1292:1293,1294:1295,1296:1297,1298:1299,1300:1301,1302:1303,1304:1305,1306:1307,1308:1309,1310:1311,1312:1313,1314:1315,1316:1317,1318:1319,1320:1321,1322:1323,1324:1325,1326:1327,1329:1377,1330:1378,1331:1379,1332:1380,1333:1381,1334:1382,1335:1383,1336:1384,1337:1385,1338:1386,1339:1387,1340:1388,1341:1389,1342:1390,1343:1391,1344:1392,1345:1393,1346:1394,1347:1395,1348:1396,1349:1397,1350:1398,1351:1399,1352:1400,1353:1401,1354:1402,1355:1403,1356:1404,1357:1405,1358:1406,1359:1407,1360:1408,1361:1409,1362:1410,1363:1411,1364:1412,1365:1413,1366:1414,4256:11520,4257:11521,4258:11522,4259:11523,4260:11524,4261:11525,4262:11526,4263:11527,4264:11528,4265:11529,4266:11530,4267:11531,4268:11532,4269:11533,4270:11534,4271:11535,4272:11536,4273:11537,4274:11538,4275:11539,4276:11540,4277:11541,4278:11542,4279:11543,4280:11544,4281:11545,4282:11546,4283:11547,4284:11548,4285:11549,4286:11550,4287:11551,4288:11552,4289:11553,4290:11554,4291:11555,4292:11556,4293:11557,4295:11559,4301:11565,5112:5104,5113:5105,5114:5106,5115:5107,5116:5108,5117:5109,7296:1074,7297:1076,7298:1086,7299:1089,7300:1090,7301:1090,7302:1098,7303:1123,7304:42571,7312:4304,7313:4305,7314:4306,7315:4307,7316:4308,7317:4309,7318:4310,7319:4311,7320:4312,7321:4313,7322:4314,7323:4315,7324:4316,7325:4317,7326:4318,7327:4319,7328:4320,7329:4321,7330:4322,7331:4323,7332:4324,7333:4325,7334:4326,7335:4327,7336:4328,7337:4329,7338:4330,7339:4331,7340:4332,7341:4333,7342:4334,7343:4335,7344:4336,7345:4337,7346:4338,7347:4339,7348:4340,7349:4341,7350:4342,7351:4343,7352:4344,7353:4345,7354:4346,7357:4349,7358:4350,7359:4351,7680:7681,7682:7683,7684:7685,7686:7687,7688:7689,7690:7691,7692:7693,7694:7695,7696:7697,7698:7699,7700:7701,7702:7703,7704:7705,7706:7707,7708:7709,7710:7711,7712:7713,7714:7715,7716:7717,7718:7719,7720:7721,7722:7723,7724:7725,7726:7727,7728:7729,7730:7731,7732:7733,7734:7735,7736:7737,7738:7739,7740:7741,7742:7743,7744:7745,7746:7747,7748:7749,7750:7751,7752:7753,7754:7755,7756:7757,7758:7759,7760:7761,7762:7763,7764:7765,7766:7767,7768:7769,7770:7771,7772:7773,7774:7775,7776:7777,7778:7779,7780:7781,7782:7783,7784:7785,7786:7787,7788:7789,7790:7791,7792:7793,7794:7795,7796:7797,7798:7799,7800:7801,7802:7803,7804:7805,7806:7807,7808:7809,7810:7811,7812:7813,7814:7815,7816:7817,7818:7819,7820:7821,7822:7823,7824:7825,7826:7827,7828:7829,7835:7777,7840:7841,7842:7843,7844:7845,7846:7847,7848:7849,7850:7851,7852:7853,7854:7855,7856:7857,7858:7859,7860:7861,7862:7863,7864:7865,7866:7867,7868:7869,7870:7871,7872:7873,7874:7875,7876:7877,7878:7879,7880:7881,7882:7883,7884:7885,7886:7887,7888:7889,7890:7891,7892:7893,7894:7895,7896:7897,7898:7899,7900:7901,7902:7903,7904:7905,7906:7907,7908:7909,7910:7911,7912:7913,7914:7915,7916:7917,7918:7919,7920:7921,7922:7923,7924:7925,7926:7927,7928:7929,7930:7931,7932:7933,7934:7935,7944:7936,7945:7937,7946:7938,7947:7939,7948:7940,7949:7941,7950:7942,7951:7943,7960:7952,7961:7953,7962:7954,7963:7955,7964:7956,7965:7957,7976:7968,7977:7969,7978:7970,7979:7971,7980:7972,7981:7973,7982:7974,7983:7975,7992:7984,7993:7985,7994:7986,7995:7987,7996:7988,7997:7989,7998:7990,7999:7991,8008:8e3,8009:8001,8010:8002,8011:8003,8012:8004,8013:8005,8025:8017,8027:8019,8029:8021,8031:8023,8040:8032,8041:8033,8042:8034,8043:8035,8044:8036,8045:8037,8046:8038,8047:8039,8120:8112,8121:8113,8122:8048,8123:8049,8126:953,8136:8050,8137:8051,8138:8052,8139:8053,8152:8144,8153:8145,8154:8054,8155:8055,8168:8160,8169:8161,8170:8058,8171:8059,8172:8165,8184:8056,8185:8057,8186:8060,8187:8061,8486:969,8490:107,8491:229,8498:8526,8544:8560,8545:8561,8546:8562,8547:8563,8548:8564,8549:8565,8550:8566,8551:8567,8552:8568,8553:8569,8554:8570,8555:8571,8556:8572,8557:8573,8558:8574,8559:8575,8579:8580,9398:9424,9399:9425,9400:9426,9401:9427,9402:9428,9403:9429,9404:9430,9405:9431,9406:9432,9407:9433,9408:9434,9409:9435,9410:9436,9411:9437,9412:9438,9413:9439,9414:9440,9415:9441,9416:9442,9417:9443,9418:9444,9419:9445,9420:9446,9421:9447,9422:9448,9423:9449,11264:11312,11265:11313,11266:11314,11267:11315,11268:11316,11269:11317,11270:11318,11271:11319,11272:11320,11273:11321,11274:11322,11275:11323,11276:11324,11277:11325,11278:11326,11279:11327,11280:11328,11281:11329,11282:11330,11283:11331,11284:11332,11285:11333,11286:11334,11287:11335,11288:11336,11289:11337,11290:11338,11291:11339,11292:11340,11293:11341,11294:11342,11295:11343,11296:11344,11297:11345,11298:11346,11299:11347,11300:11348,11301:11349,11302:11350,11303:11351,11304:11352,11305:11353,11306:11354,11307:11355,11308:11356,11309:11357,11310:11358,11311:11359,11360:11361,11362:619,11363:7549,11364:637,11367:11368,11369:11370,11371:11372,11373:593,11374:625,11375:592,11376:594,11378:11379,11381:11382,11390:575,11391:576,11392:11393,11394:11395,11396:11397,11398:11399,11400:11401,11402:11403,11404:11405,11406:11407,11408:11409,11410:11411,11412:11413,11414:11415,11416:11417,11418:11419,11420:11421,11422:11423,11424:11425,11426:11427,11428:11429,11430:11431,11432:11433,11434:11435,11436:11437,11438:11439,11440:11441,11442:11443,11444:11445,11446:11447,11448:11449,11450:11451,11452:11453,11454:11455,11456:11457,11458:11459,11460:11461,11462:11463,11464:11465,11466:11467,11468:11469,11470:11471,11472:11473,11474:11475,11476:11477,11478:11479,11480:11481,11482:11483,11484:11485,11486:11487,11488:11489,11490:11491,11499:11500,11501:11502,11506:11507,42560:42561,42562:42563,42564:42565,42566:42567,42568:42569,42570:42571,42572:42573,42574:42575,42576:42577,42578:42579,42580:42581,42582:42583,42584:42585,42586:42587,42588:42589,42590:42591,42592:42593,42594:42595,42596:42597,42598:42599,42600:42601,42602:42603,42604:42605,42624:42625,42626:42627,42628:42629,42630:42631,42632:42633,42634:42635,42636:42637,42638:42639,42640:42641,42642:42643,42644:42645,42646:42647,42648:42649,42650:42651,42786:42787,42788:42789,42790:42791,42792:42793,42794:42795,42796:42797,42798:42799,42802:42803,42804:42805,42806:42807,42808:42809,42810:42811,42812:42813,42814:42815,42816:42817,42818:42819,42820:42821,42822:42823,42824:42825,42826:42827,42828:42829,42830:42831,42832:42833,42834:42835,42836:42837,42838:42839,42840:42841,42842:42843,42844:42845,42846:42847,42848:42849,42850:42851,42852:42853,42854:42855,42856:42857,42858:42859,42860:42861,42862:42863,42873:42874,42875:42876,42877:7545,42878:42879,42880:42881,42882:42883,42884:42885,42886:42887,42891:42892,42893:613,42896:42897,42898:42899,42902:42903,42904:42905,42906:42907,42908:42909,42910:42911,42912:42913,42914:42915,42916:42917,42918:42919,42920:42921,42922:614,42923:604,42924:609,42925:620,42926:618,42928:670,42929:647,42930:669,42931:43859,42932:42933,42934:42935,42936:42937,42938:42939,42940:42941,42942:42943,42944:42945,42946:42947,42948:42900,42949:642,42950:7566,42951:42952,42953:42954,42960:42961,42966:42967,42968:42969,42997:42998,43888:5024,43889:5025,43890:5026,43891:5027,43892:5028,43893:5029,43894:5030,43895:5031,43896:5032,43897:5033,43898:5034,43899:5035,43900:5036,43901:5037,43902:5038,43903:5039,43904:5040,43905:5041,43906:5042,43907:5043,43908:5044,43909:5045,43910:5046,43911:5047,43912:5048,43913:5049,43914:5050,43915:5051,43916:5052,43917:5053,43918:5054,43919:5055,43920:5056,43921:5057,43922:5058,43923:5059,43924:5060,43925:5061,43926:5062,43927:5063,43928:5064,43929:5065,43930:5066,43931:5067,43932:5068,43933:5069,43934:5070,43935:5071,43936:5072,43937:5073,43938:5074,43939:5075,43940:5076,43941:5077,43942:5078,43943:5079,43944:5080,43945:5081,43946:5082,43947:5083,43948:5084,43949:5085,43950:5086,43951:5087,43952:5088,43953:5089,43954:5090,43955:5091,43956:5092,43957:5093,43958:5094,43959:5095,43960:5096,43961:5097,43962:5098,43963:5099,43964:5100,43965:5101,43966:5102,43967:5103,65313:65345,65314:65346,65315:65347,65316:65348,65317:65349,65318:65350,65319:65351,65320:65352,65321:65353,65322:65354,65323:65355,65324:65356,65325:65357,65326:65358,65327:65359,65328:65360,65329:65361,65330:65362,65331:65363,65332:65364,65333:65365,65334:65366,65335:65367,65336:65368,65337:65369,65338:65370,66560:66600,66561:66601,66562:66602,66563:66603,66564:66604,66565:66605,66566:66606,66567:66607,66568:66608,66569:66609,66570:66610,66571:66611,66572:66612,66573:66613,66574:66614,66575:66615,66576:66616,66577:66617,66578:66618,66579:66619,66580:66620,66581:66621,66582:66622,66583:66623,66584:66624,66585:66625,66586:66626,66587:66627,66588:66628,66589:66629,66590:66630,66591:66631,66592:66632,66593:66633,66594:66634,66595:66635,66596:66636,66597:66637,66598:66638,66599:66639,66736:66776,66737:66777,66738:66778,66739:66779,66740:66780,66741:66781,66742:66782,66743:66783,66744:66784,66745:66785,66746:66786,66747:66787,66748:66788,66749:66789,66750:66790,66751:66791,66752:66792,66753:66793,66754:66794,66755:66795,66756:66796,66757:66797,66758:66798,66759:66799,66760:66800,66761:66801,66762:66802,66763:66803,66764:66804,66765:66805,66766:66806,66767:66807,66768:66808,66769:66809,66770:66810,66771:66811,66928:66967,66929:66968,66930:66969,66931:66970,66932:66971,66933:66972,66934:66973,66935:66974,66936:66975,66937:66976,66938:66977,66940:66979,66941:66980,66942:66981,66943:66982,66944:66983,66945:66984,66946:66985,66947:66986,66948:66987,66949:66988,66950:66989,66951:66990,66952:66991,66953:66992,66954:66993,66956:66995,66957:66996,66958:66997,66959:66998,66960:66999,66961:67e3,66962:67001,66964:67003,66965:67004,68736:68800,68737:68801,68738:68802,68739:68803,68740:68804,68741:68805,68742:68806,68743:68807,68744:68808,68745:68809,68746:68810,68747:68811,68748:68812,68749:68813,68750:68814,68751:68815,68752:68816,68753:68817,68754:68818,68755:68819,68756:68820,68757:68821,68758:68822,68759:68823,68760:68824,68761:68825,68762:68826,68763:68827,68764:68828,68765:68829,68766:68830,68767:68831,68768:68832,68769:68833,68770:68834,68771:68835,68772:68836,68773:68837,68774:68838,68775:68839,68776:68840,68777:68841,68778:68842,68779:68843,68780:68844,68781:68845,68782:68846,68783:68847,68784:68848,68785:68849,68786:68850,71840:71872,71841:71873,71842:71874,71843:71875,71844:71876,71845:71877,71846:71878,71847:71879,71848:71880,71849:71881,71850:71882,71851:71883,71852:71884,71853:71885,71854:71886,71855:71887,71856:71888,71857:71889,71858:71890,71859:71891,71860:71892,71861:71893,71862:71894,71863:71895,71864:71896,71865:71897,71866:71898,71867:71899,71868:71900,71869:71901,71870:71902,71871:71903,93760:93792,93761:93793,93762:93794,93763:93795,93764:93796,93765:93797,93766:93798,93767:93799,93768:93800,93769:93801,93770:93802,93771:93803,93772:93804,93773:93805,93774:93806,93775:93807,93776:93808,93777:93809,93778:93810,93779:93811,93780:93812,93781:93813,93782:93814,93783:93815,93784:93816,93785:93817,93786:93818,93787:93819,93788:93820,93789:93821,93790:93822,93791:93823,125184:125218,125185:125219,125186:125220,125187:125221,125188:125222,125189:125223,125190:125224,125191:125225,125192:125226,125193:125227,125194:125228,125195:125229,125196:125230,125197:125231,125198:125232,125199:125233,125200:125234,125201:125235,125202:125236,125203:125237,125204:125238,125205:125239,125206:125240,125207:125241,125208:125242,125209:125243,125210:125244,125211:125245,125212:125246,125213:125247,125214:125248,125215:125249,125216:125250,125217:125251};function Mi(e){e=e.valueOf();return Array.from(e).map(function(e){var t=e.codePointAt(0);var r=Li[t];if(r){return String.fromCodePoint(r)}return e}).join("")}function Ri(e,t){var r=Object.prototype.toString;var n="[object Array]";var i=[];var a=e.slice();var u;if(!e.length){return i}u=a.pop();do{if(r.call(u)===n){a.push.apply(a,u)}else{i.push(u)}}while(a.length&&(u=a.pop())!==undefined);i.reverse();return i}function qi(e,t){var r=e.length,n;while(r>0){n=Math.floor(t()*r);r--;var i=[e[n],e[r]];e[r]=i[0];e[n]=i[1]}return e}function Ui(){}Ui.prototype.toString=function(){return"()"};Ui.prototype.valueOf=function(){return undefined};Ui.prototype.serialize=function(){return 0};Ui.prototype.to_object=function(){return{}};Ui.prototype.append=function(e){return new ae(e,ie)};Ui.prototype.to_array=function(){return[]};var ie=new Ui;function ae(e,t){if(typeof this!=="undefined"&&this.constructor!==ae||typeof this==="undefined"){return new ae(e,t)}this.car=e;this.cdr=t}function zi(a,u){return function e(t){F(a,t,["pair","nil"]);if(ue(t)){return[]}var r=[];var n=t;while(true){if(oe(n)){if(n.have_cycles("cdr")){break}var i=n.car;if(u&&oe(i)){i=this.get(a).call(this,i)}r.push(i);n=n.cdr}else if(ue(n)){break}else{throw new Error("".concat(a,": can't convert improper list"))}}return r}}ae.prototype.flatten=function(){return ae.fromArray(Ri(this.to_array()))};ae.prototype.length=function(){var e=0;var t=this;while(true){if(!t||ue(t)||!oe(t)||t.have_cycles("cdr")){break}e++;t=t.cdr}return e};ae.prototype.freeze=function(){var e=this;while(true){c(e,"car",e.car);if(oe(e.car)&&!e.have_cycles("car")){e.car.freeze()}c(e,"cdr",e.cdr);if(e.have_cycles("cdr")){break}e=e.cdr;if(!oe(e)){break}}};ae.match=function(e,t){if(e instanceof ne){return ne.is(e,t)}else if(oe(e)){return ae.match(e.car,t)||ae.match(e.cdr,t)}else if(Array.isArray(e)){return e.some(function(e){return ae.match(e,t)})}else if(Vi(e)){return Object.values(e).some(function(e){return ae.match(e,t)})}return false};ae.prototype.find=function(e){return ae.match(this,e)};ae.prototype.clone=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var n=new Map;function i(e){if(oe(e)){if(n.has(e)){return n.get(e)}var t=new ae;n.set(e,t);if(r){t.car=i(e.car)}else{t.car=e.car}t.cdr=i(e.cdr);t[su]=e[su];return t}return e}return i(this)};ae.prototype.last_pair=function(){var e=this;while(true){if(!oe(e.cdr)){return e}if(e.have_cycles("cdr")){break}e=e.cdr}};ae.prototype.to_array=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var t=[];if(oe(this.car)){if(e){t.push(this.car.to_array())}else{t.push(this.car)}}else{t.push(this.car.valueOf())}if(oe(this.cdr)){t=t.concat(this.cdr.to_array(e))}return t};ae.fromArray=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(oe(e)||r&&e instanceof Array&&e[uu]){return e}if(t===false){var n=ie;for(var i=e.length;i--;){n=new ae(e[i],n)}return n}if(e.length&&!(e instanceof Array)){e=ee(e)}var a=ie;var u=e.length;while(u--){var o=e[u];if(o instanceof Array){o=ae.fromArray(o,t,r)}else if(typeof o==="string"){o=x(o)}else if(typeof o==="number"&&!Number.isNaN(o)){o=I(o)}a=new ae(o,a)}return a};ae.prototype.to_object=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var t=this;var r={};while(true){if(oe(t)&&oe(t.car)){var n=t.car;var i=n.car;if(i instanceof ne){i=i.__name__}if(i instanceof x){i=i.valueOf()}var a=n.cdr;if(oe(a)){a=a.to_object(e)}if(Ya(a)){if(!e){a=a.valueOf()}}r[i]=a;t=t.cdr}else{break}}return r};ae.fromPairs=function(e){return e.reduce(function(e,t){return new ae(new ae(new ne(t[0]),t[1]),e)},ie)};ae.fromObject=function(t){var e=Object.keys(t).map(function(e){return[e,t[e]]});return ae.fromPairs(e)};ae.prototype.reduce=function(e){var t=this;var r=ie;while(true){if(!ue(t)){r=e(r,t.car);t=t.cdr}else{break}}return r};ae.prototype.reverse=function(){if(this.have_cycles()){throw new Error("You can't reverse list that have cycles")}var e=this;var t=ie;while(!ue(e)){var r=e.cdr;e.cdr=t;t=e;e=r}return t};ae.prototype.transform=function(n){function i(e){if(oe(e)){if(e.replace){delete e.replace;return e}var t=n(e.car);if(oe(t)){t=i(t)}var r=n(e.cdr);if(oe(r)){r=i(r)}return new ae(t,r)}return e}return i(this)};ae.prototype.map=function(e){if(typeof this.car!=="undefined"){return new ae(e(this.car),ue(this.cdr)?ie:this.cdr.map(e))}else{return ie}};var $i=new Map;function Vi(e){return e&&h(e)==="object"&&e.constructor===Object}var Yi=Object.getOwnPropertyNames(Array.prototype);var Ji=[];Yi.forEach(function(e){Ji.push(Array[e],Array.prototype[e])});function Ki(e){e=Qa(e);return Ji.includes(e)}function Wi(e){return d(e)&&(Ca(e)||e.__doc__)}function Hi(e){var r=e.constructor||Object;var n=Vi(e);var i=d(e[Symbol.asyncIterator])||d(e[Symbol.iterator]);var a;if($i.has(r)){a=$i.get(r)}else{$i.forEach(function(e,t){t=Qa(t);if(r===t&&(t===Object&&n&&!i||t!==Object)){a=e}})}return a}var Gi=new Map;[[true,"#t"],[false,"#f"],[null,"#null"],[undefined,"#void"]].forEach(function(e){var t=w(e,2),r=t[0],n=t[1];Gi.set(r,n)});function Qi(r){if(r&&h(r)==="object"){var n={};var e=Object.getOwnPropertySymbols(r);e.forEach(function(e){var t=e.toString().replace(/Symbol\(([^)]+)\)/,"$1");n[t]=na(r[e])});var t=Object.getOwnPropertyNames(r);t.forEach(function(e){var t=r[e];if(t&&h(t)==="object"&&t.constructor===Object){n[e]=Qi(t)}else{n[e]=na(t)}});return n}return r}function Zi(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function Xi(e,t){return e.hasOwnProperty(t)&&d(e.toString)}function ea(e){if(ja(e)){return"#<procedure(native)>"}var t=e.prototype&&e.prototype.constructor;if(d(t)&&Ca(t)){if(e[cu]&&t.hasOwnProperty("__name__")){var r=t.__name__;if(x.isString(r)){r=r.toString();return"#<class:".concat(r,">")}return"#<class>"}}if(e.hasOwnProperty("__name__")){var n=e.__name__;if(h(n)==="symbol"){n=Mn(n)}if(typeof n==="string"){return"#<procedure:".concat(n,">")}}if(Xi(e,"toString")){return e.toString()}else if(e.name&&!Ca(e)){return"#<procedure:".concat(e.name.trim(),">")}else{return"#<procedure>"}}var ta=new Map;[[Error,function(e){return e.message}],[ae,function(e,t){var r=t.quote,n=t.skip_cycles,i=t.pair_args;if(!n){e.mark_cycles()}return e.toString.apply(e,[r].concat(ee(i)))}],[_,function(e,t){var r=t.quote;if(r){return e.toString()}return e.valueOf()}],[x,function(e,t){var r=t.quote;e=e.toString();if(r){return JSON.stringify(e).replace(/\\n/g,"\n")}return e}],[RegExp,function(e){return"#"+e.toString()}]].forEach(function(e){var t=w(e,2),r=t[0],n=t[1];ta.set(r,n)});var ra=[ne,q,Ju,Ku,s,zn];function na(e,t,r){if(typeof jQuery!=="undefined"&&e instanceof jQuery.fn.init){return"#<jQuery("+e.length+")>"}if(Gi.has(e)){return Gi.get(e)}if(Ba(e)){return"#<prototype>"}if(e){var n=e.constructor;if(ta.has(n)){for(var i=arguments.length,a=new Array(i>3?i-3:0),u=3;u<i;u++){a[u-3]=arguments[u]}return ta.get(n)(e,{quote:t,skip_cycles:r,pair_args:a})}}var o=Fr(ra),s;try{for(o.s();!(s=o.n()).done;){var c=s.value;if(e instanceof c){return e.toString(t)}}}catch(e){o.e(e)}finally{o.f()}if(e instanceof I){return e.toString()}if([ie,uo].includes(e)){return e.toString()}if(e===jr){return"#<js:global>"}if(e===null){return"null"}if(d(e)){if(d(e.toString)&&e.hasOwnProperty("toString")){return e.toString().valueOf()}return ea(e)}if(h(e)==="object"){var f=e.constructor;if(!f){f=Object}var l;if(typeof f.__class__==="string"){l=f.__class__}else{var _=Hi(e);if(_){if(d(_)){return _(e,t)}else{throw new Error("toString: Invalid repr value")}}l=f.name}if(d(e.toString)&&e.hasOwnProperty("toString")){return e.toString().valueOf()}if(Uo(e)==="instance"){if(Ca(f)&&f.__name__){l=f.__name__.valueOf();if(h(l)==="symbol"){l=l.toString().replace(/^Symbol\((?:#:)?([^\)]+)\)$/,"$1")}}else if(!ja(f)){l="instance"}}if(za(e,Symbol.iterator)){if(l){return"#<iterator(".concat(l,")>")}return"#<iterator>"}if(za(e,Symbol.asyncIterator)){if(l){return"#<asyncIterator(".concat(l,")>")}return"#<asyncIterator>"}if(l!==""){return"#<"+l+">"}return"#<Object>"}if(typeof e!=="string"){return e.toString()}return e}ae.prototype.mark_cycles=function(){aa(this);return this};ae.prototype.have_cycles=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!e){return this.have_cycles("car")||this.have_cycles("cdr")}return!!(this[su]&&this[su][e])};ae.prototype.is_cycle=function(){return ia(this)};function ia(e){if(!oe(e)){return false}if(e.have_cycles()){return true}return ia(e.car,fn)||ia(e.cdr,fn)}function aa(e){var t=[];var i=[];var a=[];function u(e){if(!t.includes(e)){t.push(e)}}function o(e,t,r,n){if(oe(r)){if(n.includes(r)){if(!a.includes(r)){a.push(r)}if(!e[su]){e[su]={}}e[su][t]=r;if(!i.includes(e)){i.push(e)}return true}}}var s=In(function e(t,r){if(oe(t)){delete t[ou];delete t[su];u(t);r.push(t);var n=o(t,"car",t.car,r);var i=o(t,"cdr",t.cdr,r);if(!n){s(t.car,r.slice())}if(!i){return new Bn(function(){return e(t.cdr,r.slice())})}}});function r(e,t){if(oe(e[su][t])){var r=n.indexOf(e[su][t]);e[su][t]="#".concat(r,"#")}}s(e,[]);var n=t.filter(function(e){return a.includes(e)});n.forEach(function(e,t){e[ou]="#".concat(t,"=")});i.forEach(function(e){r(e,"car");r(e,"cdr")})}ae.prototype.toString=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.nested,n=r===void 0?false:r;var i=[];if(this[ou]){i.push(this[ou]+"(")}else if(!n){i.push("(")}var a;if(this[su]&&this[su].car){a=this[su].car}else{a=na(this.car,e,true)}if(a!==undefined){i.push(a)}if(oe(this.cdr)){if(this[su]&&this[su].cdr){i.push(" . ");i.push(this[su].cdr)}else{if(this.cdr[ou]){i.push(" . ")}else{i.push(" ")}var u=this.cdr.toString(e,{nested:true});i.push(u)}}else if(!ue(this.cdr)){i=i.concat([" . ",na(this.cdr,e,true)])}if(!n||this[ou]){i.push(")")}return i.join("")};ae.prototype.set=function(e,t){this[e]=t;if(oe(t)){this.mark_cycles()}};ae.prototype.append=function(e){if(e instanceof Array){return this.append(ae.fromArray(e))}var t=this;if(t.car===undefined){if(oe(e)){this.car=e.car;this.cdr=e.cdr}else{this.car=e}}else if(!ue(e)){while(true){if(oe(t)&&!ue(t.cdr)){t=t.cdr}else{break}}t.cdr=e}return this};ae.prototype.serialize=function(){return[this.car,this.cdr]};ae.prototype[Symbol.iterator]=function(){var r=this;return{next:function e(){var t=r;r=t.cdr;if(ue(t)){return{value:undefined,done:true}}else{return{value:t.car,done:false}}}}};function ua(e){return e<0?-e:e}function oa(e,t){var r=U(t),n=r[0],i=r.slice(1);while(i.length>0){var a=i,u=w(a,1),o=u[0];if(!e(n,o)){return false}var s=i;var c=U(s);n=c[0];i=c.slice(1)}return true}function sa(e,t){if(d(e)){return d(t)&&Qa(e)===Qa(t)}else if(e instanceof I){if(!(t instanceof I)){return false}var r;if(e.__type__===t.__type__){if(e.__type__==="complex"){r=e.__im__.__type__===t.__im__.__type__&&e.__re__.__type__===t.__re__.__type__}else{r=true}if(r&&e.cmp(t)===0){if(e.valueOf()===0){return Object.is(e.valueOf(),t.valueOf())}return true}}return false}else if(typeof e==="number"){if(typeof t!=="number"){return false}if(Number.isNaN(e)){return Number.isNaN(t)}if(e===Number.NEGATIVE_INFINITY){return t===Number.NEGATIVE_INFINITY}if(e===Number.POSITIVE_INFINITY){return t===Number.POSITIVE_INFINITY}return sa(I(e),I(t))}else if(e instanceof _){if(!(t instanceof _)){return false}return e.__char__===t.__char__}else{return e===t}}function ca(e,t){if(Uo(e)!==Uo(t)){return false}if(!fa(e)){return false}if(e instanceof RegExp){return e.source===t.source}if(e instanceof x){return e.valueOf()===t.valueOf()}return sa(e,t)}function fa(e){return e instanceof ne||x.isString(e)||ue(e)||e===null||e instanceof _||e instanceof I||e===true||e===false}var la=function(){if(Math.trunc){return Math.trunc}else{return function(e){if(e===0){return 0}else if(e<0){return Math.ceil(e)}else{return Math.floor(e)}}}}();function q(e,t,r,n){if(typeof this!=="undefined"&&this.constructor!==q||typeof this==="undefined"){return new q(e,t)}F("Macro",e,"string",1);F("Macro",t,"function",2);if(r){if(n){this.__doc__=r}else{this.__doc__=hi(r)}}this.__name__=e;this.__fn__=t}q.defmacro=function(e,t,r,n){var i=new q(e,t,r,n);i.__defmacro__=true;return i};q.prototype.invoke=function(e,t,r){var n=t.env,i=Z(t,hr);var a=te(te({},i),{},{macro_expand:r});var u=this.__fn__.call(n,e,a,this.__name__);return u};q.prototype.toString=function(){return"#<macro:".concat(this.__name__,">")};var _a="define-macro";function ha(e){return e.car instanceof ne&&oe(e.cdr)&&oe(e.cdr.car)&&ne.is(e.cdr.car.car,"lambda")}function pa(e){return oe(e.car)&&e.car.car instanceof ne}function da(e,i,a,t,r){var u=r.use_dynamic,o=r.error;var n=q.defmacro(e,function(e){var t=va(i,e,this);var r={env:t,dynamic_env:t,use_dynamic:u,error:o};if(oe(a)){var n=a.reduce(function(e,t){return A(t,r)});return D(n,function(e){if(h(e)==="object"){delete e[uu]}return e})}},t,true);n.__code__=new ae(new ne("define-macro"),_a);return n}function va(e,t,r){var n=new s({},r,"defmacro");var i=t;while(true){if(ue(e)){break}if(e instanceof ne){n.__env__[e.__name__]=i;break}else if(!ue(e.car)){if(ue(i)){n.__env__[e.car.__name__]=ie}else{if(oe(i.car)){i.car[uu]=true}n.__env__[e.car.__name__]=i.car}}if(ue(e.cdr)){break}if(!ue(i)){i=i.cdr}e=e.cdr}return n}var ma=-1e4;function ya(f){return function(){var r=V(O.mark(function e(r,y){var a,g,n,i,u,o,b,w,D,x,E,F,A,k,s,C,c;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:c=function e(){c=V(O.mark(function e(r,n,i){var a,u,o,s,c,f,l,_,h,p,d,v,m;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(oe(r)&&r.car instanceof ne)){t.next=50;break}if(!r[uu]){t.next=3;break}return t.abrupt("return",r);case 3:a=r.car.valueOf();u=i.get(r.car,{throwError:false});o=b(a);s=o||D(u,r)||x(u);if(!(A(a,u)&&!w(a))){t.next=31;break}c=u instanceof ga?r:r.cdr;t.next=11;return u.invoke(c,te(te({},y),{},{env:i}),true);case 11:f=t.sent;if(!(u instanceof ga)){t.next=20;break}l=f,_=l.expr,h=l.scope;if(!oe(_)){t.next=19;break}if(!(n!==-1&&n<=1||n<ma)){t.next=17;break}return t.abrupt("return",_);case 17:if(n!==-1){n=n-1}return t.abrupt("return",C(_,n,h));case 19:f=_;case 20:if(!(f instanceof ne)){t.next=22;break}return t.abrupt("return",ho(f));case 22:if(!oe(f)){t.next=27;break}if(!(n!==-1&&n<=1||n<ma)){t.next=25;break}return t.abrupt("return",f);case 25:if(n!==-1){n=n-1}return t.abrupt("return",C(f,n,i));case 27:if(!fa(f)){t.next=29;break}return t.abrupt("return",f);case 29:t.next=50;break;case 31:if(!(s&&oe(r.cdr.car))){t.next=50;break}if(!o){t.next=39;break}g=F(r.cdr.car);t.next=36;return k(r.cdr.car,n);case 36:p=t.sent;t.next=41;break;case 39:g=E(r.cdr.car);p=r.cdr.car;case 41:t.t0=ae;t.t1=r.car;t.t2=ae;t.t3=p;t.next=47;return C(r.cdr.cdr,n,i);case 47:t.t4=t.sent;t.t5=new t.t2(t.t3,t.t4);return t.abrupt("return",new t.t0(t.t1,t.t5));case 50:d=r.car;if(!oe(d)){t.next=55;break}t.next=54;return C(d,n,i);case 54:d=t.sent;case 55:v=r.cdr;if(!oe(v)){t.next=60;break}t.next=59;return C(v,n,i);case 59:v=t.sent;case 60:m=new ae(d,v);return t.abrupt("return",m);case 62:case"end":return t.stop()}},e)}));return c.apply(this,arguments)};C=function e(t,r,n){return c.apply(this,arguments)};s=function e(){s=V(O.mark(function e(r,n){var i;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!ue(r)){t.next=2;break}return t.abrupt("return",ie);case 2:i=r.car;t.t0=ae;t.t1=ae;t.t2=i.car;t.next=8;return C(i.cdr,n,a);case 8:t.t3=t.sent;t.t4=new t.t1(t.t2,t.t3);t.next=12;return k(r.cdr);case 12:t.t5=t.sent;return t.abrupt("return",new t.t0(t.t4,t.t5));case 14:case"end":return t.stop()}},e)}));return s.apply(this,arguments)};k=function e(t,r){return s.apply(this,arguments)};A=function e(t,r){return r instanceof q&&r.__defmacro__&&!g.includes(t)};F=function e(t){return[].concat(ee(g),ee(t.to_array(false).map(function(e){if(oe(e)){return e.car.valueOf()}var t=Uo(e);var r="macroexpand: Invalid let binding expectig pair got ".concat(t);throw new Error(r)})))};E=function e(t){var r=[];while(true){if(!ue(t)){if(t instanceof ne){r.push(t.valueOf());break}r.push(t.car.valueOf());t=t.cdr}else{break}}return[].concat(ee(g),r)};x=function e(t){return t===u};D=function e(t,r){return t===o&&oe(r.cdr.car)};w=function e(t){if(!b(t)){return false}return i.includes(a.get(t))};b=function e(t){return n.includes(t)};a=y["env"]=this;g=[];n=["let","let*","letrec","letrec*"];i=n.map(function(e){return se.get(e)});u=se.get("lambda");o=se.get("define");if(!(oe(r.cdr)&&I.isNumber(r.cdr.car))){t.next=23;break}t.t0=ho;t.next=21;return C(r,r.cdr.car.valueOf(),a);case 21:t.t1=t.sent.car;return t.abrupt("return",(0,t.t0)(t.t1));case 23:if(!f){t.next=29;break}t.t2=ho;t.next=27;return C(r,1,a);case 27:t.t3=t.sent.car;return t.abrupt("return",(0,t.t2)(t.t3));case 29:t.t4=ho;t.next=32;return C(r,-1,a);case 32:t.t5=t.sent.car;return t.abrupt("return",(0,t.t4)(t.t5));case 34:case"end":return t.stop()}},e,this)}));return function(e,t){return r.apply(this,arguments)}}()}function ga(e,t){this.__env__=t;this.__fn__=e;this.__defmacro__=true}ga.__merge_env__=Symbol["for"]("merge");ga.prototype=Object.create(q.prototype);ga.prototype.invoke=function(e,t,r){var n=t.error,i=t.env,a=t.use_dynamic;var u={error:n,env:i,use_dynamic:a,dynamic_env:this.__env__,macro_expand:r};return this.__fn__.call(i,e,u,this.__name__||"syntax")};ga.prototype.constructor=ga;ga.prototype.toString=function(){if(this.__name__){return"#<syntax:".concat(this.__name__,">")}return"#<syntax>"};var ba=H(function e(t){Y(this,e);c(this,"_syntax",t,{hidden:true});c(this._syntax,"_param",true,{hidden:true})});ga.Parameter=ba;function wa(e,t,W,H){var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var G={"...":{symbols:{},lists:[]},symbols:{}};var Q=r.expansion,Z=r.define;re(W);function X(t,e){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=r.ellipsis,i=n===void 0?false:n,a=r.trailing,N=a===void 0?false:a,u=r.pattern_names,o=u===void 0?[]:u;re({code:e,pattern:t});if(fa(t)&&!(t instanceof ne)){return ca(t,e)}if(t instanceof ne){var s=t.literal();if(W.includes(s)){if(!ne.is(e,s)&&!ne.is(t,e)){return false}var c=Q.ref(s);return!c||c===Z||c===se}}if(Array.isArray(t)&&Array.isArray(e)){re("<<< a 1");if(t.length===0&&e.length===0){return true}if(ne.is(t[1],H)){if(t[0]instanceof ne){var f=t[0].valueOf();re("<<< a 2 "+i);if(i){var l=e.length-2;var T=l>0?e.slice(0,l):e;var _=ae.fromArray(T,false);if(!G["..."].symbols[f]){G["..."].symbols[f]=new ae(_,ie)}else{G["..."].symbols[f].append(new ae(_,ie))}}else{G["..."].symbols[f]=ae.fromArray(e,false)}}else if(Array.isArray(t[0])){re("<<< a 3");var L=ee(o);var M=te(te({},r),{},{pattern_names:L,ellipsis:true});if(!e.every(function(e){return X(t[0],e,M)})){return false}}if(t.length>2){var h=t.slice(2);return X(h,e.slice(-h.length),r)}return true}var p=X(t[0],e[0],r);re({first:p,pattern:t[0],code:e[0]});var d=X(t.slice(1),e.slice(1),r);re({first:p,rest:d});return p&&d}if(oe(t)&&oe(t.car)&&oe(t.car.cdr)&&ne.is(t.car.cdr.car,H)){re(">> 0");if(ue(e)){re({pattern:t});if(t.car.car instanceof ne){var v=t.car.car.valueOf();if(G["..."].symbols[v]){throw new Error("syntax: named ellipsis can only "+"appear onces")}G["..."].symbols[v]=e}}}if(oe(t)&&oe(t.cdr)&&ne.is(t.cdr.car,H)){re(">> 1 (a)");if(!ue(t.cdr.cdr)){if(oe(t.cdr.cdr)){re(">> 1 (b)");var R=t.cdr.cdr.length();var m=!ue(t.last_pair().cdr);if(!oe(e)){return false}var y=e.length();var g=e;var q=m?1:1;while(y-q>R){g=g.cdr;y--}var U=g.cdr;g.cdr=ie;var z=te(te({},r),{},{trailing:m});if(!X(t.cdr.cdr,U,z)){return false}}}if(t.car instanceof ne){var b=t.car.__name__;if(G["..."].symbols[b]&&!o.includes(b)&&!i){throw new Error("syntax: named ellipsis can only appear onces")}re(">> 1 (next)");if(ue(e)){re(">> 2");if(i){re("NIL");G["..."].symbols[b]=ie}else{re("NULL");G["..."].symbols[b]=null}}else if(oe(e)&&(oe(e.car)||ue(e.car))){re(">> 3 "+i);if(i){if(G["..."].symbols[b]){var w=G["..."].symbols[b];if(ue(w)){w=new ae(ie,new ae(e,ie))}else{w=w.append(new ae(e,ie))}G["..."].symbols[b]=w}else{G["..."].symbols[b]=new ae(e,ie)}}else{re(">> 4");G["..."].symbols[b]=new ae(e,ie)}}else{re(">> 6");if(oe(e)){re(">> 7 "+i);if(!oe(e.cdr)&&!ue(e.cdr)){re(">> 7 (b)");if(ue(t.cdr.cdr)){return false}else if(!G["..."].symbols[b]){G["..."].symbols[b]=new ae(e.car,ie);return X(t.cdr.cdr,e.cdr,r)}}var D=e.last_pair();re({last_pair:D});if(!ue(D.cdr)){re(">> 7 (c)");if(ue(t.cdr.cdr)){return false}else{re(">> 7 (d)");var x=e.clone();x.last_pair().cdr=ie;G["..."].symbols[b]=x;return X(t.cdr.cdr,D.cdr,r)}}o.push(b);if(!G["..."].symbols[b]){re(">> 7 (e)");G["..."].symbols[b]=new ae(e,ie)}else{re(">> 7 (f)");var $=G["..."].symbols[b];G["..."].symbols[b]=$.append(new ae(e,ie))}re({IIIIII:G["..."].symbols[b]})}else if(t.car instanceof ne&&oe(t.cdr)&&ne.is(t.cdr.car,H)){re(">> 8");G["..."].symbols[b]=null;return X(t.cdr.cdr,e,r)}else{re(">> 9");return false}}return true}else if(oe(t.car)){var E=ee(o);if(ue(e)){re(">> 10");G["..."].lists.push(ie);return true}re(">> 11");var F=e;var V=te(te({},r),{},{pattern_names:E,ellipsis:true});while(oe(F)){if(!X(t.car,F.car,V)){return false}F=F.cdr}return true}if(Array.isArray(t.car)){var E=ee(o);var A=e;var Y=te(te({},r),{},{pattern_names:E,ellipsis:true});while(oe(A)){if(!X(t.car,A.car,Y)){return false}A=A.cdr}return true}return false}if(t instanceof ne){if(ne.is(t,H)){throw new Error("syntax: invalid usage of ellipsis")}re(">> 12");var k=t.__name__;if(W.includes(k)){return true}if(i){var C,O;re(G["..."].symbols[k]);(O=(C=G["..."].symbols)[k])!==null&&O!==void 0?O:C[k]=[];G["..."].symbols[k].push(e)}else{G.symbols[k]=e}return true}if(oe(t)&&oe(e)){re(">> 13");re({a:13,code:e,pattern:t});var S=t.car instanceof ne&&t.cdr instanceof ne;if(N&&S){re(">> 13 (a)");if(!ue(e.cdr)){return false}var J=t.car.valueOf();var K=t.cdr.valueOf();G.symbols[J]=e.car;G.symbols[K]=ie;return true}if(ue(e.cdr)){re(">> 13 (b)");if(S){if(!X(t.car,e.car,r)){return false}re(">> 14");var j=t.cdr.valueOf();if(!(j in G.symbols)){G.symbols[j]=ie}j=t.car.valueOf();if(!(j in G.symbols)){G.symbols[j]=e.car}return true}}re({pattern:t,code:e});if(oe(t.cdr)&&oe(t.cdr.cdr)&&t.cdr.car instanceof ne&&ne.is(t.cdr.cdr.car,H)&&oe(t.cdr.cdr.cdr)&&!ne.is(t.cdr.cdr.cdr.car,H)&&X(t.car,e.car,r)&&X(t.cdr.cdr.cdr,e.cdr,te(te({},r),{},{trailing:true}))){var B=t.cdr.car.__name__;re({pattern:t,code:e,name:B});if(W.includes(B)){return true}G["..."].symbols[B]=null;return true}re("recur");re({pattern:t,code:e});var I=X(t.car,e.car,r);var P=X(t.cdr,e.cdr,r);re({$car_code:e.car,$car_pattern:t.car,car:I,$cdr_code:e.cdr,$cdr_pattern:t.cdr,cdr:P});if(I&&P){return true}}else if(ue(t)&&(ue(e)||e===undefined)){return true}else if(oe(t.car)&&ne.is(t.car.car,H)){throw new Error("syntax: invalid usage of ellipsis")}else{return false}}if(X(e,t)){return G}}function Da(e,i){function a(t){if(oe(t)){if(!i.length){return t}var e=a(t.car);var r=a(t.cdr);return new ae(e,r)}else if(t instanceof ne){var n=i.find(function(e){return e.gensym===t});if(n){return ne(n.name)}return t}else{return t}}return a(e)}function xa(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var B=e.bindings,t=e.expr,I=e.scope,u=e.symbols,f=e.names,P=e.ellipsis;var l={};function o(e){if(e instanceof ne){return true}return["string","symbol"].includes(h(e))}function N(e){if(!o(e)){var t=Uo(e);throw new Error("syntax: internal error, need symbol got ".concat(t))}var r=e.valueOf();if(r===P){throw new Error("syntax: internal error, ellipis not transformed")}var n=h(r);if(["string","symbol"].includes(n)){if(r in B.symbols){return B.symbols[r]}else if(n==="string"&&r.match(/\./)){var i=r.split(".");var a=i[0];if(a in B.symbols){return ae.fromArray([ne("."),B.symbols[a]].concat(i.slice(1).map(function(e){return x(e)})))}}}if(u.includes(r)){return e}return s(r,e)}function s(e,t){if(!l[e]){var r=I.ref(e);if(h(e)==="symbol"&&!r){e=t.literal()}if(l[e]){return l[e]}var n=qn(e);if(r){var i=I.get(e);I.set(n,i)}else{var a=I.get(e,{throwError:false});if(typeof a!=="undefined"){I.set(n,a)}}f.push({name:e,gensym:n});l[e]=n;if(typeof e==="string"&&e.match(/\./)){var u=e.split(".").filter(Boolean),o=U(u),s=o[0],c=o.slice(1);if(l[s]){vu(n,"__object__",[l[s]].concat(ee(c)))}}}return l[e]}function T(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};var i=r.nested;re({bindings:t,expr:e});if(Array.isArray(e)&&!e.length){return e}if(e instanceof ne){var a=e.valueOf();if(Rn(e)&&!t[a]);re("[t 1");if(t[a]){if(oe(t[a])){var u=t[a],o=u.car,s=u.cdr;if(i){var c=o.car,f=o.cdr;if(!ue(f)){n(a,new ae(f,ie))}return c}if(!ue(s)){n(a,s)}return o}else if(t[a]instanceof Array){n(a,t[a].slice(1));return t[a][0]}}return N(e)}var l=Array.isArray(e);if(oe(e)||l){var _=l?e[0]:e.car;var h=l?e[1]:oe(e.cdr)&&e.cdr.car;if(_ instanceof ne&&ne.is(h,P)){l?e.slice(2):e.cdr.cdr;re("[t 2");var p=_.valueOf();var d=t[p];if(d===null){return}else if(p in t){re({name:p,binding:t[p]});if(oe(d)){re("[t 2 Pair "+i);var v=d.car,m=d.cdr;var y=l?e.slice(2):e.cdr.cdr;if(i){if(!ue(m)){re("|| next 1");n(p,m)}if(l&&y.length||!ue(y)&&!l){var g=T(y,t,r,n);if(l){return v.concat(g)}else if(oe(v)){return v.append(g)}else{re("UNKNOWN")}}return v}else if(oe(v)){if(!ue(v.cdr)){re("|| next 2");n(p,new ae(v.cdr,m))}return new lo(v.car)}else if(ue(m)){return v}else{var b=e.last_pair();if(b.cdr instanceof ne){re("|| next 3");n(p,d.last_pair());return v}}}else if(d instanceof Array){re("[t 2 Array "+i);if(i){n(p,d.slice(1));return ae.fromArray(d)}else{var w=d.slice(1);if(w.length){n(p,w)}return d[0]}}else{return d}}}re("[t 3 recur ",e);var D=l?e.slice(1):e.cdr;var x=T(_,t,r,n);var E=T(D,t,r,n);re({head:x,rest:E});if(l){return[x].concat(E)}return new ae(x,E)}return e}function L(t,r){var e=Object.values(t);var n=Object.getOwnPropertySymbols(t);if(n.length){e.push.apply(e,ee(n.map(function(e){return t[e]})))}return e.length&&e.every(function(e){if(e===null){return!r}return oe(e)||ue(e)||Array.isArray(e)&&e.length})}function M(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function R(i){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},t=e.disabled;re("traverse>> ",i);var a=Array.isArray(i);if(a&&i.length===0){return i}if(oe(i)||a){re(">> 0");var r=a?i[0]:i.car;var n,u;if(a){n=i[1];u=i.slice(2)}else if(oe(i.cdr)){n=i.cdr.car;u=i.cdr.cdr}re({first:r,second:n,rest_second:u});if(!t&&oe(r)&&ne.is(r.car,P)){return new ae(r.cdr.car,R(i.cdr))}if(n&&ne.is(n,P)&&!t){re(">> 1");var o=B["..."].symbols;var s=Object.values(o);if(s.length&&s.every(function(e){return e===null})){re(">>> 1 (a)");return R(u,{disabled:t})}var c=M(o);var f=r instanceof ne&&ne.is(u.car,P);if(oe(r)||f){re(">>> 1 (b)");if(ue(B["..."].lists[0])){if(!f){return R(u,{disabled:t})}re(u);return ie}var l=r;if(f){re(">>> 1 (c)");l=new ae(r,new ae(n,ie))}re(">> 2");var _;if(c.length){re(">> 2 (a)");var h=te({},o);_=a?[]:ie;var p=function e(){re({bind:h});if(!L(h)){return 1}var n={};var t=function e(t,r){n[t]=r};var r=T(l,h,{nested:true},t);if(r!==undefined){if(r instanceof lo){r=r.valueOf()}if(f){if(a){if(Array.isArray(r)){var i;(i=_).push.apply(i,ee(r))}else{re("ZONK {1}")}}else{if(ue(_)){_=r}else{_=_.append(r)}}}else if(a){_.push(r)}else{_=new ae(r,_)}}h=n};while(true){if(p())break}if(!ue(_)&&!f&&!a){_=_.reverse()}if(a){if(u){re({rest_second:u,expr:i});var d=R(u,{disabled:t});return _.concat(d)}return _}if(!ue(i.cdr.cdr)&&!ne.is(i.cdr.cdr.car,P)){var v=R(i.cdr.cdr,{disabled:t});return _.append(v)}return _}else{re(">> 3");var m=T(r,o,{nested:true});if(m){if(m instanceof lo){m=m.valueOf()}return new ae(m,ie)}return ie}}else if(r instanceof ne){re(">> 4");if(ne.is(u.car,P)){re(">> 4 (a)")}else{re(">> 4 (b)")}var y=r.__name__;var g=G({},y,o[y]);re({bind:g});var b=o[y]===null;var w=a?[]:ie;var D=function e(){if(!L(g,true)){re({bind:g});return 1}var n={};var t=function e(t,r){n[t]=r};var r=T(i,g,{nested:false},t);re({value:r});if(typeof r!=="undefined"){if(r instanceof lo){r=r.valueOf()}if(a){w.push(r)}else{w=new ae(r,w)}}g=n};while(true){if(D())break}if(!ue(w)&&!a){w=w.reverse()}if(oe(i.cdr)){if(oe(i.cdr.cdr)||i.cdr.cdr instanceof ne){var x=R(i.cdr.cdr,{disabled:t});re({node:x});if(b){return x}if(ue(w)){w=x}else{w.append(x)}re({result:w,node:x})}}re("<<<< 2");re({result:w});return w}}var E=R(r,{disabled:t});var F;var A;if(r instanceof ne){var k=I.get(r,{throwError:false});A=k instanceof q&&k.__name__==="syntax-rules"}if(A){if(i.cdr.car instanceof ne){F=new ae(R(i.cdr.car,{disabled:t}),new ae(i.cdr.cdr.car,R(i.cdr.cdr.cdr,{disabled:t})))}else{F=new ae(i.cdr.car,R(i.cdr.cdr,{disabled:t}))}re("REST >>>> ",F)}else{F=R(i.cdr,{disabled:t})}re({a:true,car:na(i.car),cdr:na(i.cdr),head:na(E),rest:na(F)});return new ae(E,F)}if(i instanceof ne){if(t&&ne.is(i,P)){return i}var C=Object.keys(B["..."].symbols);var O=i.literal();if(C.includes(O)){var S="missing ellipsis symbol next to name `".concat(O,"'");throw new Error("syntax-rules: ".concat(S))}var j=N(i);if(typeof j!=="undefined"){return j}}return i}return R(t,{})}function Ea(e){return qa(e)||ue(e)||e===null}function ue(e){return e===ie}function d(e){return typeof e==="function"&&typeof e.bind==="function"}function Fa(e){return ei.includes(e)}function Aa(e){return e===false||e===null}function ka(e){return typeof e==="string"}function Ca(e){return e&&e[_u]}function Oa(e){return e&&e[fu]}function Sa(e){return Ca(e)&&!e[lu]&&!Oa(e)&&!nu(e)}function ja(e){var t=Symbol["for"]("__native__");return d(e)&&e.toString().match(/\{\s*\[native code\]\s*\}/)&&(e.name.match(/^bound /)&&e[t]===true||!e.name.match(/^bound /)&&!e[t])}function Ba(e){return e&&h(e)==="object"&&e.hasOwnProperty&&e.hasOwnProperty("constructor")&&typeof e.constructor==="function"&&e.constructor.prototype===e}function Ia(e){return e instanceof Xo}function Pa(e){return e instanceof Qo}function Na(e){return e instanceof Go}function oe(e){return e instanceof ae}function Ta(e){return e instanceof s}function La(e){return d(e)||Ia(e)||Na(e)||Ma(e)}function Ma(e){return e instanceof q||e instanceof ba}function Ra(e){if(e instanceof zn){return false}if(e instanceof Promise){return true}return!!e&&d(e.then)}function qa(e){return typeof e==="undefined"}function Ua(e){return Object.getPrototypeOf(e)}function za(e,t){if(Ja(e,t)||Ja(Ua(e),t)){return d(e[t])}}function $a(e){if(!e){return false}if(h(e)!=="object"){return false}if(e.__instance__){e.__instance__=false;return e.__instance__}return false}function Va(e){var t=h(e);return["string","function"].includes(t)||h(e)==="symbol"||e instanceof zn||e instanceof ne||e instanceof I||e instanceof x||e instanceof RegExp}function Ya(e){return e&&(e instanceof I||e instanceof x||e instanceof _)}function Ja(e,t){if(e===null){return false}return h(e)==="object"&&t in Object.getOwnPropertySymbols(e)}function Ka(e){switch(h(e)){case"string":return x(e);case"bigint":return I(e);case"number":if(Number.isNaN(e)){return wo}else{return I(e)}}return e}function Wa(r,n){var e=Object.getOwnPropertyNames(r);var t=Object.getOwnPropertySymbols(r);var i={};e.concat(t).forEach(function(e){var t=n(r[e]);i[e]=t});return i}function Ha(t){var e=[x,I,_].some(function(e){return t instanceof e});if(e){return t.valueOf()}if(t instanceof Array){return t.map(Ha)}if(t instanceof zn){delete t.then}if(Vi(t)){return Wa(t,Ha)}return t}function Ga(e,t){if(oe(e)){e.mark_cycles();return ho(e)}if(d(e)){if(t){return Za(e,t)}}return Ka(e)}function Qa(e){if(eu(e)){return e[au]}return e}function Za(e,t){if(e[Symbol["for"]("__bound__")]){return e}var r=e.bind(t);var n=Object.getOwnPropertyNames(e);var i=Fr(n),a;try{for(i.s();!(a=i.n()).done;){var u=a.value;if(pu(u)){try{r[u]=e[u]}catch(e){}}}}catch(e){i.e(e)}finally{i.f()}vu(r,"__fn__",e);vu(r,"__context__",t);vu(r,"__bound__",true);if(ja(e)){vu(r,"__native__",true)}if(Vi(t)&&Ca(e)){vu(r,"__method__",true)}r.valueOf=function(){return e};return r}function Xa(e){return eu(e)&&e[Symbol["for"]("__context__")]===Object}function eu(e){return!!(d(e)&&e[au])}function tu(e){if(d(e)){var t=e[iu];if(t&&(t===Ls||t.constructor&&t.constructor.__class__)){return true}}return false}function ru(e){return e instanceof Ju||e instanceof Ku}function nu(e){if(d(e)){if(ru(e[iu])){return true}}return false}var iu=Symbol["for"]("__context__");var au=Symbol["for"]("__fn__");var uu=Symbol["for"]("__data__");var ou=Symbol["for"]("__ref__");var su=Symbol["for"]("__cycles__");var cu=Symbol["for"]("__class__");var fu=Symbol["for"]("__method__");var lu=Symbol["for"]("__prototype__");var _u=Symbol["for"]("__lambda__");var hu=["name","length","caller","callee","arguments","prototype"];function pu(e){return!hu.includes(e)}function du(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:true})}function vu(e,t,r){Object.defineProperty(e,Symbol["for"](t),{get:function e(){return r},set:function e(){},configurable:false,enumerable:false})}function mu(t,r){try{Object.defineProperty(t,"length",{get:function e(){return r}});return t}catch(e){var n=new Array(r).fill(0).map(function(e,t){return"a"+t}).join(",");var i=new Function("f","return function(".concat(n,") {\n                return f.apply(this, arguments);\n            };"));return i(t)}}function yu(e){var w;switch(e){case Symbol["for"]("letrec"):w="letrec";break;case Symbol["for"]("let"):w="let";break;case Symbol["for"]("let*"):w="let*";break;default:throw new Error("Invalid let_macro value")}return q.defmacro(w,function(t,e){var f=e.dynamic_env;var l=e.error,r=e.macro_expand,_=e.use_dynamic;var h;if(t.car instanceof ne){if(!(oe(t.cdr.car)||ue(t.cdr.car))){throw new Error("let require list of pairs")}var n;if(ue(t.cdr.car)){h=ie;n=ie}else{n=t.cdr.car.map(function(e){return e.car});h=t.cdr.car.map(function(e){return e.cdr.car})}return new ae(ae.fromArray([ne("letrec"),[[t.car,ae(ne("lambda"),ae(n,t.cdr.cdr))]],t.car]),h)}else if(r){return}var p=this;h=se.get("list->array")(t.car);var d=p.inherit(w);var v,m;if(w==="let*"){m=d}else if(w==="let"){v=[]}var y=0;function g(){var e=Un([d],t.cdr);return A(e,{env:d,dynamic_env:d,use_dynamic:_,error:l})}function b(e){if(e in d.__env__){throw new Error("Duplicated let variable ".concat(e))}}return function t(){var r=h[y++];f=w==="let*"?d:p;if(!r){if(v&&v.length){var e=v.map(function(e){return e.value});var n=e.filter(Ra);if(n.length){return $n(e).then(function(e){for(var t=0,r=e.length;t<r;++t){var n=v[t].name;b(n);d.set(n,e[t])}}).then(g)}else{var i=Fr(v),a;try{for(i.s();!(a=i.n()).done;){var u=a.value,o=u.name,s=u.value;b(o);d.set(o,s)}}catch(e){i.e(e)}finally{i.f()}}}return g()}else{if(w==="let"){m=p}else if(w==="letrec"){m=d}var c=A(r.cdr.car,{env:m,dynamic_env:f,use_dynamic:_,error:l});if(w==="let*"){m=d=m.inherit("let*["+y+"]")}if(v){v.push({name:r.car,value:c});return t()}else{return D(c,function(e){d.set(r.car,e);return t()})}}}()})}function gu(e,c){return new q(e,function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.use_dynamic,n=t.error;var i=this;var a=this;var u=[];var o=e;while(oe(o)){u.push(A(o.car,{env:i,dynamic_env:a,use_dynamic:r,error:n}));o=o.cdr}var s=u.filter(Ra).length;if(s){return $n(u).then(c.bind(this))}else{return c.call(this,u)}})}function bu(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}r.forEach(function(e){F("",e,"number")});return e.apply(void 0,r)}function wu(){var n=this;for(var e=arguments.length,i=new Array(e),t=0;t<e;t++){i[t]=arguments[t]}i.forEach(function(e,t){F("pipe",e,"function",t+1)});return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.reduce(function(e,t){return[t.apply(n,e)]},t)[0]}}function Du(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}t.forEach(function(e,t){F("compose",e,"function",t+1)});return wu.apply(void 0,ee(t.reverse()))}function xu(u,o){var s=this;return function e(t,r){F(u,t,"function");for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++){i[a-2]=arguments[a]}if(i.some(Ea)){if(typeof r==="number"){return I(r)}return r}else{return o.call.apply(o,[s,e,t,r].concat(i))}}}function Eu(e,t){return Ou(e+1,Cu(bu,t))}var Fu=Cu(Eu,1);var Au=Cu(Eu,2);function ku(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(i!==null){t=[i].concat(ee(t))}return t.reduce(Au(n))}}function Cu(u){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++){t[r-1]=arguments[r]}F("curry",u,"function");var o=u.length;return function(){var n=this;var i=t.slice();var a=function(){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}i=i.concat(t);if(i.length>=o){return u.apply(n,i)}else{return a}}}();return a.apply(void 0,arguments)}}function Ou(n,i){F("limit",i,"function",2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.apply(void 0,ee(t.slice(0,n)))}}function _(e){if(typeof this!=="undefined"&&!(this instanceof _)||typeof this==="undefined"){return new _(e)}if(e instanceof x){e=e.valueOf()}var t;if(Array.from(e).length>1){e=e.toLowerCase();if(_.__names__[e]){t=e;e=_.__names__[e]}else{throw new Error("Internal: Unknown named character")}}else{t=_.__rev_names__[e]}du(this,"__char__",e);if(t){du(this,"__name__",t)}}_.is=function(e,t){return e instanceof _&&e.__char__===t};_.__names__=Gr;_.__rev_names__={};Object.keys(_.__names__).forEach(function(e){var t=_.__names__[e];_.__rev_names__[t]=e});_.prototype.toUpperCase=function(){return _(this.__char__.toUpperCase())};_.prototype.toLowerCase=function(){return _(this.__char__.toLowerCase())};_.prototype.toString=function(){return"#\\"+(this.__name__||this.__char__)};_.prototype.valueOf=_.prototype.serialize=function(){return this.__char__};function x(e){if(typeof this!=="undefined"&&!(this instanceof x)||typeof this==="undefined"){return new x(e)}if(e instanceof Array){this.__string__=e.map(function(e,t){F("LString",e,"character",t+1);return e.toString()}).join("")}else{this.__string__=e.valueOf()}}{var Su=["length","constructor"];var ju=Object.getOwnPropertyNames(String.prototype).filter(function(e){return!Su.includes(e)});var Bu=function e(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return n.apply(this.__string__,t)}};var Iu=Fr(ju),Pu;try{for(Iu.s();!(Pu=Iu.n()).done;){var Nu=Pu.value;x.prototype[Nu]=Bu(String.prototype[Nu])}}catch(e){Iu.e(e)}finally{Iu.f()}}x.prototype[Symbol.iterator]=O.mark(function e(){var r,n,i,a;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=Array.from(this.__string__);n=0,i=r;case 2:if(!(n<i.length)){t.next=9;break}a=i[n];t.next=6;return _(a);case 6:n++;t.next=2;break;case 9:case"end":return t.stop()}},e,this)});x.prototype.serialize=function(){return this.valueOf()};x.is=function(e,t){return e instanceof x&&e.__string__===t};x.isString=function(e){return e instanceof x||typeof e==="string"};x.prototype.freeze=function(){var e=this.__string__;delete this.__string__;c(this,"__string__",e)};x.prototype.get=function(e){F("LString::get",e,"number");return Array.from(this.__string__)[e.valueOf()]};x.prototype.cmp=function(e){F("LString::cmp",e,"string");var t=this.valueOf();var r=e.valueOf();if(t<r){return-1}else if(t===r){return 0}else{return 1}};x.prototype.lower=function(){return x(this.__string__.toLowerCase())};x.prototype.upper=function(){return x(this.__string__.toUpperCase())};x.prototype.set=function(e,t){F("LString::set",e,"number");F("LString::set",t,["string","character"]);e=e.valueOf();if(t instanceof _){t=t.__char__}var r=[];if(e>0){r.push(this.__string__.substring(0,e))}r.push(t);if(e<this.__string__.length-1){r.push(this.__string__.substring(e+1))}this.__string__=r.join("")};Object.defineProperty(x.prototype,"length",{get:function e(){return this.__string__.length}});x.prototype.clone=function(){return x(this.valueOf())};x.prototype.fill=function(e){F("LString::fill",e,["string","character"]);if(e instanceof _){e=e.valueOf()}var t=this.__string__.length;this.__string__=e.repeat(t)};function I(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof I){return e}if(typeof this!=="undefined"&&!(this instanceof I)||typeof this==="undefined"){return new I(e,t)}if(typeof e==="undefined"){throw new Error("Invalid LNumber constructor call")}var r=I.getType(e);if(I.types[r]){return I.types[r](e,t)}var n=e instanceof Array&&x.isString(e[0])&&I.isNumber(e[1]);if(e instanceof I){return I(e.value)}if(!I.isNumber(e)&&!n){throw new Error("You can't create LNumber from ".concat(Uo(e)))}if(e===null){e=0}var i;if(n){var a=e,u=w(a,2),o=u[0],s=u[1];if(o instanceof x){o=o.valueOf()}if(s instanceof I){s=s.valueOf()}var c=o.match(/^([+-])/);var f=false;if(c){o=o.replace(/^[+-]/,"");if(c[1]==="-"){f=true}}}if(Number.isNaN(e)){return g(e)}else if(n&&Number.isNaN(parseInt(o,s))){return wo}else if(typeof BigInt!=="undefined"){if(typeof e!=="bigint"){if(n){var l;switch(s){case 8:l="0o";break;case 16:l="0x";break;case 2:l="0b";break;case 10:l="";break}if(typeof l==="undefined"){var _=BigInt(s);i=ee(o).map(function(e,t){return BigInt(parseInt(e,s))*qu(_,BigInt(t))}).reduce(function(e,t){return e+t})}else{i=BigInt(l+o)}}else{i=BigInt(e)}if(f){i*=BigInt(-1)}}else{i=e}return E(i,true)}else if(typeof Lr!=="undefined"&&!(e instanceof Lr)){if(e instanceof Array){return E(C(Lr,ee(e)))}return E(new Lr(e))}else if(n){this.constant(parseInt(o,s),"integer")}else{this.constant(e,"integer")}}I.prototype.constant=function(e,t){du(this,"__value__",e);du(this,"__type__",t)};I.types={float:function e(t){return new g(t)},complex:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!I.isComplex(t)){t={im:0,re:t}}return new y(t,r)},rational:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!I.isRational(t)){t={num:t,denom:1}}return new b(t,r)}};I.prototype.serialize=function(){return this.__value__};I.prototype.isNaN=function(){return Number.isNaN(this.__value__)};I.prototype.gcd=function(e){var t=this.abs();e=e.abs();if(e.cmp(t)===1){var r=t;t=e;e=r}while(true){t=t.rem(e);if(t.cmp(0)===0){return e}e=e.rem(t);if(e.cmp(0)===0){return t}}};I.isFloat=function e(t){return t instanceof g||Number(t)===t&&t%1!==0};I.isNumber=function(e){return e instanceof I||I.isNative(e)||I.isBN(e)};I.isComplex=function(e){if(!e){return false}var t=e instanceof y||(I.isNumber(e.im)||I.isRational(e.im)||Number.isNaN(e.im))&&(I.isNumber(e.re)||I.isRational(e.re)||Number.isNaN(e.re));return t};I.isRational=function(e){if(!e){return false}return e instanceof b||I.isNumber(e.num)&&I.isNumber(e.denom)};I.isInteger=function(e){if(!(I.isNative(e)||e instanceof I)){return false}if(I.isFloat(e)){return false}if(I.isRational(e)){return false}if(I.isComplex(e)){return false}return true};I.isNative=function(e){return typeof e==="bigint"||typeof e==="number"};I.isBigInteger=function(e){return e instanceof E||typeof e==="bigint"||I.isBN(e)};I.isBN=function(e){return typeof Lr!=="undefined"&&e instanceof Lr};I.getArgsType=function(e,t){if(e instanceof g||t instanceof g){return g}if(e instanceof E||t instanceof E){return E}return I};I.prototype.toString=function(e){if(Number.isNaN(this.__value__)){return"+nan.0"}if(e>=2&&e<36){return this.__value__.toString(e)}return this.__value__.toString()};I.prototype.asType=function(e){var t=I.getType(this);return I.types[t]?I.types[t](e):I(e)};I.prototype.isBigNumber=function(){return typeof this.__value__==="bigint"||typeof Lr!=="undefined"&&!(this.value instanceof Lr)};["floor","ceil","round"].forEach(function(t){I.prototype[t]=function(){if(this["float"]||I.isFloat(this.__value__)){return I(Math[t](this.__value__))}var e=this.valueOf(true);if(I.isBigInteger(e)){return e}return I(Math[t](e))}});I.prototype.valueOf=function(){if(I.isNative(this.__value__)){return Number(this.__value__)}else if(I.isBN(this.__value__)){return this.__value__.toNumber()}};var Tu=function(){var e=function e(t,r){return[t,r]};return{bigint:{bigint:e,float:function e(t,r){return[g(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},integer:{integer:e,float:function e(t,r){return[g(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},float:{bigint:function e(t,r){return[t,r&&g(r.valueOf())]},integer:function e(t,r){return[t,r&&g(r.valueOf())]},float:e,rational:function e(t,r){return[t,r&&g(r.valueOf())]},complex:function e(t,r){return[{re:t,im:g(0)},r]}},complex:{bigint:t("bigint"),integer:t("integer"),float:t("float"),rational:t("rational"),complex:function e(t,r){var n=I.coerce(t.__re__,r.__re__),i=w(n,2),a=i[0],u=i[1];var o=I.coerce(t.__im__,r.__im__),s=w(o,2),c=s[0],f=s[1];return[{im:c,re:a},{im:f,re:u}]}},rational:{bigint:function e(t,r){return[t,r&&{num:r,denom:1}]},integer:function e(t,r){return[t,r&&{num:r,denom:1}]},float:function e(t,r){return[g(t.valueOf()),r]},rational:e,complex:function e(t,r){return[{im:Lu(t.__type__,r.__im__.__type__,0)[0],re:Lu(t.__type__,r.__re__.__type__,t)[0]},{im:Lu(t.__type__,r.__im__.__type__,r.__im__)[0],re:Lu(t.__type__,r.__re__.__type__,r.__re__)[0]}]}}};function t(r){return function(e,t){return[{im:Lu(r,e.__im__.__type__,0,e.__im__)[1],re:Lu(r,e.__re__.__type__,0,e.__re__)[1]},{im:Lu(r,e.__im__.__type__,0,0)[1],re:Lu(r,t.__type__,0,t)[1]}]}}}();function Lu(e,t,r,n){return Tu[e][t](r,n)}I.coerce=function(e,t){var r=I.getType(e);var n=I.getType(t);if(!Tu[r]){throw new Error("LNumber::coerce unknown lhs type ".concat(r))}else if(!Tu[r][n]){throw new Error("LNumber::coerce unknown rhs type ".concat(n))}var i=Tu[r][n](e,t);return i.map(function(e){return I(e,true)})};I.prototype.coerce=function(e){if(!(typeof e==="number"||e instanceof I)){throw new Error("LNumber: you can't coerce ".concat(Uo(e)))}if(typeof e==="number"){e=I(e)}return I.coerce(this,e)};I.getType=function(e){if(e instanceof I){return e.__type__}if(I.isFloat(e)){return"float"}if(I.isComplex(e)){return"complex"}if(I.isRational(e)){return"rational"}if(typeof e==="number"){return"integer"}if(typeof BigInt!=="undefined"&&typeof e!=="bigint"||typeof Lr!=="undefined"&&!(e instanceof Lr)){return"bigint"}};I.prototype.isFloat=function(){return!!(I.isFloat(this.__value__)||this["float"])};var Mu={add:"+",sub:"-",mul:"*",div:"/",rem:"%",or:"|",and:"&",neg:"~",shl:">>",shr:"<<"};var Ru={};Object.keys(Mu).forEach(function(t){Ru[Mu[t]]=t;I.prototype[t]=function(e){return this.op(Mu[t],e)}});I._ops={"*":function e(t,r){return t*r},"+":function e(t,r){return t+r},"-":function e(t,r){if(typeof r==="undefined"){return-t}return t-r},"/":function e(t,r){return t/r},"%":function e(t,r){return t%r},"|":function e(t,r){return t|r},"&":function e(t,r){return t&r},"~":function e(t){return~t},">>":function e(t,r){return t>>r},"<<":function e(t,r){return t<<r}};I.prototype.op=function(e,t){if(typeof t==="undefined"){return I(I._ops[e](this.valueOf()))}if(typeof t==="number"){t=I(t)}if(Number.isNaN(this.__value__)&&!I.isComplex(t)||!I.isComplex(this)&&Number.isNaN(t.__value__)){return I(NaN)}var r=this.coerce(t),n=w(r,2),i=n[0],a=n[1];if(i._op){return i._op(e,a)}return I(I._ops[e](i,a))};I.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=Math.sqrt(-e);return y({re:0,im:t})}return I(Math.sqrt(e))};var qu=function e(t,r){return Math.pow(t,r)};try{var Uu=new Function("a,b","return a ** b");if(Uu(2,2)===4){qu=Uu}}catch(lr){}I.prototype.pow=function(e){var t;var r=this.coerce(e),n=w(r,2),i=n[0],a=n[1];if(I.isNative(i.__value__)&&I.isNative(a.__value__)){t=qu(i.__value__,a.__value__)}else if(I.isBN(i.__value__)&&I.isBN(a.__value__)){t=this.__value__.pow(e.__value__)}else if(i.pow){return i.pow(a)}return I(t)};I.prototype.abs=function(){var e=this.__value__;if(I.isNative(this.__value__)){if(e<0){e=-e}}else if(I.isBN(e)){e.iabs()}return new I(e)};I.prototype.isOdd=function(){if(I.isNative(this.__value__)){if(this.isBigNumber()){return this.__value__%BigInt(2)===BigInt(1)}if(this.__type__==="float"){throw new Error("Invalid number float")}return this.__value__%2===1}else if(I.isBN(this.__value__)){return this.__value__.isOdd()}throw new Error("Invalid number ".concat(this.__type__))};I.prototype.isEven=function(){return!this.isOdd()};I.prototype.cmp=function(e){var t=this.coerce(e),r=w(t,2),n=r[0],i=r[1];function a(e,t){if(e.__value__<t.__value__){return-1}else if(e.__value__===t.__value__){return 0}else{return 1}}if(n.__type__==="bigint"){if(I.isNative(n.__value__)){return a(n,i)}else if(I.isBN(n.__value__)){return this.__value__.cmp(i.__value__)}}else if(n instanceof g){return a(n,i)}};function y(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof y)||typeof this==="undefined"){return new y(e,t)}if(e instanceof y){return y({im:e.__im__,re:e.__re__})}if(I.isNumber(e)&&t){if(!t){return Number(e)}}else if(!I.isComplex(e)){var r="Invalid constructor call for LComplex expect &(:im <num> :re <num>) object but got ".concat(toString(e));throw new Error(r)}var n=e.im instanceof I?e.im:I(e.im);var i=e.re instanceof I?e.re:I(e.re);this.constant(n,i)}y.prototype=Object.create(I.prototype);y.prototype.constructor=y;y.prototype.constant=function(e,t){du(this,"__im__",e);du(this,"__re__",t);du(this,"__type__","complex")};y.prototype.abs=function(){return I(this.modulus())};y.prototype.serialize=function(){return{re:this.__re__,im:this.__im__}};y.prototype.toRational=function(e){var t=this.__im__,r=this.__re__;if(I.isFloat(this.__im__)){t=g(this.__im__).toRational(e)}if(I.isFloat(this.__re__)){r=g(this.__re__).toRational(e)}return y({im:t,re:r})};y.prototype.pow=function(e){e.cmp(0);if(e===0){return I(1)}var t=I(Math.atan2(this.__im__.valueOf(),this.__re__.valueOf()));var r=I(this.modulus());if(I.isComplex(e)&&e.__im__.cmp(0)!==0){var n=e.mul(Math.log(r.valueOf())).add(y.i.mul(t).mul(e));if(!I.isComplex(n)){return g(Math.E).pow(n)}var i=g(Math.E).pow(n.__re__.valueOf());return y({re:i.mul(Math.cos(n.__im__.valueOf())),im:i.mul(Math.sin(n.__im__.valueOf()))})}var a=e.__re__.cmp(0)>0;e=e.__re__.valueOf();if(I.isInteger(e)&&a){var u=this;while(--e){u=u.mul(this)}return u}var o=r.pow(e);var s=t.mul(e);return y({re:o.mul(Math.cos(s)),im:o.mul(Math.sin(s))})};y.prototype.add=function(e){return this.complex_op("add",e,function(e,t,r,n){return{re:e.add(t),im:r.add(n)}})};y.prototype.factor=function(){if(this.__im__ instanceof g||this.__im__ instanceof g){var e=this.__re__,t=this.__im__;var r,n;if(e instanceof g){r=e.toRational().mul(e.toRational())}else{r=e.mul(e)}if(t instanceof g){n=t.toRational().mul(t.toRational())}else{n=t.mul(t)}return r.add(n)}else{return this.__re__.mul(this.__re__).add(this.__im__.mul(this.__im__))}};y.prototype.modulus=function(){return this.factor().sqrt()};y.prototype.conjugate=function(){return y({re:this.__re__,im:this.__im__.sub()})};y.prototype.sqrt=function(){var e=this.modulus();var t,r;if(e.cmp(0)===0){t=r=e}else if(this.__re__.cmp(0)===1){t=g(.5).mul(e.add(this.__re__)).sqrt();r=this.__im__.div(t).div(2)}else{r=g(.5).mul(e.sub(this.__re__)).sqrt();if(this.__im__.cmp(0)===-1){r=r.sub()}t=this.__im__.div(r).div(2)}return y({im:r,re:t})};y.prototype.div=function(e){if(I.isNumber(e)&&!I.isComplex(e)){if(!(e instanceof I)){e=I(e)}var t=this.__re__.div(e);var r=this.__im__.div(e);return y({re:t,im:r})}else if(!I.isComplex(e)){throw new Error("[LComplex::div] Invalid value")}if(this.cmp(e)===0){var n=this.coerce(e),i=w(n,2),a=i[0],u=i[1];var o=a.__im__.div(u.__im__);return o.coerce(u.__re__)[0]}var s=this.coerce(e),c=w(s,2),f=c[0],l=c[1];var _=l.factor();var h=l.conjugate();var p=f.mul(h);if(!I.isComplex(p)){return p.div(_)}var d=p.__re__.op("/",_);var v=p.__im__.op("/",_);return y({re:d,im:v})};y.prototype.sub=function(e){return this.complex_op("sub",e,function(e,t,r,n){return{re:e.sub(t),im:r.sub(n)}})};y.prototype.mul=function(e){return this.complex_op("mul",e,function(e,t,r,n){var i={re:e.mul(t).sub(r.mul(n)),im:e.mul(n).add(t.mul(r))};return i})};y.prototype.complex_op=function(e,t,i){var a=this;var r=function e(t,r){var n=i(a.__re__,t,a.__im__,r);if("im"in n&&"re"in n){if(n.im.cmp(0)===0){return n.re}return y(n,true)}return n};if(typeof t==="undefined"){return r()}if(I.isNumber(t)&&!I.isComplex(t)){if(!(t instanceof I)){t=I(t)}var n=t.asType(0);t={__im__:n,__re__:t}}else if(!I.isComplex(t)){throw new Error("[LComplex::".concat(e,"] Invalid value"))}var u=t.__re__ instanceof I?t.__re__:this.__re__.asType(t.__re__);var o=t.__im__ instanceof I?t.__im__:this.__im__.asType(t.__im__);return r(u,o)};y._op={"+":"add","-":"sub","*":"mul","/":"div"};y.prototype._op=function(e,t){var r=y._op[e];return this[r](t)};y.prototype.cmp=function(e){var t=this.coerce(e),r=w(t,2),n=r[0],i=r[1];var a=n.__re__.coerce(i.__re__),u=w(a,2),o=u[0],s=u[1];var c=o.cmp(s);if(c!==0){return c}else{var f=n.__im__.coerce(i.__im__),l=w(f,2),_=l[0],h=l[1];return _.cmp(h)}};y.prototype.valueOf=function(){return[this.__re__,this.__im__].map(function(e){return e.valueOf()})};y.prototype.toString=function(){var e;if(this.__re__.cmp(0)!==0){e=[na(this.__re__)]}else{e=[]}var t=this.__im__.valueOf();var r=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY].includes(t);var n=na(this.__im__);if(!r&&!Number.isNaN(t)){var i=this.__im__.cmp(0);if(i<0||i===0&&this.__im__._minus){e.push("-")}else{e.push("+")}n=n.replace(/^-/,"")}e.push(n);e.push("i");return e.join("")};function g(e){if(typeof this!=="undefined"&&!(this instanceof g)||typeof this==="undefined"){return new g(e)}if(!I.isNumber(e)){throw new Error("Invalid constructor call for LFloat")}if(e instanceof I){return g(e.valueOf())}if(typeof e==="number"){if(Object.is(e,-0)){Object.defineProperty(this,"_minus",{value:true})}this.constant(e,"float")}}g.prototype=Object.create(I.prototype);g.prototype.constructor=g;g.prototype.toString=function(e){if(this.__value__===Number.NEGATIVE_INFINITY){return"-inf.0"}if(this.__value__===Number.POSITIVE_INFINITY){return"+inf.0"}if(Number.isNaN(this.__value__)){return"+nan.0"}e&&(e=e.valueOf());var t=this.__value__.toString(e);if(!t.match(/e[+-]?[0-9]+$/i)){var r=t.replace(/^-/,"");var n=this.__value__<0?"-":"";if(t.match(/^-?0\.0{3}/)){var i=r.match(/^[.0]+/g)[0].length-1;var a=r.replace(/^[.0]+/,"").replace(/^([0-9a-f])/i,"$1.");return"".concat(n).concat(a,"e-").concat(i.toString(e))}if(t.match(/^-?[0-9a-f]{7,}\.?/i)){var u=r.match(/^[0-9a-f]+/gi)[0].length-1;var o=r.replace(/\./,"").replace(/^([0-9a-f])/i,"$1.").replace(/0+$/,"").replace(/\.$/,".0");return"".concat(n).concat(o,"e+").concat(u.toString(e))}if(!I.isFloat(this.__value__)){var s=t+".0";return this._minus?"-"+s:s}}return t.replace(/^([0-9]+)e/,"$1.0e")};g.prototype._op=function(e,t){if(t instanceof I){t=t.__value__}var r=I._ops[e];if(e==="/"&&this.__value__===0&&t===0){return NaN}return g(r(this.__value__,t))};g.prototype.toRational=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){return zu(this.__value__.valueOf())}return $u(e.valueOf())(this.__value__.valueOf())};g.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=g(Math.sqrt(-e));return y({re:0,im:t})}return g(Math.sqrt(e))};g.prototype.abs=function(){var e=this.valueOf();if(e<0){e=-e}return g(e)};var zu=$u(1e-10);function $u(n){return function(e){var t=function e(n,t,r){var i=function e(t,r){return r<n?t:i(r,t%r)};if(Number.isNaN(t)||Number.isNaN(r)){return NaN}return i(Math.abs(t),Math.abs(r))},r=t(n?n:1/1e4,1,e);return b({num:Math.floor(e/r),denom:Math.floor(1/r)})}}function Vu(e,t){var r=e.sub(t);var n=e.add(t);var i;if(r.cmp(n)>0){i=Yu(n,r)}else if(n.cmp(r)<=0){i=r}else if(r.cmp(0)>0){i=Yu(r,n)}else if(t.cmp(0)<0){i=I(Yu(n.sub(),r.sub())).sub()}else{i=I(0)}if(I.isFloat(t)||I.isFloat(e)){return g(i)}return i}function Yu(e,t){var r=I(e).floor();var n=I(t).floor();if(e.cmp(r)<1){return r}else if(r.cmp(n)===0){var i=I(1).div(t.sub(n));var a=I(1).div(e.sub(r));return r.add(I(1).div(Yu(i,a)))}else{return r.add(I(1))}}function b(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof b)||typeof this==="undefined"){return new b(e,t)}if(!I.isRational(e)){throw new Error("Invalid constructor call for LRational")}var r,n;if(e instanceof b){r=I(e.__num__);n=I(e.__denom__)}else{r=I(e.num);n=I(e.denom)}if(!t&&n.cmp(0)!==0){var i=r.op("%",n).cmp(0)===0;if(i){return I(r.div(n))}}this.constant(r,n)}b.prototype=Object.create(I.prototype);b.prototype.constructor=b;b.prototype.constant=function(e,t){du(this,"__num__",e);du(this,"__denom__",t);du(this,"__type__","rational")};b.prototype.serialize=function(){return{num:this.__num__,denom:this.__denom__}};b.prototype.pow=function(e){if(I.isRational(e)){return I(qu(this.valueOf(),e.valueOf()))}var t=e.cmp(0);if(t===0){return I(1)}if(t===-1){e=e.sub();var r=this.__denom__.pow(e);var n=this.__num__.pow(e);return b({num:r,denom:n})}var i=this;e=e.valueOf();while(e>1){i=i.mul(this);e--}return i};b.prototype.sqrt=function(){var e=this.__num__.sqrt();var t=this.__denom__.sqrt();if(e instanceof g||t instanceof g){return e.div(t)}return b({num:e,denom:t})};b.prototype.quotient=function(){var e=this.__num__;var t=this.__denom__;if(I.isNative(e)&&I.isNative(t)){if(t.cmp(0)===0){throw new Error("quotient: division by zero")}var r=e/t;if(I.isBigInteger(r)){return r}if(r>0){return Math.floor(r)}else{return Math.ceil(r)}}throw new Error("quotient: Invalid argument")};b.prototype.abs=function(){var e=this.__num__;var t=this.__denom__;if(e.cmp(0)===-1){e=e.sub()}if(t.cmp(0)!==1){t=t.sub()}return b({num:e,denom:t})};b.prototype.cmp=function(e){return I(this.valueOf(),true).cmp(e)};b.prototype.toString=function(){var e=this.__num__.gcd(this.__denom__);var t,r;if(e.cmp(1)!==0){t=this.__num__.div(e);if(t instanceof b){t=I(t.valueOf(true))}r=this.__denom__.div(e);if(r instanceof b){r=I(r.valueOf(true))}}else{t=this.__num__;r=this.__denom__}var n=this.cmp(0)<0;if(n){if(t.abs().cmp(r.abs())===0){return t.toString()}}else if(t.cmp(r)===0){return t.toString()}return t.toString()+"/"+r.toString()};b.prototype.valueOf=function(e){if(this.__denom__.cmp(0)===0){if(this.__num__.cmp(0)<0){return Number.NEGATIVE_INFINITY}return Number.POSITIVE_INFINITY}if(e){var t=this.__num__.__value__;var r=this.__denom__.__value__;if(I.isNative(t)&&I.isNative(r)){return I._ops["/"](t,r)}}return g(this.__num__.valueOf()).div(this.__denom__.valueOf())};b.prototype.mul=function(e){if(!(e instanceof I)){e=I(e)}if(I.isRational(e)){var t=this.__num__.mul(e.__num__);var r=this.__denom__.mul(e.__denom__);return b({num:t,denom:r})}var n=I.coerce(this,e),i=w(n,2),a=i[0],u=i[1];return a.mul(u)};b.prototype.div=function(e){if(!(e instanceof I)){e=I(e)}if(I.isRational(e)){var t=this.__num__.mul(e.__denom__);var r=this.__denom__.mul(e.__num__);return b({num:t,denom:r})}var n=I.coerce(this,e),i=w(n,2),a=i[0],u=i[1];var o=a.div(u);return o};b.prototype._op=function(e,t){return this[Ru[e]](t)};b.prototype.sub=function(e){if(typeof e==="undefined"){return this.mul(-1)}if(!(e instanceof I)){e=I(e)}if(I.isRational(e)){var t=e.__num__.sub();var r=e.__denom__;return this.add(b({num:t,denom:r}))}if(!(e instanceof I)){e=I(e).sub()}else{e=e.sub()}var n=I.coerce(this,e),i=w(n,2),a=i[0],u=i[1];return a.add(u)};b.prototype.add=function(e){if(!(e instanceof I)){e=I(e)}if(I.isRational(e)){var t=this.__denom__;var r=e.__denom__;var n=this.__num__;var i=e.__num__;var a,u;if(t!==r){u=r.mul(n).add(i.mul(t));a=t.mul(r)}else{u=n.add(i);a=t}return b({num:u,denom:a})}if(I.isFloat(e)){return g(this.valueOf()).add(e)}var o=I.coerce(this,e),s=w(o,2),c=s[0],f=s[1];return c.add(f)};function E(e,t){if(typeof this!=="undefined"&&!(this instanceof E)||typeof this==="undefined"){return new E(e,t)}if(e instanceof E){return E(e.__value__,e._native)}if(!I.isBigInteger(e)){throw new Error("Invalid constructor call for LBigInteger")}this.constant(e,"bigint");Object.defineProperty(this,"_native",{value:t})}E.prototype=Object.create(I.prototype);E.prototype.constructor=E;E.bn_op={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};E.prototype.serialize=function(){return this.__value__.toString()};E.prototype._op=function(e,t){if(typeof t==="undefined"){if(I.isBN(this.__value__)){e=E.bn_op[e];return E(this.__value__.clone()[e](),false)}return E(I._ops[e](this.__value__),true)}if(I.isBN(this.__value__)&&I.isBN(t.__value__)){e=E.bn_op[e];return E(this.__value__.clone()[e](t),false)}var r=I._ops[e](this.__value__,t.__value__);if(e==="/"){var n=this.op("%",t).cmp(0)===0;if(n){return I(r)}return b({num:this,denom:t})}return E(r,true)};E.prototype.sqrt=function(){var e;var t=this.cmp(0)<0;if(I.isNative(this.__value__)){e=I(Math.sqrt(t?-this.valueOf():this.valueOf()))}else if(I.isBN(this.__value__)){e=t?this.__value__.neg().sqrt():this.__value__.sqrt()}if(t){return y({re:0,im:e})}return e};I.NaN=I(NaN);y.i=y({im:1,re:0});function Ju(e){var n=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:se;if(typeof this!=="undefined"&&!(this instanceof Ju)||typeof this==="undefined"){return new Ju(e)}F("InputPort",e,"function");c(this,"__type__",ao);var a;Object.defineProperty(this,"__parser__",{enumerable:true,get:function e(){return a},set:function e(t){F("InputPort::__parser__",t,"parser");a=t}});this._read=e;this._with_parser=this._with_init_parser.bind(this,V(O.mark(function e(){var r;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(n.char_ready()){t.next=6;break}t.next=3;return n._read();case 3:r=t.sent;a=new ni({env:i});a.prepare(r);case 6:return t.abrupt("return",n.__parser__);case 7:case"end":return t.stop()}},e)})));this.char_ready=function(){return!!this.__parser__&&this.__parser__.__lexer__.peek()!==uo};this._make_defaults()}Ju.prototype._make_defaults=function(){this.read=this._with_parser(function(e){return e.read_object()});this.read_line=this._with_parser(function(e){return e.__lexer__.read_line()});this.read_char=this._with_parser(function(e){return e.__lexer__.read_char()});this.read_string=this._with_parser(function(e,t){if(!I.isInteger(t)){var r=I.getType(t);No("read-string",r,"integer")}return e.__lexer__.read_string(t.valueOf())});this.peek_char=this._with_parser(function(e){return e.__lexer__.peek_char()})};Ju.prototype._with_init_parser=function(o,s){var c=this;return V(O.mark(function e(){var r,n,i,a,u=arguments;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.call(c);case 2:r=t.sent;for(n=u.length,i=new Array(n),a=0;a<n;a++){i[a]=u[a]}return t.abrupt("return",s.apply(void 0,[r].concat(i)));case 5:case"end":return t.stop()}},e)}))};Ju.prototype.is_open=function(){return this._with_parser!==null};Ju.prototype.close=function(){var t=this;this.__parser__=null;this._with_parser=null;["read","close","read_char","peek-char","read_line"].forEach(function(e){t[e]=function(){throw new Error("input-port: port is closed")}});this.char_ready=function(){return false}};Ju.prototype.toString=function(){return"#<input-port>"};function Ku(e){if(typeof this!=="undefined"&&!(this instanceof Ku)||typeof this==="undefined"){return new Ku(e)}F("OutputPort",e,"function");c(this,"__type__",ao);this.write=e}Ku.prototype.is_open=function(){return this._closed!==true};Ku.prototype.close=function(){Object.defineProperty(this,"_closed",{get:function e(){return true},set:function e(){},configurable:false,enumerable:false});this.write=function(){throw new Error("output-port: port is closed")}};Ku.prototype.flush=function(){};Ku.prototype.toString=function(){return"#<output-port>"};var Wu=function(e){function r(e){var t;Y(this,r);t=xr(this,r,[function(){var e;return(e=t)._write.apply(e,arguments)}]);F("BufferedOutputPort",e,"function");c(t,"_fn",e,{hidden:true});c(t,"_buffer",[],{hidden:true});return t}M(r,e);return H(r,[{key:"flush",value:function e(){if(this._buffer.length){this._fn(this._buffer.join(""));this._buffer.length=0}}},{key:"_write",value:function e(){var t=this;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}if(n.length){n.forEach(function(e){t._buffer.push(e)});var a=this._buffer[this._buffer.length-1];if(a.match(/\n$/)){this._buffer[this._buffer.length-1]=a.replace(/\n$/,"");this.flush()}}}}])}(Ku);function Hu(t){var r=this;if(typeof this!=="undefined"&&!(this instanceof Hu)||typeof this==="undefined"){return new Hu(t)}F("OutputStringPort",t,"function");c(this,"__type__",ao);c(this,"__buffer__",[]);this.write=function(e){if(!x.isString(e)){e=t(e)}else{e=e.valueOf()}r.__buffer__.push(e)}}Hu.prototype=Object.create(Ku.prototype);Hu.prototype.constructor=Hu;Hu.prototype.toString=function(){return"#<output-port (string)>"};Hu.prototype.valueOf=function(){return this.__buffer__.map(function(e){return e.valueOf()}).join("")};function Gu(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof Gu)||typeof this==="undefined"){return new Gu(e,t)}F("OutputFilePort",e,"string");c(this,"__filename__",e);c(this,"_fd",t.valueOf(),{hidden:true});c(this,"__type__",ao);this.write=function(e){if(!x.isString(e)){e=na(e)}else{e=e.valueOf()}r.fs().write(r._fd,e,function(e){if(e){throw e}})}}Gu.prototype=Object.create(Ku.prototype);Gu.prototype.constructor=Gu;Gu.prototype.fs=function(){if(!this._fs){this._fs=this.internal("fs")}return this._fs};Gu.prototype.internal=function(e){return xo.get("**internal-env**").get(e)};Gu.prototype.close=function(){var n=this;return new Promise(function(t,r){n.fs().close(n._fd,function(e){if(e){r(e)}else{c(n,"_fd",null,{hidden:true});Ku.prototype.close.call(n);t()}})})};Gu.prototype.toString=function(){return"#<output-port ".concat(this.__filename__,">")};function Qu(e){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:se;if(typeof this!=="undefined"&&!(this instanceof Qu)||typeof this==="undefined"){return new Qu(e)}F("InputStringPort",e,"string");e=e.valueOf();this._with_parser=this._with_init_parser.bind(this,function(){if(!t.__parser__){t.__parser__=new ni({env:r});t.__parser__.prepare(e)}return t.__parser__});c(this,"__type__",ao);this._make_defaults()}Qu.prototype.char_ready=function(){return true};Qu.prototype=Object.create(Ju.prototype);Qu.prototype.constructor=Qu;Qu.prototype.toString=function(){return"#<input-port (string)>"};function Zu(e){if(typeof this!=="undefined"&&!(this instanceof Zu)||typeof this==="undefined"){return new Zu(e)}this._with_parser=this._with_init_parser.bind(this,function(){return e});c(this,"__type__",ao);this._make_defaults()}Zu.prototype.char_ready=function(){return true};Zu.prototype=Object.create(Ju.prototype);Zu.prototype.constructor=Zu;Zu.prototype.toString=function(){return"#<input-port (parser)>"};function Xu(e){if(typeof this!=="undefined"&&!(this instanceof Xu)||typeof this==="undefined"){return new Xu(e)}F("InputByteVectorPort",e,"uint8array");c(this,"__vector__",e);c(this,"__type__",io);var r=0;Object.defineProperty(this,"__index__",{enumerable:true,get:function e(){return r},set:function e(t){F("InputByteVectorPort::__index__",t,"number");if(t instanceof I){t=t.valueOf()}if(typeof t==="bigint"){t=Number(t)}if(Math.floor(t)!==t){throw new Error("InputByteVectorPort::__index__ value is "+"not integer")}r=t}})}Xu.prototype=Object.create(Ju.prototype);Xu.prototype.constructor=Xu;Xu.prototype.toString=function(){return"#<input-port (bytevector)>"};Xu.prototype.close=function(){var t=this;c(this,"__vector__",ie);var r=function e(){throw new Error("Input-binary-port: port is closed")};["read_u8","close","peek_u8","read_u8_vector"].forEach(function(e){t[e]=r});this.u8_ready=this.char_ready=function(){return false}};Xu.prototype.u8_ready=function(){return true};Xu.prototype.peek_u8=function(){if(this.__index__>=this.__vector__.length){return uo}return this.__vector__[this.__index__]};Xu.prototype.skip=function(){if(this.__index__<=this.__vector__.length){++this.__index__}};Xu.prototype.read_u8=function(){var e=this.peek_u8();this.skip();return e};Xu.prototype.read_u8_vector=function(e){if(typeof e==="undefined"){e=this.__vector__.length}else if(e>this.__index__+this.__vector__.length){e=this.__index__+this.__vector__.length}if(this.peek_u8()===uo){return uo}return this.__vector__.slice(this.__index__,e)};function eo(){if(typeof this!=="undefined"&&!(this instanceof eo)||typeof this==="undefined"){return new eo}c(this,"__type__",io);c(this,"_buffer",[],{hidden:true});this.write=function(e){F("write",e,["number","uint8array"]);if(I.isNumber(e)){this._buffer.push(e.valueOf())}else{var t;(t=this._buffer).push.apply(t,ee(Array.from(e)))}};Object.defineProperty(this,"__buffer__",{enumerable:true,get:function e(){return Uint8Array.from(this._buffer)}})}eo.prototype=Object.create(Ku.prototype);eo.prototype.constructor=eo;eo.prototype.close=function(){Ku.prototype.close.call(this);c(this,"_buffer",null,{hidden:true})};eo.prototype._close_guard=function(){if(this._closed){throw new Error("output-port: binary port is closed")}};eo.prototype.write_u8=function(e){F("OutputByteVectorPort::write_u8",e,"number");this.write(e)};eo.prototype.write_u8_vector=function(e){F("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};eo.prototype.toString=function(){return"#<output-port (bytevector)>"};eo.prototype.valueOf=function(){return this.__buffer__};function to(e,t){if(typeof this!=="undefined"&&!(this instanceof to)||typeof this==="undefined"){return new to(e,t)}Qu.call(this,e);F("InputFilePort",t,"string");c(this,"__filename__",t)}to.prototype=Object.create(Qu.prototype);to.prototype.constructor=to;to.prototype.toString=function(){return"#<input-port (".concat(this.__filename__,")>")};function ro(e,t){if(typeof this!=="undefined"&&!(this instanceof ro)||typeof this==="undefined"){return new ro(e,t)}Xu.call(this,e);F("InputBinaryFilePort",t,"string");c(this,"__filename__",t)}ro.prototype=Object.create(Xu.prototype);ro.prototype.constructor=ro;ro.prototype.toString=function(){return"#<input-binary-port (".concat(this.__filename__,")>")};function no(e,t){var i=this;if(typeof this!=="undefined"&&!(this instanceof no)||typeof this==="undefined"){return new no(e,t)}F("OutputBinaryFilePort",e,"string");c(this,"__filename__",e);c(this,"_fd",t.valueOf(),{hidden:true});c(this,"__type__",io);var a;this.write=function(e){F("write",e,["number","uint8array"]);var n;if(!a){a=i.internal("fs")}if(I.isNumber(e)){n=new Uint8Array([e.valueOf()])}else{n=new Uint8Array(Array.from(e))}return new Promise(function(t,r){a.write(i._fd,n,function(e){if(e){r(e)}else{t()}})})}}no.prototype=Object.create(Gu.prototype);no.prototype.constructor=no;no.prototype.write_u8=function(e){F("OutputByteVectorPort::write_u8",e,"number");this.write(e)};no.prototype.write_u8_vector=function(e){F("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};var io=Symbol["for"]("binary");var ao=Symbol["for"]("text");var uo=new oo;function oo(){}oo.prototype.toString=function(){return"#<eof>"};function so(e){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.stderr,i=r.stdin,a=r.stdout,u=r.command_line,o=u===void 0?null:u,s=Z(r,pr);if(typeof this!=="undefined"&&!(this instanceof so)||typeof this==="undefined"){return new so(e,te({stdin:i,stdout:a,stderr:n,command_line:o},s))}if(typeof e==="undefined"){e="anonymous"}this.__env__=xo.inherit(e,s);this.__parser__=new ni({env:this.__env__});this.__env__.set("parent.frame",l("parent.frame",function(){return t.__env__},se.__env__["parent.frame"].__doc__));var c="**interaction-environment-defaults**";this.set(c,Zi(s).concat(c));var f=bo.inherit("internal-".concat(e));if(ru(i)){f.set("stdin",i)}if(ru(n)){f.set("stderr",n)}if(ru(a)){f.set("stdout",a)}f.set("command-line",o);Eo(this.__env__,f)}so.prototype.exec=function(){var t=V(function(s){var c=this;var f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return O.mark(function e(){var r,n,i,a,u,o;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=f.use_dynamic,n=r===void 0?false:r,i=f.dynamic_env,a=f.env;F("Interpreter::exec",s,["string","array"],1);F("Interpreter::exec",n,"boolean",2);if(!a){a=c.__env__}if(!i){i=a}se.set("**interaction-environment**",c.__env__);if(!Array.isArray(s)){t.next=10;break}return t.abrupt("return",ts(s,{env:a,dynamic_env:i,use_dynamic:n}));case 10:t.prev=10;c.__parser__.prepare(s);t.next=14;return ts(c.__parser__,{env:a,dynamic_env:i,use_dynamic:n});case 14:return t.abrupt("return",t.sent);case 17:t.prev=17;t.t0=t["catch"](10);if(!((u=t.t0.message)!==null&&u!==void 0&&u.includes("at line"))){o=" at line ".concat(c.__parser__.get_line()+1);t.t0.message+=o}throw t.t0;case 21:case"end":return t.stop()}},e,null,[[10,17]])})()});return function(e){return t.apply(this,arguments)}}();so.prototype.get=function(e){var t=this.__env__.get(e);if(d(t)){var r=new Qo({env:this.__env__});return t.bind(r)}return t};so.prototype.set=function(e,t){return this.__env__.set(e,t)};so.prototype.constant=function(e,t){return this.__env__.constant(e,t)};function co(e,t){this.name="LipsError";this.message=e;this.args=t;this.stack=(new Error).stack}co.prototype=new Error;co.prototype.constructor=co;var fo=function(e){function t(){Y(this,t);return xr(this,t,arguments)}M(t,e);return H(t)}(z(Error));function s(e,t,r){if(arguments.length===1){if(h(arguments[0])==="object"){e=arguments[0];t=null}else if(typeof arguments[0]==="string"){e={};t=null;r=arguments[0]}}this.__docs__=new Map;this.__env__=e;this.__parent__=t;this.__name__=r||"anonymous"}s.prototype.list=function(){return Zi(this.__env__)};s.prototype.fs=function(){return this.get("**fs**")};s.prototype.unset=function(e){if(e instanceof ne){e=e.valueOf()}if(e instanceof x){e=e.valueOf()}delete this.__env__[e]};s.prototype.inherit=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(h(e)==="object"){t=e}if(!e||h(e)==="object"){e="child of "+(this.__name__||"unknown")}return new s(t||{},this,e)};s.prototype.doc=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof ne){e=e.__name__}if(e instanceof x){e=e.valueOf()}if(t){if(!r){t=hi(t)}this.__docs__.set(e,t);return this}if(this.__docs__.has(e)){return this.__docs__.get(e)}if(this.__parent__){return this.__parent__.doc(e)}};s.prototype.new_frame=function(e,t){var n=this.inherit("__frame__");n.set("parent.frame",l("parent.frame",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;e=e.valueOf();var t=n.__parent__;if(!Ta(t)){return ie}if(e<=0){return t}var r=t.get("parent.frame");return r(e-1)},se.__env__["parent.frame"].__doc__));t.callee=e;n.set("arguments",t);return n};s.prototype._lookup=function(e){if(e instanceof ne){e=e.__name__}if(e instanceof x){e=e.valueOf()}if(this.__env__.hasOwnProperty(e)){return lo(this.__env__[e])}if(this.__parent__){return this.__parent__._lookup(e)}};s.prototype.toString=function(){return"#<environment:"+this.__name__+">"};s.prototype.clone=function(){var t=this;var r={};Object.keys(this.__env__).forEach(function(e){r[e]=t.__env__[e]});return new s(r,this.__parent__,this.__name__)};s.prototype.merge=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"merge";F("Environment::merge",e,"environment");return this.inherit(t,e.__env__)};function lo(e){if(typeof this!=="undefined"&&!(this instanceof lo)||typeof this==="undefined"){return new lo(e)}this.value=e}lo.isUndefined=function(e){return e instanceof lo&&typeof e.value==="undefined"};lo.prototype.valueOf=function(){return this.value};function _o(e){if(!e.length){return}if(e.length===1){return e[0]}if(typeof this!=="undefined"&&!(this instanceof _o)||typeof this==="undefined"){return new _o(e)}this.__values__=e}_o.prototype.toString=function(){return this.__values__.map(function(e){return na(e)}).join("\n")};_o.prototype.valueOf=function(){return this.__values__};s.prototype.get=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};F("Environment::get",e,["symbol","string"]);var r=t.throwError,n=r===void 0?true:r;var i=e;if(i instanceof ne||i instanceof x){i=i.valueOf()}var a=this._lookup(i);if(a instanceof lo){if(lo.isUndefined(a)){return undefined}return Ga(a.valueOf())}var u;if(e instanceof ne&&e[ne.object]){u=e[ne.object]}else if(typeof i==="string"){u=i.split(".").filter(Boolean)}if(u&&u.length>0){var o=u,s=U(o),c=s[0],f=s.slice(1);a=this._lookup(c);if(f.length){try{if(a instanceof lo){a=a.valueOf()}else{a=vo(jr,c);if(d(a)){a=Qa(a)}}if(typeof a!=="undefined"){return vo.apply(void 0,[a].concat(ee(f)))}}catch(e){throw e}}else if(a instanceof lo){return Ga(a.valueOf())}a=vo(jr,i)}if(typeof a!=="undefined"){return a}if(n){throw new Error("Unbound variable `"+i.toString()+"'")}};s.prototype.set=function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;F("Environment::set",e,["string","symbol"]);if(I.isNumber(t)){t=I(t)}if(e instanceof ne){e=e.__name__}if(e instanceof x){e=e.valueOf()}this.__env__[e]=t;if(r){this.doc(e,r,true)}return this};s.prototype.constant=function(t,e){var r=this;if(this.__env__.hasOwnProperty(t)){throw new Error("Environment::constant: ".concat(t," already exists"))}if(arguments.length===1&&Vi(arguments[0])){var n=arguments[0];Object.keys(n).forEach(function(e){r.constant(t,n[e])})}else{du(this.__env__,t,e)}return this};s.prototype.has=function(e){return this.__env__.hasOwnProperty(e)};s.prototype.ref=function(e){var t=this;while(true){if(!t){break}if(t.has(e)){return t}t=t.__parent__}};s.prototype.parents=function(){var e=this;var t=[];while(e){t.unshift(e);e=e.__parent__}return t};function ho(e){if(Ra(e)){return e.then(ho)}if(oe(e)||e instanceof ne){e[uu]=true}return e}var po=ui(Nn('(lambda ()\n                                        "[native code]"\n                                        (throw "Invalid Invocation"))'))[0];var vo=l("get",function e(t){var r;for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++){i[a-1]=arguments[a]}var u=i.length;while(i.length){if(d(t)&&h(i[0])!=="symbol"){t=Qa(t)}var o=i.shift();var s=Ha(o);if(s==="then"&&t instanceof zn){r=zn.prototype.then}else if(s==="__code__"&&d(t)&&typeof t.__code__==="undefined"){r=po}else{r=t[s]}if(typeof r==="undefined"){if(i.length){throw new Error("Try to get ".concat(i[0]," from undefined"))}return r}else{var c;if(i.length-1<u){c=t}r=Ga(r,c)}t=r}return r},"(. obj . args)\n    (get obj . args)\n\n    This function uses an object as a base and keeps using arguments to get the\n    property of JavaScript object. Arguments need to be a strings.\n    e.g. `(. console \"log\")` if you use any function inside LIPS it\n    will be weakly bound (can be rebound), so you can call this log function\n    without problem unlike in JavaScript when you use\n    `var log = console.log`.\n    `get` is an alias because . doesn't work everywhere, e.g. you can't\n    pass it as an argument.");function mo(e){return go(e,"**internal-env**")}function yo(e,t){var r=mo(e);return r.get(t)}function go(e,t){var r=e.get("**interaction-environment**");return r.get(t)}var bo=new s({stdout:new Wu(function(){var e;(e=console).log.apply(e,arguments)}),stderr:new Wu(function(){var e;(e=console).error.apply(e,arguments)}),"command-line":[],stdin:Ju(function(){return Promise.resolve(prompt(""))}),"letter-unicode-regex":/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/,"numeral-unicode-regex":/(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDD40-\uDD49\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDED0-\uDEE3\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59\uDFF0-\uDFF9]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDF50-\uDF59\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD818[\uDD30-\uDD39]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDD70-\uDD79\uDE80-\uDE96]|\uD833[\uDCF0-\uDCF9]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD839[\uDCF0-\uDCF9\uDDF1-\uDDFA]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])/,"space-unicode-regex":/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/},undefined,"internal");var wo=I(NaN);var Do=te({"#t":true,"#f":false,"#true":true,"#false":false,"+inf.0":Number.POSITIVE_INFINITY,"-inf.0":Number.NEGATIVE_INFINITY,"+nan.0":wo,"-nan.0":wo},Xn);var se=new s({eof:uo,undefined:undefined,"peek-char":l("peek-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=yo(this,"stdin")}Ro("peek-char",e,"input-port");return e.peek_char()},"(peek-char port)\n\n        This function reads and returns a character from the string\n        port, or, if there is no more data in the string port, it\n        returns an EOF."),"read-line":l("read-line",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=yo(this,"stdin")}Ro("read-line",e,"input-port");return e.read_line()},"(read-line port)\n\n        This function reads and returns the next line from the input\n        port."),"read-char":l("read-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=yo(this,"stdin")}Ro("read-char",e,"input-port");return e.read_char()},"(read-char port)\n\n        This function reads and returns the next character from the\n        input port."),read:l("read",function(){var e=V(function(){var i=this;var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return O.mark(function e(){var r,n;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=i.env;if(a===null){n=yo(r,"stdin")}else{n=a}Ro("read",n,"input-port");return t.abrupt("return",n.read.call(r));case 4:case"end":return t.stop()}},e)})()});function t(){return e.apply(this,arguments)}return t}(),"(read [port])\n\n        This function, if called with a port, it will parse the next\n        item from the port. If called without an input, it will read\n        a string from standard input (using the browser's prompt or\n        a user defined input method) and parse it. This function can be\n        used together with `eval` to evaluate code from port."),pprint:l("pprint",function e(t){if(oe(t)){t=new Ls.Formatter(t.toString(true))["break"]().format();se.get("display").call(se,t)}else{se.get("write").call(se,t)}se.get("newline").call(se)},"(pprint expression)\n\n        This function will pretty print its input to stdout. If it is called\n        with a non-list, it will just call the print function on its\n        input."),print:l("print",function e(){var t=se.get("display");var r=se.get("newline");var n=this.use_dynamic;var i=se;var a=se;for(var u=arguments.length,o=new Array(u),s=0;s<u;s++){o[s]=arguments[s]}o.forEach(function(e){Ko(t,[e],{env:i,dynamic_env:a,use_dynamic:n});Ko(r,[],{env:i,dynamic_env:a,use_dynamic:n})})},"(print . args)\n\n        This function converts each input into a string and prints\n        the result to the standard output (by default it's the\n        console but it can be defined in user code). This function\n        calls `(newline)` after printing each input."),format:l("format",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}F("format",t,"string");var a=/(~[as%~])/g;var u=t.match(/(~[as])/g);if(u&&u.length>n.length){throw new Error("Not enough arguments")}var o=0;var s=se.get("repr");t=t.replace(a,function(e){var t=e[1];if(t==="~"){return"~"}else if(t==="%"){return"\n"}else{var r=n[o++];if(t==="a"){return s(r)}else{return s(r,true)}}});u=t.match(/~([\S])/);if(u){throw new Error("format: Unrecognized escape sequence ".concat(u[1]))}return t},"(format string n1 n2 ...)\n\n        This function accepts a string template and replaces any\n        escape sequences in its inputs:\n\n        * ~a value as if printed with `display`\n        * ~s value as if printed with `write`\n        * ~% newline character\n        * ~~ literal tilde '~'\n\n        If there are missing inputs or other escape characters it\n        will error."),newline:l("newline",function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var r=se.get("display");var n=this.use_dynamic;var i=se;var a=se;Ko(r,["\n",t],{env:i,dynamic_env:a,use_dynamic:n})},"(newline [port])\n\n        Write newline character to standard output or given port"),display:l("display",function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(r===null){r=yo(this,"stdout")}else{F("display",r,"output-port")}var n=t;if(!(r instanceof no)){n=se.get("repr")(t)}r.write.call(se,n)},"(display string [port])\n\n        This function outputs the string to the standard output or\n        the port if given. No newline."),"display-error":l("display-error",function e(){var t=yo(this,"stderr");var r=se.get("repr");for(var n=arguments.length,i=new Array(n),a=0;a<n;a++){i[a]=arguments[a]}var u=i.map(r).join(" ");t.write.call(se,u);se.get("newline").call(this,t)},"(display-error . args)\n\n        Display an error message on stderr."),"%foldcase-string":l("%foldcase-string",Mi,"(%foldcase-string string)\n\n         Same as string-foldcase but without typechecking"),"%same-functions":l("%same-functions",function(e,t){if(!d(e)){return false}if(!d(t)){return false}return Qa(e)===Qa(t)},"(%same-functions a b)\n\n        A helper function that checks if the two input functions are\n        the same."),help:l(new q("help",function(e,t){var r=t.dynamic_env,n=t.use_dynamic,i=t.error;var a;if(e.car instanceof ne){a=e.car}else if(oe(e.car)&&e.car.car instanceof ne){a=e.car.car}else{var u=this;r=this;var o=A(e.car,{env:u,error:i,dynamic_env:r,use_dynamic:n});if(o&&o.__doc__){return o.__doc__}return}var s;var c=this.get(a);s=c&&c.__doc__;if(s){return s}var f=this.ref(a);if(f){s=f.doc(a);if(s){return s}}}),"(help object)\n\n         This macro returns documentation for a function, macro, or a variable."),cons:l("cons",function e(t,r){return new ae(t,r)},"(cons left right)\n\n        This function returns a new list with the first appended\n        before the second. If the second is not a list cons will\n        return a dotted pair."),car:l("car",function e(t){F("car",t,"pair");return t.car},"(car pair)\n\n        This function returns the car (item 1) of the list."),cdr:l("cdr",function e(t){F("cdr",t,"pair");return t.cdr},"(cdr pair)\n\n        This function returns the cdr (all but first) of the list."),"set!":l(new q("set!",function(e){var a=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.use_dynamic,n=Z(t,dr);var i=this;var u=this;var o;var s=te(te({},n),{},{env:this,dynamic_env:i,use_dynamic:r});var c=A(e.cdr.car,s);c=zo(c);function f(t,r,n){if(Ra(t)){return t.then(function(e){return f(t,e,n)})}if(Ra(r)){return r.then(function(e){return f(t,e,n)})}if(Ra(n)){return n.then(function(e){return f(t,r,e)})}u.get("set-obj!").call(u,t,r,n);return n}if(oe(e.car)&&ne.is(e.car.car,".")){var l=e.car.cdr.car;var _=e.car.cdr.cdr.car;var h=A(l,s);var p=A(_,s);return f(h,p,c)}if(!(e.car instanceof ne)){throw new Error("set! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var d=e.car.valueOf();o=this.ref(e.car.__name__);return D(c,function(e){if(!o){var t=d.split(".");if(t.length>1){var r=t.pop();var n=t.join(".");var i=a.get(n,{throwError:false});if(i){f(i,r,e);return}}throw new Error("Unbound variable `"+d+"'")}o.set(d,e)})}),"(set! name value)\n\n         Macro that can be used to set the value of the variable or slot (mutate it).\n         set! searches the scope chain until it finds first non empty slot and sets it."),"unset!":l(new q("set!",function(e){if(!(e.car instanceof ne)){throw new Error("unset! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var t=e.car;var r=this.ref(t);if(r){delete r.__env__[t.__name__]}}),"(unset! name)\n\n         Function to delete the specified name from environment.\n         Trying to access the name afterwards will error."),"set-car!":l("set-car!",function(e,t){F("set-car!",e,"pair");e.car=t},"(set-car! obj value)\n\n         Function that sets the car (first item) of the list/pair to specified value.\n         The old value is lost."),"set-cdr!":l("set-cdr!",function(e,t){F("set-cdr!",e,"pair");e.cdr=t},"(set-cdr! obj value)\n\n         Function that sets the cdr (tail) of the list/pair to specified value.\n         It will destroy the list. The old tail is lost."),"empty?":l("empty?",function(e){return typeof e==="undefined"||ue(e)},"(empty? object)\n\n         Function that returns #t if value is nil (an empty list) or undefined."),gensym:l("gensym",qn,"(gensym)\n\n         Generates a unique symbol that is not bound anywhere,\n         to use with macros as meta name."),load:l("load",function e(c,t){F("load",c,"string");var f=this;if(f.__name__==="__frame__"){f=f.__parent__}if(!(t instanceof s)){if(f===se){t=f}else{t=this.get("**interaction-environment**")}}var l="@lips";var _=c.startsWith(l);var h="**module-path**";var p=se.get(h,{throwError:false});c=c.valueOf();if(!c.match(/.[^.]+$/)){c+=".scm"}var r=c.match(/\.xcb$/);function d(e){if(r){e=Os(e)}else{if(Uo(e)==="buffer"){e=e.toString()}e=e.replace(/^(#!.*)/,function(e,t){if(Fa(t)){return t}return""});if(e.match(/^\{/)){e=Ds(e)}}return ts(e,{env:t})}function n(e){return jr.fetch(e).then(function(e){return r?e.arrayBuffer():e.text()}).then(function(e){if(r){e=new Uint8Array(e)}return e})}function v(){var e=se.get("__dirname");return e.replace(/[^/]+$/,"")}if(So()){return new Promise(function(){var r=V(O.mark(function e(r,n){var i,a,u,o,s;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return Po;case 3:i=Tr("path");a=Tr("fs");u=v();if(_){c=c.replace(l,u)}if(!p){t.next=12;break}p=p.valueOf();if(!c.startsWith("/")){c=i.join(p,c)}t.next=19;break;case 12:if(c.startsWith("/")){t.next=19;break}o=f.get("command-line",{throwError:false});if(!o){t.next=18;break}t.next=17;return o();case 17:s=t.sent;case 18:if(s&&!ue(s)){process.cwd();c=i.join(i.dirname(s.car.valueOf()),c)}case 19:se.set(h,i.dirname(c));a.readFile(c,function(e,t){if(e){n(e);se.set(h,p)}else{try{d(t).then(function(){r();se.set(h,p)})["catch"](n)}catch(e){n(e)}}});t.next=26;break;case 23:t.prev=23;t.t0=t["catch"](0);console.error(t.t0);case 26:case"end":return t.stop()}},e,null,[[0,23]])}));return function(e,t){return r.apply(this,arguments)}}())}if(_){var i,a;var u=(i=se.get("__dirname",{throwError:false}))!==null&&i!==void 0?i:ss;(a=u)!==null&&a!==void 0?a:u=ss;var o=u.replace(/dist\/?[^\/]*$/,"");c=c.replace(l,o)}if(p){p=p.valueOf();if(!c.startsWith("/")){c=p+"/"+c.replace(/^\.?\/?/,"")}}return n(c).then(function(e){se.set(h,c.replace(/\/[^/]*$/,""));return d(e)}).then(function(){})["finally"](function(){se.set(h,p)})},"(load filename)\n        (load filename environment)\n\n        Fetches the file (from disk or network) and evaluates its content as LIPS code.\n        If the second argument is provided and it's an environment the evaluation\n        will happen in that environment."),while:l(new q("while",function(e,t){var r=e.car;var n=te(te({},t),{},{env:this});var i=new ae(new ne("begin"),e.cdr);return function t(){return D(A(r,n),function(e){if(e){return D(A(i,n),t)}})}()}),"(while cond body)\n\n         Creates a loop, it executes cond and body until cond expression is false."),do:l(new q("do",function(){var r=V(function(_,e){var h=this;var p=e.use_dynamic,d=e.error;return O.mark(function e(){var o,r,s,c,n,f,l,i,a,u;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:o=h;r=o;s=o.inherit("do");c=_.car;n=_.cdr.car;f=_.cdr.cdr;if(!ue(f)){f=new ae(ne("begin"),f)}l={env:o,dynamic_env:r,use_dynamic:p,error:d};i=c;case 9:if(ue(i)){t.next=20;break}a=i.car;t.t0=s;t.t1=a.car;t.next=15;return A(a.cdr.car,l);case 15:t.t2=t.sent;t.t0.set.call(t.t0,t.t1,t.t2);i=i.cdr;t.next=9;break;case 20:l={env:s,dynamic_env:r,error:d};u=O.mark(function e(){var r,n,i,a,u;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(ue(f)){t.next=3;break}t.next=3;return Ls.evaluate(f,l);case 3:r=c;n={};case 5:if(ue(r)){t.next=15;break}i=r.car;if(ue(i.cdr.cdr)){t.next=12;break}t.next=10;return A(i.cdr.cdr.car,l);case 10:a=t.sent;n[i.car.valueOf()]=a;case 12:r=r.cdr;t.next=5;break;case 15:u=Object.getOwnPropertySymbols(n);l.env=s=o.inherit("do");Object.keys(n).concat(u).forEach(function(e){s.set(e,n[e])});case 18:case"end":return t.stop()}},e)});case 22:t.next=24;return A(n.car,l);case 24:t.t3=t.sent;if(!(t.t3===false)){t.next=29;break}return t.delegateYield(u(),"t4",27);case 27:t.next=22;break;case 29:if(ue(n.cdr)){t.next=33;break}t.next=32;return A(n.cdr.car,l);case 32:return t.abrupt("return",t.sent);case 33:case"end":return t.stop()}},e)})()});return function(e,t){return r.apply(this,arguments)}}()),"(do ((<var> <init> <next>)) (test return) . body)\n\n         Iteration macro that evaluates the expression body in scope of the variables.\n         On each loop it changes the variables according to the <next> expression and runs\n         test to check if the loop should continue. If test is a single value, the macro\n         will return undefined. If the test is a pair of expressions the macro will\n         evaluate and return the second expression after the loop exits."),if:l(new q("if",function(r,e){var t=e.error,n=e.use_dynamic;var i=this;var a=this;var u={env:a,dynamic_env:i,use_dynamic:n,error:t};var o=function e(t){if(Aa(t)){return A(r.cdr.cdr.car,u)}else{return A(r.cdr.car,u)}};if(ue(r)){throw new Error("too few expressions for `if`")}var s=A(r.car,u);return D(s,o)}),"(if cond true-expr false-expr)\n\n         Macro that evaluates cond expression and if the value is true, it\n         evaluates and returns true-expression, if not it evaluates and returns\n         false-expression."),"let-env":new q("let-env",function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=e.dynamic_env,n=e.use_dynamic,i=e.error;F("let-env",t,"pair");var a=A(t.car,{env:this,dynamic_env:r,error:i,use_dynamic:n});return D(a,function(e){F("let-env",e,"environment");return A(ae(ne("begin"),t.cdr),{env:e,dynamic_env:r,error:i})})},"(let-env env . body)\n\n        Special macro that evaluates body in context of given environment\n        object."),letrec:l(yu(Symbol["for"]("letrec")),"(letrec ((a value-a) (b value-b) ...) . body)\n\n         Macro that creates a new environment, then evaluates and assigns values to\n         names and then evaluates the body in context of that environment.\n         Values are evaluated sequentially and the next value can access the\n         previous values/names."),"letrec*":l(yu(Symbol["for"]("letrec")),"(letrec* ((a value-a) (b value-b) ...) . body)\n\n         Same as letrec but the order of execution of the binding is guaranteed,\n         so you can use recursive code as well as referencing the previous binding.\n\n         In LIPS both letrec and letrec* behave the same."),"let*":l(yu(Symbol["for"]("let*")),"(let* ((a value-a) (b value-b) ...) . body)\n\n         Macro similar to `let`, but the subsequent bindings after the first\n         are evaluated in the environment including the previous let variables,\n         so you can define one variable, and use it in the next's definition."),let:l(yu(Symbol["for"]("let")),"(let ((a value-a) (b value-b) ...) . body)\n\n         Macro that creates a new environment, then evaluates and assigns values to names,\n         and then evaluates the body in context of that environment.  Values are evaluated\n         sequentially but you can't access previous values/names when the next are\n         evaluated. You can only get them in the body of the let expression.  (If you want\n         to define multiple variables and use them in each other's definitions, use\n         `let*`.)"),"begin*":l(gu("begin*",function(e){return e.pop()}),"(begin* . body)\n\n         This macro is a parallel version of begin. It evaluates each expression\n         in the body and if it's a promise it will await it in parallel and return\n         the value of the last expression (i.e. it uses Promise.all())."),shuffle:l("shuffle",function(e){F("shuffle",e,["pair","nil","array"]);var t=se.get("random");if(ue(e)){return ie}if(Array.isArray(e)){return qi(e.slice(),t)}var r=se.get("list->array")(e);r=qi(r,t);return se.get("array->list")(r)},"(shuffle obj)\n\n        Order items in vector or list in random order."),begin:l(new q("begin",function(e,t){var n=te(te({},t),{},{env:this});var i=se.get("list->array")(e);var a;return function t(){if(i.length){var e=i.shift();var r=A(e,n);return D(r,function(e){a=e;return t()})}else{return a}}()}),"(begin . args)\n\n         Macro that runs a list of expressions in order and returns the value\n         of the last one. It can be used in places where you can only have a\n         single expression, like (if)."),ignore:new q("ignore",function(e,t){var r=te(te({},t),{},{env:this,dynamic_env:this});A(new ae(new ne("begin"),e),r)},"(ignore . body)\n\n        Macro that will evaluate the expression and swallow any promises that may\n        be created. It will discard any value that may be returned by the last body\n        expression. The code should have side effects and/or when it's promise\n        it should resolve to undefined."),"call/cc":l(q.defmacro("call/cc",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=te({env:this},t);return D(A(e.car,r),function(e){if(d(e)){return e(new Xo(null))}})}),"(call/cc proc)\n\n         Call-with-current-continuation.\n\n         NOT SUPPORTED BY LIPS RIGHT NOW"),parameterize:l(new q("parameterize",function(t,e){var i=e.dynamic_env;var a=i.inherit("parameterize").new_frame(null,{});var u=te(te({},e),{},{env:this});var o=t.car;if(!oe(o)){var r=Uo(o);throw new Error("Invalid syntax for parameterize expecting pair got ".concat(r))}function s(){var e=new ae(new ne("begin"),t.cdr);return A(e,te(te({},u),{},{dynamic_env:a}))}return function r(){var e=o.car;var n=e.car.valueOf();return D(A(e.cdr.car,u),function(e){var t=i.get(n,{throwError:false});if(!Na(t)){throw new Error("Unknown parameter ".concat(n))}a.set(n,t.inherit(e));if(!Ea(o.cdr)){o=o.cdr;return r()}else{return s()}})}()}),"(parameterize ((name value) ...)\n\n         Macro that change the dynamic variable created by make-parameter."),"make-parameter":l(new q("make-parameter",function(e,t){t.dynamic_env;var r=A(e.car,t);var n;if(oe(e.cdr.car)){n=A(e.cdr.car,t)}return new Go(r,n)}),"(make-parameter init converter)\n\n    Function creates new dynamic variable that can be custimized with parameterize\n    macro. The value should be assigned to a variable e.g.:\n\n    (define radix (make-parameter 10))\n\n    The result value is a procedure that return the value of dynamic variable."),"define-syntax-parameter":l(new q("define-syntax-parameter",function(e,t){var r=e.car;var n=this;if(!(r instanceof ne)){throw new Error("define-syntax-parameter: invalid syntax expecting symbol got ".concat(Uo(r)))}var i=A(e.cdr.car,te({env:n},t));F("define-syntax-parameter",i,"syntax",2);i.__name__=r.valueOf();if(i.__name__ instanceof x){i.__name__=i.__name__.valueOf()}var a;if(oe(e.cdr.cdr)&&x.isString(e.cdr.cdr.car)){a=e.cdr.cdr.car.valueOf()}n.set(e.car,new ba(i),a,true)}),"(define-syntax-parameter name syntax [__doc__])\n\n         Binds <keyword> to the transformer obtained by evaluating <transformer spec>.\n         The transformer provides the default expansion for the syntax parameter,\n         and in the absence of syntax-parameterize, is functionally equivalent to\n         define-syntax."),"syntax-parameterize":l(new q("syntax-parameterize",function(e,t){var r=se.get("list->array")(e.car);var n=this.inherit("syntax-parameterize");while(r.length){var i=r.shift();if(!(oe(i)||i.car instanceof ne)){var a="invalid syntax for syntax-parameterize: ".concat($i(e,true));throw new Error("syntax-parameterize: ".concat(a))}var u=A(i.cdr.car,te(te({},t),{},{env:this}));var o=i.car;F("syntax-parameterize",u,["syntax"]);F("syntax-parameterize",o,"symbol");u.__name__=o.valueOf();if(u.__name__ instanceof x){u.__name__=u.__name__.valueOf()}var s=new ba(u);if(o.is_gensym()){var c=o.literal();var f=this.get(c,{throwError:false});if(f instanceof ba){n.set(c,s)}}n.set(o,s)}var l=Un([n,t.dynamic_env],e.cdr);return A(l,te(te({},t),{},{env:n}))}),"(syntax-parameterize (bindings) body)\n\n         Macro work similar to let-syntax but the the bindnds will be exposed to the user.\n         With syntax-parameterize you can define anaphoric macros."),define:l(q.defmacro("define",function(r,e){var n=this;if(oe(r.car)&&r.car.car instanceof ne){var t=new ae(new ne("define"),new ae(r.car.car,new ae(new ae(new ne("lambda"),new ae(r.car.cdr,r.cdr)))));return t}else if(e.macro_expand){return}e.dynamic_env=this;e.env=n;var i=r.cdr.car;var a;if(oe(i)){i=A(i,e);a=true}else if(i instanceof ne){i=n.get(i)}F("define",r.car,"symbol");return D(i,function(e){if(n.__name__===ga.__merge_env__){n=n.__parent__}if(a&&(d(e)&&Ca(e)||e instanceof ga||Na(e))){e.__name__=r.car.valueOf();if(e.__name__ instanceof x){e.__name__=e.__name__.valueOf()}}var t;if(oe(r.cdr.cdr)&&x.isString(r.cdr.cdr.car)){t=r.cdr.cdr.car.valueOf()}n.set(r.car,e,t,true)})}),'(define name expression)\n         (define name expression "doc string")\n         (define (function-name . args) . body)\n\n         Macro for defining values. It can be used to define variables,\n         or functions. If the first argument is list it will create a function\n         with name being first element of the list. This form expands to\n         `(define function-name (lambda args body))`'),"set-obj!":l("set-obj!",function(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=h(e);if(Ea(e)||i!=="object"&&i!=="function"){var a=No("set-obj!",Uo(e),["object","function"]);throw new Error(a)}F("set-obj!",t,["string","symbol","number"]);e=Qa(e);t=t.valueOf();if(arguments.length===2){delete e[t]}else if(Ba(e)&&d(r)){e[t]=Qa(r);e[t][lu]=true}else if(d(r)||Ya(r)||ue(r)){e[t]=r}else{e[t]=r&&!Ba(r)?r.valueOf():r}if(Yi){var u=e[t];Object.defineProperty(e,t,te(te({},n),{},{value:u}))}},"(set-obj! obj key value)\n        (set-obj! obj key value props)\n\n        Function set a property of a JavaScript object. props should be a vector of pairs,\n        passed to Object.defineProperty."),"null-environment":l("null-environment",function(){return se.inherit("null")},"(null-environment)\n\n        Returns a clean environment with only the standard library."),values:l("values",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return _o(r)},"(values a1 a2 ...)\n\n        If called with more then one element it will create a special\n        Values object that can be used in the call-with-values function."),"call-with-values":l("call-with-values",function(e,t){F("call-with-values",e,"function",1);F("call-with-values",t,"function",2);var r=e.apply(this);if(r instanceof _o){return t.apply(this,r.valueOf())}return t.call(this,r)},"(call-with-values producer consumer)\n\n        Calls the producer procedure with no arguments, then calls the\n        consumer procedure with the returned value as an argument -- unless\n        the returned value is a special Values object created by (values), if it is\n        the values are unpacked and the consumer is called with multiple arguments."),"current-environment":l("current-environment",function(){if(this.__name__==="__frame__"){return this.__parent__}return this},"(current-environment)\n\n        Function that returns the current environment (they're first-class objects!)"),"parent.frame":l("parent.frame",function(){return xo},"(parent.frame)\n\n        Returns the parent environment if called from inside a function.\n        If no parent frame can be found it returns nil."),eval:l("eval",function(n,i){i=i||this.get("interaction-environment").call(this);return new Promise(function(e,t){var r=A(n,{env:i,dynamic_env:i,error:t});e(r)})},"(eval expr)\n        (eval expr environment)\n\n        Function that evaluates LIPS Scheme code. If the second argument is provided\n        it will be the environment that the code is evaluated in."),lambda:new q("lambda",function(v){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},m=e.use_dynamic,y=e.error;var g=this;var b;if(oe(v.cdr)&&x.isString(v.cdr.car)&&!ue(v.cdr.cdr)){b=v.cdr.car.valueOf()}function w(){var e=Pa(this)?this:{dynamic_env:g},r=e.dynamic_env;var n=g.inherit("lambda");r=r.inherit("lambda");if(this&&!Pa(this)){if(this&&!this.__instance__){Object.defineProperty(this,"__instance__",{enumerable:false,get:function e(){return true},set:function e(){},configurable:false})}n.set("this",this)}for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}if(this instanceof Qo){var u={throwError:false};n.set("arguments",this.env.get("arguments",u));n.set("parent.frame",this.env.get("parent.frame",u))}else{var o=i.slice();o.callee=w;o.env=n;n.set("arguments",o)}function s(e,t){n.__env__[e.__name__]=t;r.__env__[e.__name__]=t}var c=v.car;var f=0;if(c instanceof ne||!ue(c)){while(true){if(!ue(c.car)){if(c instanceof ne){var l=ho(ae.fromArray(i.slice(f),false));s(c,l);break}else if(oe(c)){var _=i[f];s(c.car,_)}}if(ue(c.cdr)){break}f++;c=c.cdr}}var h=b?v.cdr.cdr:v.cdr;var p=Un([n,r],h);var d={env:n,dynamic_env:r,use_dynamic:m,error:y};return A(p,d)}var t=oe(v.car)?v.car.length():null;w.__code__=new ae(new ne("lambda"),v);w[_u]=true;if(!oe(v.car)){return l(w,b,true)}return l(mu(w,t),b,true)},"(lambda (a b) body)\n        (lambda args body)\n        (lambda (a b . rest) body)\n\n        The lambda macro creates a new anonymous function. If the first element of\n        the body is a string and there is more elements the string is used as the\n        documentation string, that can be read using (help fn)."),macroexpand:l(new q("macroexpand",ya()),"(macroexpand expr)\n\n         Macro that expand all macros inside and return single expression as output."),"macroexpand-1":l(new q("macroexpand-1",ya(true)),"(macroexpand-1 expr)\n\n         Macro similar to macroexpand but it expand macros only one level\n         and return single expression as output."),"define-macro":l(new q(_a,function(e,t){var r=t.use_dynamic,n=t.error;var i,a,u,o;if(pa(e)){i=e.car.car.__name__;u=e.cdr;o=e.car.cdr}if(ha(e)){i=e.car.__name__;var s=e.cdr.car;o=s.cdr.car;u=s.cdr.cdr}if(i&&u&&o){if(x.isString(u.car)&&oe(u.cdr)){a=u.car.valueOf();u=u.cdr}var c=da(i,o,u,a,{use_dynamic:r,error:n});this.set(i,c)}else{throw new Error("Syntax Error: Invalid `define-macro` expression")}}),"(define-macro (name . args) body)\n\n         The meta-macro, that creates new macros. If the return value is a list structure\n         it will be evaluated where the macro is invoked from. You can use quasiquote `\n         and unquote , and unquote-splicing ,@ inside to create an expression that will be\n         evaluated at runtime. Macros works like this: if you pass any expression to a\n         macro the arguments will not be evaluated unless the macro's body explicitly\n         calls (eval) on it. Because of this a macro can manipulate the expression\n         (arguments) as lists."),"syntax-rules":new q("syntax-rules",function(g,e){var b=e.use_dynamic,w=e.error;var D=this;function x(e){var t=[];while(!ue(e)){var r=e.car;t.push(r.valueOf());e=e.cdr}return t}function t(e){while(!ue(e)){var t=e.car;if(!(t instanceof ne)){throw new Error("syntax-rules: wrong identifier")}e=e.cdr}}if(g.car instanceof ne){t(g.cdr.car)}else{t(g.car)}var r=new ga(function(e,t){var r=t.macro_expand;re(">> SYNTAX");re(e);re(g);var n=D.inherit("syntax");var i=n;var a=this;if(a.__name__===ga.__merge_env__){var u=Object.getOwnPropertySymbols(a.__env__);u.forEach(function(e){a.__parent__.set(e,a.__env__[e])});a=a.__parent__}var o={env:n,dynamic_env:i,use_dynamic:b,error:w};var s,c,f;if(g.car instanceof ne){s=g.car;f=x(g.cdr.car);c=g.cdr.cdr}else{s="...";f=x(g.car);c=g.cdr}try{while(!ue(c)){var l=c.car.car;var _=c.car.cdr.car;re("[[[ RULE");re(l);var h=wa(l,e,f,s,{expansion:this,define:D});if(h){if(Rr()){console.log(JSON.stringify(Qi(h),true,2));console.log("PATTERN: "+l.toString(true));console.log("MACRO: "+e.toString(true))}var p=[];var d=xa({bindings:h,expr:_,symbols:f,scope:n,lex_scope:a,names:p,ellipsis:s});re("OUPUT>>> ",d);if(d){_=d}var v=a.merge(n,ga.__merge_env__);if(r){return{expr:_,scope:v}}var m=A(_,te(te({},o),{},{env:v}));return Da(m,p)}c=c.cdr}}catch(e){var y="\nin macro:\n  ".concat(g.toString(true));if(!e.message.includes(y)){e.message+=y}throw e}throw new Error("syntax-rules: no matching syntax in macro ".concat(e.toString(true)))},D);r.__code__=g;return r},"(syntax-rules () (pattern expression) ...)\n\n        Base of hygienic macros, it will return a new syntax expander\n        that works like Lisp macros."),quote:l(new q("quote",function(e){return ho(e.car)}),"(quote expression) or 'expression\n\n         Macro that returns a single LIPS expression as data (it won't evaluate the\n         argument). It will return a list if put in front of LIPS code.\n         And if put in front of a symbol it will return the symbol itself, not the value\n         bound to that name."),"unquote-splicing":l("unquote-splicing",function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},"(unquote-splicing code) or ,@code\n\n        Special form used in the quasiquote macro. It evaluates the expression inside and\n        splices the list into quasiquote's result. If it is not the last element of the\n        expression, the computed value must be a pair."),unquote:l("unquote",function(){throw new Error("You can't call `unquote` outside of quasiquote")},"(unquote code) or ,code\n\n        Special form used in the quasiquote macro. It evaluates the expression inside and\n        substitutes the value into quasiquote's result."),quasiquote:q.defmacro("quasiquote",function(e,t){var o=t.use_dynamic,s=t.error;var c=this;var f=c;function a(e){return oe(e)||Vi(e)||Array.isArray(e)}function l(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:a;if(oe(e)){var n=e.car;var i=e.cdr;if(r(n)){n=t(n)}if(r(i)){i=t(i)}if(Ra(n)||Ra(i)){return $n([n,i]).then(function(e){var t=w(e,2),r=t[0],n=t[1];return new ae(r,n)})}else{return new ae(n,i)}}return e}function u(e,t){if(oe(e)){if(!ue(t)){e.append(t)}}else{e=new ae(e,t)}return e}function r(e){return!!e.filter(function(e){return oe(e)&&ne.is(e.car,/^(unquote|unquote-splicing)$/)}).length}function _(e,n,i){return e.reduce(function(e,t){if(!oe(t)){e.push(t);return e}if(ne.is(t.car,"unquote-splicing")){var r;if(n+1<i){r=v(t.cdr,n+1,i)}else{r=A(t.cdr.car,{env:c,use_dynamic:o,dynamic_env:f,error:s})}if(!oe(r)){throw new Error("Expecting list ".concat(Uo(t)," found"))}return e.concat(r.to_array())}e.push(v(t,n,i));return e},[])}function h(n,i,a){var u={};i++;Object.keys(n).forEach(function(e){var t=n[e];if(oe(t)){if(ne.is(t.car,"unquote-splicing")){throw new Error("You can't call `unquote-splicing` "+"inside object")}var r;if(i<a){r=v(t.cdr.car,i,a)}else{r=A(t.cdr.car,{env:c,dynamic_env:f,use_dynamic:o,error:s})}u[e]=r}else{u[e]=t}});if(Object.isFrozen(n)){Object.freeze(u)}return u}function p(i,e,t){if(e<t){var r=ie;if(!ue(i.cdr)){r=v(i.cdr,e-1,t)}return new ae(new ae(i.car.car,v(i.car.cdr,e,t)),r)}var n=[];return function e(t){var r=A(t.car,{env:c,dynamic_env:f,use_dynamic:o,error:s});n.push(r);if(oe(t.cdr)){return e(t.cdr)}return D(n,function(r){if(r.some(function(e){return!oe(e)})){if(oe(i.cdr)&&ne.is(i.cdr.car,".")&&oe(i.cdr.cdr)&&ue(i.cdr.cdr.cdr)){return i.cdr.cdr.car}if(!(ue(i.cdr)||oe(i.cdr))){var e="You can't splice atom inside list";throw new Error(e)}if(r.length>1){var t="You can't splice multiple atoms inside list";throw new Error(t)}if(!(oe(i.cdr)&&ue(r[0]))){return r[0]}}r=r.map(function(e){if(d.has(e)){return e.clone()}else{d.add(e);return e}});var n=v(i.cdr,0,1);if(ue(n)&&ue(r[0])){return undefined}return D(n,function(e){if(ue(r[0])){return e}if(r.length===1){return u(r[0],e)}var t=r.reduce(function(e,t){return u(e,t)});return u(t,e)})})}(i.car.cdr)}var d=new Set;function v(e,t,r){if(oe(e)){if(oe(e.car)){if(ne.is(e.car.car,"unquote-splicing")){return p(e,t+1,r)}if(ne.is(e.car.car,"unquote")){if(t+2===r&&oe(e.car.cdr)&&oe(e.car.cdr.car)&&ne.is(e.car.cdr.car.car,"unquote-splicing")){var n=e.car.cdr;return new ae(new ae(new ne("unquote"),p(n,t+2,r)),ie)}else if(oe(e.car.cdr)&&!ue(e.car.cdr.cdr)){if(oe(e.car.cdr.car)){var i=[];return function t(r){if(ue(r)){return ae.fromArray(i)}return D(A(r.car,{env:c,dynamic_env:f,use_dynamic:o,error:s}),function(e){i.push(e);return t(r.cdr)})}(e.car.cdr)}else{return e.car.cdr}}}}if(ne.is(e.car,"quasiquote")){var a=v(e.cdr,t,r+1);return new ae(e.car,a)}if(ne.is(e.car,"quote")){return new ae(e.car,v(e.cdr,t,r))}if(ne.is(e.car,"unquote")){t++;if(t<r){return new ae(new ne("unquote"),v(e.cdr,t,r))}if(t>r){throw new Error("You can't call `unquote` outside "+"of quasiquote")}if(oe(e.cdr)){if(!ue(e.cdr.cdr)){if(oe(e.cdr.car)){var u=[];return function t(r){if(ue(r)){return ae.fromArray(u)}return D(A(r.car,{env:c,dynamic_env:f,use_dynamic:o,error:s}),function(e){u.push(e);return t(r.cdr)})}(e.cdr)}else{return e.cdr}}else{return A(e.cdr.car,{env:c,dynamic_env:f,error:s})}}else{return e.cdr}}return l(e,function(e){return v(e,t,r)})}else if(Vi(e)){return h(e,t,r)}else if(e instanceof Array){return _(e,t,r)}return e}function n(e){if(oe(e)){delete e[uu];if(!e.have_cycles("car")){n(e.car)}if(!e.have_cycles("cdr")){n(e.cdr)}}}if(Vi(e.car)&&!r(Object.values(e.car))){return ho(e.car)}if(Array.isArray(e.car)&&!r(e.car)){return ho(e.car)}if(oe(e.car)&&!e.car.find("unquote")&&!e.car.find("unquote-splicing")&&!e.car.find("quasiquote")){return ho(e.car)}var i=v(e.car,0,1);return D(i,function(e){n(e);return ho(e)})},"(quasiquote list)\n\n        Similar macro to `quote` but inside it you can use special expressions (unquote\n        x) abbreviated to ,x that will evaluate x and insert its value verbatim or\n        (unquote-splicing x) abbreviated to ,@x that will evaluate x and splice the value\n        into the result. Best used with macros but it can be used outside."),clone:l("clone",function e(t){F("clone",t,"pair");return t.clone()},"(clone list)\n\n        Function that returns a clone of the list, that does not share any pairs with the\n        original, so the clone can be safely mutated without affecting the original."),append:l("append",function e(){var t;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}n=n.map(function(e){if(oe(e)){return e.clone()}return e});return(t=se.get("append!")).call.apply(t,[this].concat(ee(n)))},"(append item ...)\n\n        Function that creates a new list with each argument appended end-to-end.\n        It will always return a new list and not modify its arguments."),"append!":l("append!",function(){var r=se.get("list?");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return t.reduce(function(e,t){F("append!",e,["nil","pair"]);if((oe(t)||ue(t))&&!r(t)){throw new Error("append!: Invalid argument, value is not a list")}if(ue(e)){if(ue(t)){return ie}return t}if(Ea(t)){return e}return e.append(t)},ie)},"(append! arg1 ...)\n\n        Destructive version of append, it can modify the lists in place. It returns\n        a new list where each argument is appended to the end. It may modify\n        lists added as arguments."),reverse:l("reverse",function e(t){F("reverse",t,["array","pair","nil"]);if(ue(t)){return ie}if(oe(t)){var r=se.get("list->array")(t).reverse();return se.get("array->list")(r)}else if(Array.isArray(t)){return t.reverse()}else{throw new Error(No("reverse",Uo(t),"array or pair"))}},"(reverse list)\n\n        Function that reverses the list or array. If value is not a list\n        or array it will error."),nth:l("nth",function e(t,r){F("nth",t,"number");F("nth",r,["array","pair"]);if(oe(r)){var n=r;var i=0;while(i<t){if(!n.cdr||ue(n.cdr)||n.have_cycles("cdr")){return ie}n=n.cdr;i++}return n.car}else if(r instanceof Array){return r[t]}else{throw new Error(No("nth",Uo(r),"array or pair",2))}},"(nth index obj)\n\n        Function that returns the nth element of the list or array.\n        If used with a non-indexable value it will error."),list:l("list",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return r.reverse().reduce(function(e,t){return new ae(t,e)},ie)},"(list . args)\n\n        Function that creates a new list out of its arguments."),substring:l("substring",function e(t,r,n){F("substring",t,"string");F("substring",r,"number");F("substring",n,["number","void"]);return t.substring(r.valueOf(),n&&n.valueOf())},"(substring string start end)\n\n        Function that returns the slice of the string starting at start and ending\n        with end."),concat:l("concat",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}r.forEach(function(e,t){return F("concat",e,"string",t+1)});return r.join("")},"(concat . strings)\n\n        Function that creates a new string by joining its arguments."),join:l("join",function e(t,r){F("join",t,"string");F("join",r,["pair","nil"]);return se.get("list->array")(r).join(t)},"(join separator list)\n\n        Function that returns a string by joining elements of the list using separator."),split:l("split",function e(t,r){F("split",t,["regex","string"]);F("split",r,"string");return se.get("array->list")(r.split(t))},"(split separator string)\n\n        Function that creates a list by splitting string by separator which can\n        be a string or regular expression."),replace:l("replace",function e(t,r,n){F("replace",t,["regex","string"]);F("replace",r,["string","function"]);F("replace",n,"string");if(d(r)){var i=[];n.replace(t,function(){i.push(r.apply(void 0,arguments))});return D(i,function(e){return n.replace(t,function(){return e.shift()})})}return n.replace(t,r)},"(replace pattern replacement string)\n\n        Function that changes pattern to replacement inside string. Pattern can be a\n        string or regex and replacement can be function or string. See Javascript\n        String.replace()."),match:l("match",function e(t,r){F("match",t,["regex","string"]);F("match",r,"string");var n=r.match(t);return n?se.get("array->list")(n):false},"(match pattern string)\n\n        Function that returns a match object from JavaScript as a list or #f if\n        no match."),search:l("search",function e(t,r){F("search",t,["regex","string"]);F("search",r,"string");return r.search(t)},"(search pattern string)\n\n        Function that returns the first found index of the pattern inside a string."),repr:l("repr",function e(t,r){return na(t,r)},"(repr obj)\n\n        Function that returns a LIPS code representation of the object as a string."),"escape-regex":l("escape-regex",function(e){F("escape-regex",e,"string");return Cn(e.valueOf())},"(escape-regex string)\n\n        Function that returns a new string where all special operators used in regex,\n        are escaped with backslashes so they can be used in the RegExp constructor\n        to match a literal string."),env:l("env",function e(e){e=e||this.env;var t=Object.keys(e.__env__).map(ne);var r;if(t.length){r=ae.fromArray(t)}else{r=ie}if(e.__parent__ instanceof s){return se.get("env").call(this,e.__parent__).append(r)}return r},"(env)\n        (env obj)\n\n        Function that returns a list of names (functions, macros and variables)\n        that are bound in the current environment or one of its parents."),new:l("new",function(e){var t=Qa(e);var r;for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++){i[a-1]=arguments[a]}if(t[Symbol["for"]("__class__")]){r=C(t,i)}else{r=C(t,ee(i.map(function(e){return Ha(e)})))}return r},"(new obj . args)\n\n        Function that creates new JavaScript instance of an object."),typecheck:l(F,"(typecheck label value type [position])\n\n         Checks the type of value and errors if the type is not one allowed.  Type can be\n         string or list of strings. The position optional argument is used to create a\n         proper error message for the nth argument of function calls."),"typecheck-number":l(To,"(typecheck-number label value type [position])\n\n         Function similar to typecheck but checks if the argument is a number\n         and specific type of number e.g. complex."),"unset-special!":l("unset-special!",function(e){F("remove-special!",e,"string");delete Jn.remove(e.valueOf())},"(unset-special! name)\n\n        Function that removes a special symbol from parser added by `set-special!`,\n        name must be a string."),"set-special!":l("set-special!",function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Jn.LITERAL;F("set-special!",e,"string",1);F("set-special!",t,"symbol",2);Jn.append(e.valueOf(),t,r)},'(set-special! symbol name [type])\n\n        Add a special symbol to the list of transforming operators by the parser.\n        e.g.: `(add-special! "#" \'x)` will allow to use `#(1 2 3)` and it will be\n        transformed into (x (1 2 3)) so you can write x macro that will process\n        the list. 3rd argument is optional, and it can be one of two values:\n        lips.specials.LITERAL, which is the default behavior, or\n        lips.specials.SPLICE which causes the value to be unpacked into the expression.\n        This can be used for e.g. to make `#(1 2 3)` into (x 1 2 3) that is needed\n        by # that defines vectors.'),get:vo,".":vo,unbind:l(Qa,"(unbind fn)\n\n         Function that removes the weak 'this' binding from a function so you\n         can get properties from the actual function object."),type:l(Uo,"(type object)\n\n         Function that returns the type of an object as string."),debugger:l("debugger",function(){debugger},'(debugger)\n\n        Function that triggers the JavaScript debugger (e.g. the browser devtools)\n        using the "debugger;" statement. If a debugger is not running this\n        function does nothing.'),in:l("in",function(e,t){if(e instanceof ne||e instanceof x||e instanceof I){e=e.valueOf()}return e in Ha(t)},'(in key value)\n\n        Function that uses the Javascript "in" operator to check if key is\n        a valid property in the value.'),"instance?":l("instance?",function(e){return $a(e)},"(instance? obj)\n\n        Checks if object is an instance, created with a new operator"),instanceof:l("instanceof",function(e,t){return t instanceof Qa(e)},"(instanceof type obj)\n\n        Predicate that tests if the obj is an instance of type."),"prototype?":l("prototype?",Ba,"(prototype? obj)\n\n         Predicate that tests if value is a valid JavaScript prototype,\n         i.e. calling (new) with it will not throw '<x> is not a constructor'."),"macro?":l("macro?",function(e){return e instanceof q},"(macro? expression)\n\n        Predicate that tests if value is a macro."),"continuation?":l("continuation?",Ia,"(continuation? expression)\n\n         Predicate that tests if value is a callable continuation."),"function?":l("function?",d,"(function? expression)\n\n         Predicate that tests if value is a callable function."),"real?":l("real?",function(e){if(Uo(e)!=="number"){return false}if(e instanceof I){return e.isFloat()}return I.isFloat(e)},"(real? number)\n\n        Predicate that tests if value is a real number (not complex)."),"number?":l("number?",function(e){return Number.isNaN(e)||I.isNumber(e)},"(number? expression)\n\n        Predicate that tests if value is a number or NaN value."),"string?":l("string?",function(e){return x.isString(e)},"(string? expression)\n\n        Predicate that tests if value is a string."),"pair?":l("pair?",oe,"(pair? expression)\n\n         Predicate that tests if value is a pair or list structure."),"regex?":l("regex?",function(e){return e instanceof RegExp},"(regex? expression)\n\n        Predicate that tests if value is a regular expression."),"null?":l("null?",function(e){return Ea(e)},"(null? expression)\n\n        Predicate that tests if value is null-ish (i.e. undefined, nil, or\n        Javascript null)."),"boolean?":l("boolean?",function(e){return typeof e==="boolean"},"(boolean? expression)\n\n        Predicate that tests if value is a boolean (#t or #f)."),"symbol?":l("symbol?",function(e){return e instanceof ne},"(symbol? expression)\n\n        Predicate that tests if value is a LIPS symbol."),"array?":l("array?",function(e){return e instanceof Array},"(array? expression)\n\n        Predicate that tests if value is an array."),"object?":l("object?",function(e){return!ue(e)&&e!==null&&!(e instanceof _)&&!(e instanceof RegExp)&&!(e instanceof x)&&!oe(e)&&!(e instanceof I)&&h(e)==="object"&&!(e instanceof Array)},"(object? expression)\n\n        Predicate that tests if value is an plain object (not another LIPS type)."),flatten:l("flatten",function e(t){F("flatten",t,"pair");return t.flatten()},"(flatten list)\n\n        Returns a shallow list from tree structure (pairs)."),"vector-append":l("vector-append",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(!t.length){return[]}Mo("vector-append",t,"array");var n=t[0],i=t.slice(1);return n.concat.apply(n,ee(i))},"(vector-append v1 v2 ...)\n\n         Returns new vector by combining it's arguments that should be vectors."),"array->list":l("array->list",function(e){F("array->list",e,"array");return ae.fromArray(e)},"(array->list array)\n\n        Function that converts a JavaScript array to a LIPS cons list."),"tree->array":l("tree->array",zi("tree->array",true),"(tree->array list)\n\n         Function that converts a LIPS cons tree structure into a JavaScript array."),"list->array":l("list->array",zi("list->array"),"(list->array list)\n\n         Function that converts a LIPS list into a JavaScript array."),apply:l("apply",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}F("apply",t,"function",1);var a=n.pop();F("apply",a,["pair","nil"],n.length+2);n=n.concat(se.get("list->array").call(this,a));return t.apply(this,Jo(t,n))},"(apply fn list)\n\n        Function that calls fn with the list of arguments."),length:l("length",function e(t){if(!t||ue(t)){return 0}if(oe(t)){return t.length()}if("length"in t){return t.length}},'(length expression)\n\n        Function that returns the length of the object. The object can be a LIPS\n        list or any object that has a "length" property. Returns undefined if the\n        length could not be found.'),"string->number":l("string->number",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;F("string->number",e,"string",1);F("string->number",t,"number",2);e=e.valueOf();t=t.valueOf();if(e.match(sn)||e.match(an)){return pn(e,t)}else if(e.match(cn)||e.match(nn)){return mn(e,t)}else{var r=t===10&&!e.match(/e/i)||t===16;if(e.match(on)&&r||e.match(un)){return dn(e,t)}if(e.match(Kr)){return wn(e)}}return false},"(string->number number [radix])\n\n        Function that parses a string into a number."),try:l(new q("try",function(r,e){var l=this;var _=e.use_dynamic;e.error;return new Promise(function(t,o){var s,n;if(ne.is(r.cdr.car.car,"catch")){s=r.cdr.car;if(oe(r.cdr.cdr)&&ne.is(r.cdr.cdr.car.car,"finally")){n=r.cdr.cdr.car}}else if(ne.is(r.cdr.car.car,"finally")){n=r.cdr.car}if(!(n||s)){throw new Error("try: invalid syntax")}function c(e){t(e);throw new fo("[CATCH]")}var f=function e(t,r){r(t)};if(n){f=function e(t,r){f=o;i.error=function(e){throw e};D(A(new ae(new ne("begin"),n.cdr),i),function(){r(t)})}}var i={env:l,use_dynamic:_,dynamic_env:l,error:function e(t){if(t instanceof fo){throw t}if(s){var r=l.inherit("try");var n=s.cdr.car.car;if(!(n instanceof ne)){throw new Error("try: invalid syntax: catch require variable name")}r.set(n,t);var i;var a={env:r,use_dynamic:_,dynamic_env:l,error:function e(t){i=true;o(t);throw new fo("[CATCH]")}};var u=A(new ae(new ne("begin"),s.cdr.cdr),a);D(u,function e(t){if(!i){f(t,c)}})}else{f(undefined,function(){o(t)})}}};var e=A(r.car,i);D(e,function(e){f(e,t)},i.error)})}),"(try expr (catch (e) code))\n         (try expr (catch (e) code) (finally code))\n         (try expr (finally code))\n\n         Macro that executes expr and catches any exceptions thrown. If catch is provided\n         it's executed when an error is thrown. If finally is provided it's always\n         executed at the end."),raise:l("raise",function(e){throw e},"(raise obj)\n\n        Throws the object verbatim (no wrapping an a new Error)."),throw:l("throw",function(e){throw new Error(e)},"(throw string)\n\n        Throws a new exception."),find:l("find",function t(r,n){F("find",n,["pair","nil"]);if(Ea(n)){return false}var e=_i("find",r);return D(e(n.car),function(e){if(e&&!ue(e)){return n.car}return t(r,n.cdr)})},"(find fn list)\n        (find regex list)\n        (find atom list)\n\n        Higher-order function that finds the first value for which fn return true.\n        If called with a regex or any atom it will create a matcher function."),"for-each":l("for-each",function(e){var t;F("for-each",e,"function");for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}n.forEach(function(e,t){F("for-each",e,["pair","nil"],t+1)});var a=(t=se.get("map")).call.apply(t,[this,e].concat(n));if(Ra(a)){return a.then(function(){})}},"(for-each fn . lists)\n\n        Higher-order function that calls function `fn` on each\n        value of the argument. If you provide more than one list\n        it will take each value from each list and call `fn` function\n        with that many arguments as number of list arguments."),map:l("map",function e(r){var n=this;for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++){i[a-1]=arguments[a]}F("map",r,"function");var u=se.get("list?");i.forEach(function(e,t){F("map",e,["pair","nil"],t+1);if(oe(e)&&!u.call(n,e)){throw new Error("map: argument ".concat(t+1," is not a list"))}});if(i.length===0){return ie}if(i.some(ue)){return ie}var o=i.map(function(e){return e.car});var s=this.env,c=this.dynamic_env,f=this.use_dynamic;var l=Ko(r,o,{env:s,dynamic_env:c,use_dynamic:f});return D(l,function(t){return D(e.call.apply(e,[n,r].concat(ee(i.map(function(e){return e.cdr})))),function(e){return new ae(t,e)})})},"(map fn . lists)\n\n        Higher-order function that calls function `fn` with each\n        value of the list. If you provide more then one list as argument\n        it will take each value from each list and call `fn` function\n        with that many argument as number of list arguments. The return\n        values of the fn calls are accumulated in a result list and\n        returned by map."),"list?":l("list?",function(e){var t=e;while(true){if(ue(t)){return true}if(!oe(t)){return false}if(t.have_cycles("cdr")){return false}t=t.cdr}},'(list? obj)\n\n        Predicate that tests if value is a proper linked list structure.\n        The car of each pair can be any value. It returns false on cyclic lists."'),fold:l("fold",xu("fold",function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),a=3;a<n;a++){i[a-3]=arguments[a]}F("fold",t,"function");i.forEach(function(e,t){F("fold",e,["pair","nil"],t+1)});if(i.some(ue)){return r}var u=e.call.apply(e,[this,t,r].concat(ee(i.map(function(e){return e.cdr}))));return D(u,function(e){return t.apply(void 0,ee(i.map(function(e){return e.car})).concat([e]))})}),"(fold fn init . lists)\n\n         Function fold is left-to-right reversal of reduce. It call `fn`\n         on each pair of elements of the list and returns a single value.\n         e.g. it computes (fn 'a 'x (fn 'b 'y (fn 'c 'z 'foo)))\n         for: (fold fn 'foo '(a b c) '(x y z))"),pluck:l("pluck",function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++){a[r]=arguments[r]}return function(t){a=a.map(function(e){return e instanceof ne?e.__name__:e});if(a.length===0){return ie}else if(a.length===1){var e=a,r=w(e,1),n=r[0];return t[n]}var i={};a.forEach(function(e){i[e]=t[e]});return i}},"(pluck . strings)\n\n        If called with a single string it will return a function that when\n        called with an object will return that key from the object.\n        If called with more then one string the returned function will\n        create a new object by copying all properties from the given object."),reduce:l("reduce",xu("reduce",function(t,r,e){var n=this;for(var i=arguments.length,a=new Array(i>3?i-3:0),u=3;u<i;u++){a[u-3]=arguments[u]}F("reduce",r,"function");a.forEach(function(e,t){F("reduce",e,["pair","nil"],t+1)});if(a.some(ue)){return e}return D(r.apply(void 0,ee(a.map(function(e){return e.car})).concat([e])),function(e){return t.call.apply(t,[n,r,e].concat(ee(a.map(function(e){return e.cdr}))))})}),"(reduce fn init list . lists)\n\n         Higher-order function that takes each element of the list and calls\n         the fn with result of previous call or init and the next element\n         of the list until each element is processed, and returns a single value\n         as result of last call to `fn` function.\n         e.g. it computes (fn 'c 'z (fn 'b 'y (fn 'a 'x 'foo)))\n         for: (reduce fn 'foo '(a b c) '(x y z))"),filter:l("filter",function e(t,r){F("filter",t,["regex","function"]);F("filter",r,["pair","nil"]);var i=se.get("list->array")(r);var a=[];var u=_i("filter",t);return function t(r){function e(e){if(e&&!ue(e)){a.push(n)}return t(++r)}if(r===i.length){return ae.fromArray(a)}var n=i[r];return D(u(n),e)}(0)},"(filter fn list)\n        (filter regex list)\n\n        Higher-order function that calls `fn` for each element of the list\n        and return a new list for only those elements for which fn returns\n        a truthy value. If called with a regex it will create a matcher function."),compose:l(Du,"(compose . fns)\n\n         Higher-order function that creates a new function that applies all functions\n         from right to left and returns the last value. Reverse of pipe.\n         e.g.:\n         ((compose (curry + 2) (curry * 3)) 10) ==> (+ 2 (* 3 10)) ==> 32"),pipe:l(wu,"(pipe . fns)\n\n         Higher-order function that creates a new function that applies all functions\n         from left to right and returns the last value. Reverse of compose.\n         e.g.:\n         ((pipe (curry + 2) (curry * 3)) 10) ==> (* 3 (+ 2 10)) ==> 36"),curry:l(Cu,"(curry fn . args)\n\n         Higher-order function that creates a curried version of the function.\n         The result function will have partially applied arguments and it\n         will keep returning one-argument functions until all arguments are provided,\n         then it calls the original function with the accumulated arguments.\n\n         e.g.:\n         (define (add a b c d) (+ a b c d))\n         (define add1 (curry add 1))\n         (define add12 (add 2))\n         (display (add12 3 4))"),gcd:l("gcd",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}Mo("lcm",r,"number");return r.reduce(function(e,t){return e.gcd(t)})},"(gcd n1 n2 ...)\n\n        Function that returns the greatest common divisor of the arguments."),lcm:l("lcm",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}Mo("lcm",r,"number");var i=r.length,a=ua(r[0]);for(var u=1;u<i;u++){var o=ua(r[u]),s=a;while(a&&o){a>o?a%=o:o%=a}a=ua(s*r[u])/(a+o)}return I(a)},"(lcm n1 n2 ...)\n\n        Function that returns the least common multiple of the arguments."),"odd?":l("odd?",Fu(function(e){return I(e).isOdd()}),"(odd? number)\n\n         Checks if number is odd."),"even?":l("even?",Fu(function(e){return I(e).isEven()}),"(even? number)\n\n         Checks if number is even."),"*":l("*",ku(function(e,t){return I(e).mul(t)},I(1)),"(* . numbers)\n\n        Multiplies all numbers passed as arguments. If single value is passed\n        it will return that value."),"+":l("+",ku(function(e,t){return I(e).add(t)},I(0)),"(+ . numbers)\n\n        Sums all numbers passed as arguments. If single value is passed it will\n        return that value."),"-":l("-",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("-: procedure require at least one argument")}Mo("-",t,"number");if(t.length===1){return I(t[0]).sub()}if(t.length){return t.reduce(Au(function(e,t){return I(e).sub(t)}))}},"(- n1 n2 ...)\n        (- n)\n\n        Subtracts n2 and subsequent numbers from n1. If only one argument is passed\n        it will negate the value."),"/":l("/",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("/: procedure require at least one argument")}Mo("/",t,"number");if(t.length===1){return I(1).div(t[0])}return t.reduce(Au(function(e,t){return I(e).div(t)}))},"(/ n1 n2 ...)\n        (/ n)\n\n        Divides n1 by n2 and subsequent arguments one by one. If single argument\n        is passed it will calculate (/ 1 n)."),abs:l("abs",Fu(function(e){return I(e).abs()}),"(abs number)\n\n         Function that returns the absolute value (magnitude) of number."),truncate:l("truncate",function(e){F("truncate",e,"number");if(I.isFloat(e)){if(e instanceof I){e=e.valueOf()}return g(la(e))}return e},"(truncate n)\n\n        Function that returns the integer part (floor) of a real number."),sqrt:l("sqrt",Fu(function(e){return I(e).sqrt()}),"(sqrt number)\n\n         Function that returns the square root of the number."),"**":l("**",Au(function(e,t){e=I(e);t=I(t);if(I.isInteger(t)){var r=t.cmp(0)===-1;if(r){t=t.sub()}if(I.isRational(e)){if(r){var n=e.__denom__.pow(t);if(e.__num__.cmp(1)===0){return n}var i=e.__num__.pow(t);return b({num:n,denom:i})}return b({num:e.__num__.pow(t),denom:e.__denom__.pow(t)})}if(r){return b({num:1,denom:e.pow(t)})}}if(I.isRational(t)&&e.cmp(0)===-1){var a=t.__denom__;var u=t.__num__;if(a.cmp(2)===0){var o=e.abs().pow(b({num:1,denom:2}));var s=e.coerce(o);var c=w(s,2);o=c[1];if(t.cmp(0)===1){return y({re:I(0),im:o})}if(u.cmp(0)===-1){return y({re:I(0),im:b({num:-1,denom:o})})}}var f=t.valueOf();var l=f*Math.PI;var _=e.abs().pow(f);var h=_.mul(Math.cos(l));var p=_.mul(Math.sin(l));return y({re:h,im:p})}var d=e.coerce(t);var v=w(d,2);e=v[0];t=v[1];return e.pow(t)}),"(** a b)\n\n         Function that calculates number a to to the power of b."),"1+":l("1+",Fu(function(e){return I(e).add(1)}),"(1+ number)\n\n         Function that adds 1 to the number and return result."),"1-":l(Fu(function(e){return I(e).sub(1)}),"(1- number)\n\n         Function that subtracts 1 from the number and return result."),"%":l("%",function(e,t){Mo("%",[e,t],"number");return I(e).rem(t)},"(% n1 n2)\n\n        Function returns the remainder of n1/n2 (modulo)."),"==":l("==",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Mo("==",t,"number");return oa(function(e,t){return I(e).cmp(t)===0},t)},"(== x1 x2 ...)}\n\n        Function that compares its numerical arguments and checks if they are\n        all equal."),">":l(">",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Lo(">",t,["bigint","float","rational"]);return oa(function(e,t){return I(e).cmp(t)===1},t)},"(> x1 x2 x3 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        monotonically decreasing, i.e. x1 > x2 and x2 > x3 and so on."),"<":l("<",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Lo("<",t,["bigint","float","rational"]);return oa(function(e,t){return I(e).cmp(t)===-1},t)},"(< x1 x2 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        monotonically increasing, i.e. x1 < x2 and x2 < x3 and so on."),"<=":l("<=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Lo("<=",t,["bigint","float","rational"]);return oa(function(e,t){return[0,-1].includes(I(e).cmp(t))},t)},"(<= x1 x2 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        monotonically nondecreasing, i.e. x1 <= x2 and x2 <= x3 and so on."),">=":l(">=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Lo(">=",t,["bigint","float","rational"]);return oa(function(e,t){return[0,1].includes(I(e).cmp(t))},t)},"(>= x1 x2 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        monotonically nonincreasing, i.e. x1 >= x2 and x2 >= x3 and so on."),"eq?":l("eq?",sa,"(eq? a b)\n\n         Function that compares two values if they are identical."),or:l(new q("or",function(e,t){var i=t.use_dynamic,a=t.error;var u=se.get("list->array")(e);var o=this;var s=o;if(!u.length){return false}var c;return function t(){function e(e){c=e;if(!Aa(c)){return c}else{return t()}}if(!u.length){if(!Aa(c)){return c}else{return false}}else{var r=u.shift();var n=A(r,{env:o,dynamic_env:s,use_dynamic:i,error:a});return D(n,e)}}()}),"(or . expressions)\n\n         Macro that executes the values one by one and returns the first that is\n         a truthy value. If there are no expressions that evaluate to true it\n         returns false."),and:l(new q("and",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.use_dynamic,n=t.error;var i=se.get("list->array")(e);var a=this;var u=a;if(!i.length){return true}var o;var s={env:a,dynamic_env:u,use_dynamic:r,error:n};return function t(){function e(e){o=e;if(Aa(o)){return o}else{return t()}}if(!i.length){if(!Aa(o)){return o}else{return false}}else{var r=i.shift();return D(A(r,s),e)}}()}),"(and . expressions)\n\n         Macro that evaluates each expression in sequence and if any value returns false\n         it will stop and return false. If each value returns true it will return the\n         last value. If it's called without arguments it will return true."),"|":l("|",function(e,t){return I(e).or(t)},"(| a b)\n\n        Function that calculates the bitwise or operation."),"&":l("&",function(e,t){return I(e).and(t)},"(& a b)\n\n        Function that calculates the bitwise and operation."),"~":l("~",function(e){return I(e).neg()},"(~ number)\n\n        Function that calculates the bitwise inverse (flip all the bits)."),">>":l(">>",function(e,t){return I(e).shr(t)},"(>> a b)\n\n        Function that right shifts the value a by value b bits."),"<<":l("<<",function(e,t){return I(e).shl(t)},"(<< a b)\n\n        Function that left shifts the value a by value b bits."),not:l("not",function e(t){return!t},"(not object)\n\n        Function that returns the Boolean negation of its argument.")},undefined,"global");var xo=se.inherit("user-env");function Eo(e,t){e.constant("**internal-env**",t);e.doc("**internal-env**","**internal-env**\n\n         Constant used to hide stdin, stdout and stderr so they don't interfere\n         with variables with the same name. Constants are an internal type\n         of variable that can't be redefined, defining a variable with the same name\n         will throw an error.");se.set("**interaction-environment**",e)}Eo(xo,bo);se.doc("**interaction-environment**","**interaction-environment**\n\n    Internal dynamic, global variable used to find interpreter environment.\n    It's used so the read and write functions can locate **internal-env**\n    that contains the references to stdin, stdout and stderr.");function Fo(e){xo.get("**internal-env**").set("fs",e)}(function(){var e={ceil:"ceiling"};["floor","round","ceil"].forEach(function(t){var r=e[t]?e[t]:t;se.set(r,l(r,function(e){F(r,e,"number");if(e instanceof I){return e[t]()}},"(".concat(r," number)\n\n            Function that calculates the ").concat(r," of a number.")))})})();function Ao(e){if(e.length===1){return e[0]}else{var t=[];var r=Ao(e.slice(1));for(var n=0;n<r.length;n++){for(var i=0;i<e[0].length;i++){t.push(e[0][i]+r[n])}}return t}}function ko(e,t,r){var n=[];for(var i=t;i<=r;++i){var a=[];for(var u=0;u<i;++u){a.push(e)}n=n.concat(Ao(a))}return n}ko(["d","a"],2,5).forEach(function(e){var t=e.split("");var r=t.slice().reverse();var n=t.map(function(e){return"(c".concat(e,"r")}).join(" ")+" arg"+")".repeat(t.length);var i="c"+e+"r";se.set(i,l(i,function(e){return r.reduce(function(e,t){F(i,e,"pair");if(t==="a"){return e.car}else{return e.cdr}},e)},"(".concat(i," arg)\n\n        Function that calculates ").concat(n)))});function Co(e,t){var r=e.split(Nr.sep).filter(Boolean);for(var n=r.length;n--;){var i;var a=(i=Nr).join.apply(i,["/"].concat(ee(r.slice(0,n+1))));if(t(a)){return a}}}function Oo(e){return Co(e,function(e){return Pr.existsSync(Nr.join(e,"node_modules"))})}function So(){return typeof global!=="undefined"&&global.global===global}var jo=function e(){};function Bo(){return Io.apply(this,arguments)}function Io(){Io=V(O.mark(function e(){var r,n,i,a,u;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return import("mod"+"ule");case 2:r=t.sent;n=r.createRequire;Tr=n(typeof document==="undefined"&&typeof location==="undefined"?require("u"+"rl").pathToFileURL(__filename).href:typeof document==="undefined"?location.href:f&&f.tagName.toUpperCase()==="SCRIPT"&&f.src||new URL("lips.js",document.baseURI).href);t.next=7;return import("fs");case 7:Pr=t.sent;t.next=10;return import("path");case 10:Nr=t.sent;se.set("global",global);se.set("self",global);se.set("window",undefined);i=new URL(typeof document==="undefined"&&typeof location==="undefined"?require("u"+"rl").pathToFileURL(__filename).href:typeof document==="undefined"?location.href:f&&f.tagName.toUpperCase()==="SCRIPT"&&f.src||new URL("lips.js",document.baseURI).href);a=Nr.dirname(i.pathname);u=Nr.basename(i.pathname);se.set("__dirname",a);se.set("__filename",u);se.set("require.resolve",l("require.resolve",function(e){F("require.resolve",e,"string");var t=e.valueOf();return Tr.resolve(t)},"(require.resolve path)\n\n        Returns the path relative to the current module.\n\n        Only available when LIPS is running under Node.js."));se.set("require",l("require",function(t){F("require",t,"string");t=t.valueOf();var e=process.cwd();var r;try{if(t.match(/^\s*\./)){r=Tr(Nr.join(e,t))}else{var n=Oo(e);if(n){r=Tr(Nr.join(n,"node_modules",t))}else{r=Tr(t)}}}catch(e){r=Tr(t)}return Ga(r,global)},"(require module)\n\n        Function used inside Node.js to import a module."));process.on("unhandledRejection",function(e,t){if(e instanceof fo){t["catch"](jo)}});case 22:case"end":return t.stop()}},e)}));return Io.apply(this,arguments)}var Po;if(So()){Po=Bo()}else{Po=Promise.resolve();if(typeof window!=="undefined"&&window===jr){se.set("window",window);se.set("global",undefined);se.set("self",window)}else if(typeof self!=="undefined"&&typeof WorkerGlobalScope!=="undefined"){se.set("self",self);se.set("window",undefined);se.set("global",undefined)}}function No(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=e?" in expression `".concat(e,"`"):"";if(n!==null){i+=" (argument ".concat(n,")")}if(d(r)){return"Invalid type: got ".concat(t).concat(i)}if(r instanceof Array){if(r.length===1){var a=r[0].toLowerCase();r="a"+("aeiou".includes(a)?"n ":" ")+r[0]}else{r=new Intl.ListFormat("en",{style:"long",type:"disjunction"}).format(r)}}return"Expecting ".concat(r," got ").concat(t).concat(i)}function To(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;F(e,t,"number",n);var i=t.__type__;var a;if(oe(r)){r=r.to_array()}if(r instanceof Array){r=r.map(function(e){return e.valueOf()})}if(r instanceof Array){r=r.map(function(e){return e.valueOf().toLowerCase()});if(r.includes(i)){a=true}}else{r=r.valueOf().toLowerCase()}if(!a&&i!==r){throw new Error(No(e,i,r,n))}}function Lo(r,e,n){e.forEach(function(e,t){To(r,e,n,t+1)})}function Mo(r,e,n){e.forEach(function(e,t){F(r,e,n,t+1)})}function Ro(e,t,r){F(e,t,r);if(t.__type__===io){throw new Error(No(e,"binary-port","textual-port"))}}function F(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;e=e.valueOf();var i=Uo(t).toLowerCase();if(d(r)){if(!r(t)){throw new Error(No(e,i,r,n))}return}var a=false;if(oe(r)){r=r.to_array()}if(r instanceof Array){r=r.map(function(e){return e.valueOf()})}if(r instanceof Array){r=r.map(function(e){return e.valueOf().toLowerCase()});if(r.includes(i)){a=true}}else{r=r.valueOf().toLowerCase()}if(!a&&i!==r){throw new Error(No(e,i,r,n))}}function qo(r){var n=new WeakMap;return function(e){var t=n.get(e);if(!t){t=r(e)}return t}}Uo=qo(Uo);function Uo(e){var t=Ir.get(e);if(t){return t}if(h(e)==="object"){for(var r=0,n=Object.entries(Br);r<n.length;r++){var i=w(n[r],2),a=i[0],u=i[1];if(e instanceof u){return a}}if($a(e)){if(d(e.typeOf)){return e.typeOf()}return"instance"}if(e.constructor){if(e.constructor.__class__){return e.constructor.__class__}if(e.constructor===Object){if(za(e,Symbol.iterator)){return"iterator"}if(za(e,Symbol.asyncIterator)){return"async-iterator"}}if(e.constructor.name===""){return"object"}return e.constructor.name.toLowerCase()}}if(e===undefined){return"void"}return h(e)}function zo(e){var t=[];r(e);if(t.length){return a(e)}return e;function r(e){if(Ra(e)){t.push(e)}else if(oe(e)){if(!e.have_cycles("car")){r(e.car)}if(!e.have_cycles("cdr")){r(e.cdr)}}else if(e instanceof Array){e.forEach(r)}}function n(e){return i.apply(this,arguments)}function i(){i=V(O.mark(function e(r){var n;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.t0=ae;if(!r.have_cycles("car")){t.next=5;break}t.t1=r.car;t.next=8;break;case 5:t.next=7;return a(r.car);case 7:t.t1=t.sent;case 8:t.t2=t.t1;if(!r.have_cycles("cdr")){t.next=13;break}t.t3=r.cdr;t.next=16;break;case 13:t.next=15;return a(r.cdr);case 15:t.t3=t.sent;case 16:t.t4=t.t3;n=new t.t0(t.t2,t.t4);if(r[uu]){n[uu]=true}return t.abrupt("return",n);case 20:case"end":return t.stop()}},e)}));return i.apply(this,arguments)}function a(e){if(e instanceof Array){return $n(e.map(a))}if(oe(e)&&t.length){return n(e)}return e}}function $o(e,t){var r=t.use_dynamic,n=Z(t,vr);var i=[];var a=e;function u(){return i}return function t(){if(oe(a)){var e=A(a.car,te({use_dynamic:r},n));if(r){e=D(e,function(e){if(ja(e)){return e.bind(dynamic_env)}return e})}return D(zo(e),function(e){i.push(e);if(a.have_cycles("cdr")){throw new Error("Invalid expression: Can't evaluate cycle")}a=a.cdr;return t()})}else if(ue(a)){return u()}else{throw new Error("Syntax Error: improper list found in apply")}}()}function Vo(e,t,r){var n=e.invoke(t,r);return D(zo(n),function(e){if(oe(e)){e.mark_cycles()}return ho(e)})}function Yo(e,t,r){function n(e){if(oe(e)){e.mark_cycles();return e}return ho(e)}var i=e.invoke(t,r);return D(zo(i),function e(t){if(!t||t&&t[uu]||Va(t)){return t}else{return D(A(t,r),n)}},function(e){throw e})}function Jo(e,t){if(eu(e)&&!Xa(e)&&(!tu(e)||nu(e))){t=t.map(Ha)}if(!Sa(e)&&t.some(Wi)&&!Wi(e)&&!Ki(e)){var r=[],n=t.length;var i=function e(){var i=t[n];if(Wi(i)){a=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return D(i.apply(this,r),Ha)};vu(a,"__bound__",true);vu(a,"__fn__",i);a.prototype=i.prototype;r[n]=a}else{r[n]=i}},a;while(n--){i()}t=r}return t}function Ko(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},n=r.env,i=r.dynamic_env,a=r.use_dynamic;var u=n===null||n===void 0?void 0:n.new_frame(e,t);var o=i===null||i===void 0?void 0:i.new_frame(e,t);var s=new Qo({env:u,use_dynamic:a,dynamic_env:o});return zo(e.apply(s,t))}function Wo(n,e){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},i=t.env,a=t.dynamic_env,u=t.use_dynamic,r=t.error,o=r===void 0?function(){}:r;e=$o(e,{env:i,dynamic_env:a,error:o,use_dynamic:u});return D(e,function(e){if(Sa(n)){n=Qa(n)}e=Jo(n,e);var t=e.slice();var r=Ko(n,t,{env:i,dynamic_env:a,use_dynamic:u});return D(r,function(e){if(oe(e)){e.mark_cycles();return ho(e)}return Ka(e)},o)})}var Ho=new WeakMap;var Go=function(){function n(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;Y(this,n);G(this,"__value__",void 0);G(this,"__fn__",void 0);yr(this,Ho,void 0);this.__value__=e;if(t){if(!d(t)){throw new Error("Section argument to Parameter need to be function "+"".concat(Uo(t)," given"))}this.__fn__=t}if(r){wr(Ho,this,r)}}return H(n,[{key:"__name__",get:function e(){return br(Ho,this)},set:function e(t){wr(Ho,this,t);if(this.__fn__){this.__fn__.__name__="fn-".concat(t)}}},{key:"invoke",value:function e(){if(d(this.__fn__)){return this.__fn__(this.__value__)}return this.__value__}},{key:"inherit",value:function e(t){return new n(t,this.__fn__,this.__name__)}}])}();var Qo=function(){function t(e){Y(this,t);G(this,"env",void 0);G(this,"dynamic_env",void 0);G(this,"use_dynamic",void 0);Object.assign(this,e)}return H(t,[{key:"__name__",get:function e(){return this.env.__name__}},{key:"__parent__",get:function e(){return this.env.__parent__}},{key:"get",value:function e(){var t;return(t=this.env).get.apply(t,arguments)}}])}();function Zo(e,t){var r=e.get(t.__name__,{throwError:false});if(Na(r)&&r!==t){return r}var n=xo.get("**interaction-environment**");while(true){var i=e.get("parent.frame",{throwError:false});e=i(0);if(e===n){break}r=e.get(t.__name__,{throwError:false});if(Na(r)&&r!==t){return r}}return t}var Xo=function(){function t(e){Y(this,t);G(this,"__value__",void 0);this.__value__=e}return H(t,[{key:"invoke",value:function e(){if(this.__value__===null){throw new Error("Continuations are not implemented yet")}}}])}();function A(o){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},s=e.env,c=e.dynamic_env,f=e.use_dynamic,t=e.error,l=t===void 0?jo:t,r=Z(e,mr);return function(e){try{if(!Ta(c)){c=s===true?xo:s||xo}if(f){s=c}else if(s===true){s=xo}else{s=s||se}var t={env:s,dynamic_env:c,use_dynamic:f,error:l};var r;if(Ea(o)){return o}if(o instanceof ne){return s.get(o)}if(!oe(o)){return o}var n=o.car;var e=o.cdr;if(oe(n)){r=zo(A(n,t));if(Ra(r)){return r.then(function(e){if(!La(e)){throw new Error(Uo(e)+" "+s.get("repr")(e)+" is not callable while evaluating "+o.toString())}return A(new ae(e,o.cdr),t)})}else if(!La(r)){throw new Error(Uo(r)+" "+s.get("repr")(r)+" is not callable while evaluating "+o.toString())}}if(n instanceof ne){r=s.get(n)}else if(d(n)){r=n}var i;if(r instanceof ga){i=Vo(r,o,t)}else if(r instanceof q){i=Yo(r,e,t)}else if(d(r)){i=Wo(r,e,t)}else if(r instanceof ba){i=Vo(r._syntax,o,t)}else if(Na(r)){var a=Zo(c,r);if(Ea(o.cdr)){i=a.invoke()}else{return D(A(o.cdr.car,t),function(e){a.__value__=e})}}else if(Ia(r)){i=r.invoke()}else if(oe(o)){r=n&&n.toString();throw new Error("".concat(Uo(n)," ").concat(r," is not a function"))}else{return o}var u=s.get(Symbol["for"]("__promise__"),{throwError:false});if(u===true&&Ra(i)){i=i.then(function(e){if(oe(e)&&!r[uu]){return A(e,t)}return e});return new zn(i)}return i}catch(e){l&&l.call(s,e,o)}}(r)}var es=ns(function(e){return e});var ts=ns(function(e,t){return t});function rs(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.env,n=t.dynamic_env,i=t.use_dynamic;return A(e,{env:r,dynamic_env:n,use_dynamic:i,error:function e(t,r){if(t&&t.message){if(t.message.match(/^Error:/)){var n=/^(Error:)\s*([^:]+:\s*)/;t.message=t.message.replace(n,"$1 $2")}if(r){if(!(t.__code__ instanceof Array)){t.__code__=[]}t.__code__.push(r.toString(true))}}if(!(t instanceof fo)){throw t}}})}function ns(d){return function(){var t=V(function(l){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_=e.env,h=e.dynamic_env,p=e.use_dynamic;return O.mark(function e(){var r,n,i,a,u,o,s,c,f;return O.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!Ta(h)){h=_===true?xo:_||xo}if(_===true){_=xo}else{_=_||xo}r=[];if(!oe(l)){t.next=8;break}t.next=6;return rs(l,{env:_,dynamic_env:h,use_dynamic:p});case 6:t.t0=t.sent;return t.abrupt("return",[t.t0]);case 8:n=Array.isArray(l)?l:ui(l);i=false;a=false;t.prev=11;o=Or(n);case 13:t.next=15;return o.next();case 15:if(!(i=!(s=t.sent).done)){t.next=24;break}c=s.value;t.next=19;return rs(c,{env:_,dynamic_env:h,use_dynamic:p});case 19:f=t.sent;r.push(d(c,f));case 21:i=false;t.next=13;break;case 24:t.next=30;break;case 26:t.prev=26;t.t1=t["catch"](11);a=true;u=t.t1;case 30:t.prev=30;t.prev=31;if(!(i&&o["return"]!=null)){t.next=35;break}t.next=35;return o["return"]();case 35:t.prev=35;if(!a){t.next=38;break}throw u;case 38:return t.finish(35);case 39:return t.finish(30);case 40:return t.abrupt("return",r);case 41:case"end":return t.stop()}},e,null,[[11,26,30,40],[31,,35,39]])})()});function e(e){return t.apply(this,arguments)}return e}()}function is(e){var t={"[":"]","(":")"};var r;if(typeof e==="string"){try{r=Nn(e)}catch(e){if(e instanceof ii){return false}throw e}}else{r=e.map(function(e){return e&&e.token?e.token:e})}var n=Object.keys(t);var i=Object.values(t).concat(n);r=r.filter(function(e){return i.includes(e)});var a=new On;var u=Fr(r),o;try{for(u.s();!(o=u.n()).done;){var s=o.value;if(n.includes(s)){a.push(s)}else if(!a.is_empty()){var c=a.top();var f=t[c];if(s===f){a.pop()}else{throw new Error("Syntax error: missing closing ".concat(f))}}else{throw new Error("Syntax error: not matched closing ".concat(s))}}}catch(e){u.e(e)}finally{u.f()}return a.is_empty()}function as(e){var t="("+e.toString()+")()";var r=window.URL||window.webkitURL;var n;try{n=new Blob([t],{type:"application/javascript"})}catch(e){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;n=new i;n.append(t);n=n.getBlob()}return new jr.Worker(r.createObjectURL(n))}function us(){return Ls.version.match(/^(\{\{VER\}\}|DEV)$/)}function os(){if(So()){return}var e;if(document.currentScript){e=document.currentScript}else{var t=document.querySelectorAll("script");if(!t.length){return}e=t[t.length-1]}var r=e.getAttribute("src");return r}var ss=os();function cs(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var t="dist/std.xcb";if(e===""){if(ss){e=ss.replace(/[^/]*$/,"std.xcb")}else if(us()){e="https://cdn.jsdelivr.net/gh/jcubic/lips@devel/".concat(t)}else{e="https://cdn.jsdelivr.net/npm/@jcubic/lips@".concat(Ls.version,"/").concat(t)}}se.set("__dirname",e.replace(/[^/]+$/,""));var r=se.get("load");return r.call(xo,e,se)}function fs(e){this.url=e;var u=this.worker=as(function(){var u;var o;self.addEventListener("message",function(e){var r=e.data;var t=r.id;if(r.type!=="RPC"||t===null){return}function n(e){self.postMessage({id:t,type:"RPC",result:e})}function i(e){self.postMessage({id:t,type:"RPC",error:e})}if(r.method==="eval"){if(!o){i("Worker RPC: LIPS not initialized, call init first");return}o.then(function(){var e=r.params[0];var t=r.params[1];u.exec(e,{use_dynamic:t}).then(function(e){e=e.map(function(e){return e&&e.valueOf()});n(e)})["catch"](function(e){i(e)})})}else if(r.method==="init"){var a=r.params[0];if(typeof a!=="string"){i("Worker RPC: url is not a string")}else{importScripts("".concat(a,"/dist/lips.min.js"));u=new Ls.Interpreter("worker");o=cs(a);o.then(function(){n(true)})}}})});this.rpc=function(){var n=0;return function e(t,r){var a=++n;return new Promise(function(n,i){u.addEventListener("message",function e(t){var r=t.data;if(r&&r.type==="RPC"&&r.id===a){if(r.error){i(r.error)}else{n(r.result)}u.removeEventListener("message",e)}});u.postMessage({type:"RPC",method:t,id:a,params:r})})}}();this.rpc("init",[e])["catch"](function(e){console.error(e)});this.exec=function(e,t){var r=t.use_dynamic,n=r===void 0?false:r;return this.rpc("eval",[e,n])}}var ls={pair:function e(t){var r=w(t,2),n=r[0],i=r[1];return ae(n,i)},number:function e(t){if(x.isString(t)){return I([t,10])}return I(t)},regex:function e(t){var r=w(t,2),n=r[0],i=r[1];return new RegExp(n,i)},nil:function e(){return ie},symbol:function e(t){if(x.isString(t)){return ne(t)}else if(Array.isArray(t)){return ne(Symbol["for"](t[0]))}},string:x,character:_};var _s=Object.keys(ls);var hs={};for(var ps=0,ds=Object.entries(_s);ps<ds.length;ps++){var vs=w(ds[ps],2),ms=vs[0],ys=vs[1];hs[ys]=+ms}function gs(e){return hs[e]}function bs(e){return _s[e]}function ws(e){return JSON.stringify(e,function(e,t){var r=this[e];if(r){if(r instanceof RegExp){return{"@":gs("regex"),"#":[r.source,r.flags]}}var n=gs(r.constructor.__class__);if(!qa(n)){return{"@":n,"#":r.serialize()}}}return t})}function Ds(e){return JSON.parse(e,function(e,t){if(t&&h(t)==="object"){if(!qa(t["@"])){var r=bs(t["@"]);if(ls[r]){return ls[r](t["#"])}}}return t})}var xs=function(){var e={pair:ae,symbol:ne,number:I,string:x,character:_,nil:ie.constructor,regex:RegExp};function t(e,t){return{deserialize:t,Class:e}}var r=new Vt;var a={};for(var n=0,i=Object.entries(ls);n<i.length;n++){var u=w(i[n],2),o=u[0],s=u[1];var c=e[o];a[o]=t(c,s)}var f=43311;Object.keys(a).forEach(function(e){var t=a[e];if(typeof t==="function"){var r=t;rr({Class:r,tag:f,encode:function e(t,r){r(t.serialize())},decode:function e(t){return new r(t)}})}else{var n=t.deserialize,i=t.Class;rr({Class:i,tag:f,encode:function e(t,r){if(t instanceof RegExp){return r([t.source,t.flags])}r(t.serialize())},decode:function e(t){return n(t)}})}f++});return r}();function Es(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length>1){var n=t.reduce(function(e,t){return e+t.length},0);var i=new Uint8Array(n);var a=0;t.forEach(function(e){i.set(e,a);a+=e.length});return i}else if(t.length){return t[0]}}function Fs(){var e=1;var t=new TextEncoder("utf-8");return t.encode("LIPS".concat(e.toString().padStart(3," ")))}var As=7;function ks(e){var t=new TextDecoder("utf-8");var r=t.decode(e.slice(0,As));var n=r.substring(0,4);if(n==="LIPS"){var i=r.match(/^(....).*([0-9]+)$/);if(i){return{type:i[1],version:Number(i[2])}}}return{type:"unknown"}}function Cs(e){var t=Fs();var r=xs.encode(e);return Es(t,fr.pack(r,{magic:false}))}function Os(e){var t=ks(e),r=t.type,n=t.version;if(r==="LIPS"&&n===1){var i=fr.unpack(e.slice(As),{magic:false});return xs.decode(i)}else{throw new Error("Invalid file format ".concat(r))}}function Ss(e){console.error(e.message||e);if(Array.isArray(e.code)){console.error(e.code.map(function(e,t){return"[".concat(t+1,"]: ").concat(e)}))}}function js(){var u=["text/x-lips","text/x-scheme"];var o;function s(e){var t;return(t=e.getAttribute("data-bootstrap"))!==null&&t!==void 0?t:e.getAttribute("bootstrap")}function c(r){return new Promise(function(t){var e=r.getAttribute("src");if(e){return fetch(e).then(function(e){return e.text()}).then(ts).then(t)["catch"](function(e){Ss(e);t()})}else{return ts(r.innerHTML).then(t)["catch"](function(e){Ss(e);t()})}})}function e(){return new Promise(function(i){var a=Array.from(document.querySelectorAll("script"));return function e(){var t=a.shift();if(!t){i()}else{var r=t.getAttribute("type");if(u.includes(r)){var n=s(t);if(!o&&typeof n==="string"){return cs(n).then(function(){return c(t)}).then(e)}else{return c(t).then(e)}}else if(r&&r.match(/lips|lisp/)){console.warn("Expecting "+u.join(" or ")+" found "+r)}return e()}}()})}if(!window.document){return Promise.resolve()}else if(Bs){var t=Bs;var r=s(t);if(typeof r==="string"){return cs(r).then(function(){o=true;return e()})}}return e()}var Bs=typeof window!=="undefined"&&window.document&&document.currentScript;if(typeof window!=="undefined"){Mr(window,js)}var Is=function(){var e=x("Tue, 10 Jun 2025 11:53:26 +0000").valueOf();var t=e==="{{"+"DATE}}"?new Date:new Date(e);var r=function e(t){return t.toString().padStart(2,"0")};var n=t.getFullYear();var i=[n,r(t.getMonth()+1),r(t.getDate())].join("-");var a="\n  __ __                          __\n / / \\ \\       _    _  ___  ___  \\ \\\n| |   \\ \\     | |  | || . \\/ __>  | |\n| |    > \\    | |_ | ||  _/\\__ \\  | |\n| |   / ^ \\   |___||_||_|  <___/  | |\n \\_\\ /_/ \\_\\                     /_/\n\nLIPS Interpreter DEV (".concat(i,") <https://lips.js.org>\nCopyright (c) 2018-").concat(n," Jakub T. Jankiewicz\n\nType (env) to see environment with functions macros and variables. You can also\nuse (help name) to display help for specific function or macro, (apropos name)\nto display list of matched names in environment and (dir object) to list\nproperties of an object.\n").replace(/^.*\n/,"");return a}();c(yi,"__class__","ahead");c(ae,"__class__","pair");c(Ui,"__class__","nil");c(gi,"__class__","pattern");c(mi,"__class__","formatter");c(q,"__class__","macro");c(ga,"__class__","syntax");c(ga.Parameter,"__class__","syntax-parameter");c(s,"__class__","environment");c(Ju,"__class__","input-port");c(Ku,"__class__","output-port");c(Wu,"__class__","output-port");c(Hu,"__class__","output-string-port");c(Qu,"__class__","input-string-port");c(to,"__class__","input-file-port");c(Gu,"__class__","output-file-port");c(co,"__class__","lips-error");[I,y,b,g,E].forEach(function(e){c(e,"__class__","number")});c(_,"__class__","character");c(ne,"__class__","symbol");c(x,"__class__","string");c(zn,"__class__","promise");c(Go,"__class__","parameter");var Ps="DEV";var Ns="Tue, 10 Jun 2025 11:53:26 +0000";var Ts=Du(fi,ui);var Ls={version:Ps,banner:Is,date:Ns,exec:ts,parse:Ts,tokenize:Nn,evaluate:A,compile:es,serialize:ws,unserialize:Ds,box:Ka,unbox:Ha,serialize_bin:Cs,unserialize_bin:Os,bootstrap:cs,Environment:s,env:xo,Worker:fs,Interpreter:so,balanced_parenthesis:is,balancedParenthesis:is,balanced:is,Macro:q,Syntax:ga,Pair:ae,Values:_o,QuotedPromise:zn,Error:co,quote:ho,InputPort:Ju,OutputPort:Ku,BufferedOutputPort:Wu,InputFilePort:to,OutputFilePort:Gu,InputStringPort:Qu,OutputStringPort:Hu,InputByteVectorPort:Xu,OutputByteVectorPort:eo,InputBinaryFilePort:ro,OutputBinaryFilePort:no,set_fs:Fo,Formatter:mi,Parser:ni,Lexer:o,specials:Jn,repr:$i,nil:ie,eof:uo,LSymbol:ne,LNumber:I,LFloat:g,LComplex:y,LRational:b,LBigInteger:E,LCharacter:_,LString:x,Parameter:Go,rationalize:Vu};se.set("lips",Ls);e.BufferedOutputPort=Wu;e.Environment=s;e.Error=co;e.Formatter=mi;e.InputBinaryFilePort=ro;e.InputByteVectorPort=Xu;e.InputFilePort=to;e.InputPort=Ju;e.InputStringPort=Qu;e.Interpreter=so;e.LBigInteger=E;e.LCharacter=_;e.LComplex=y;e.LFloat=g;e.LNumber=I;e.LRational=b;e.LString=x;e.LSymbol=ne;e.Lexer=o;e.Macro=q;e.OutputBinaryFilePort=no;e.OutputByteVectorPort=eo;e.OutputFilePort=Gu;e.OutputPort=Ku;e.OutputStringPort=Hu;e.Pair=ae;e.Parameter=Go;e.Parser=ni;e.QuotedPromise=zn;e.Syntax=ga;e.Values=_o;e.Worker=fs;e._is_directive=Fa;e.balanced=is;e.balancedParenthesis=is;e.balanced_parenthesis=is;e.banner=Is;e.bootstrap=cs;e.box=Ka;e.compile=es;e.date=Ns;e.default=Ls;e.env=xo;e.eof=uo;e.evaluate=A;e.exec=ts;e.nil=ie;e.parse=Ts;e.quote=ho;e.rationalize=Vu;e.repr=$i;e.serialize=ws;e.serialize_bin=Cs;e.set_fs=Fo;e.specials=Jn;e.tokenize=Nn;e.unbox=Ha;e.unserialize=Ds;e.unserialize_bin=Os;e.version=Ps;Object.defineProperty(e,"__esModule",{value:true})});